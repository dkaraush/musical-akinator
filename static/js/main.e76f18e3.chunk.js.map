{"version":3,"sources":["Components/Button/Button.jsx","back.svg","Components/TextOrRecordInput/mic.svg","Components/TextOrRecordInput/close.svg","Components/TextOrRecordInput/send.svg","Components/TextOrRecordInput/warn.svg","Components/TextOrRecordInput/TextOrRecordInput.jsx","Controllers/Storage.js","Controllers/APIController.js","Pages/IndexPage/IndexPage.jsx","Components/Loading/Loading.jsx","CommonAssets/music.svg","Components/MediaLink/MediaLink.jsx","Components/Widgets/Widgets.jsx","Components/TrackBig/TrackBig.jsx","Components/TrackSmall/TrackSmall.jsx","Pages/GuessPage/Score.jsx","Controllers/LastTracks.js","Pages/GuessPage/GuessPage.jsx","Pages/404Page/404Page.jsx","App.jsx","index.js"],"names":["Button","props","enterHandler","onEnter","bind","state","disabled","element","event","this","rect","getBoundingClientRect","x","clientX","left","y","clientY","top","R","Math","max","sqrt","pow","width","height","ripple","document","createElement","className","style","position","transition","borderRadius","opacity","id","Date","now","setTimeout","append","ripples","querySelectorAll","i","start","parseInt","substring","remove","length","ReactDOM","findDOMNode","overflow","down","_down","up","_up","addEventListener","body","enter","window","removeEventListener","nextProps","setState","keyCode","ctrlKey","metaKey","onClick","to","location","href","invert","redirect","children","React","Component","_extends","Object","assign","target","arguments","source","key","prototype","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_ref2","d","fill","_ref3","_ref","svgRef","title","viewBox","ref","ForwardRef","forwardRef","LinkedList","tail","val","next","classes","obj","filter","join","TextOrRecordInput","canvasRendering","audioSupported","MediaRecorder","navigator","getUserMedia","mediaDevices","context","stream","processor","analyser","recorder","chunks","recordingStart","volumes","volumeMax","inputDivRef","createRef","statusRef","canvasRef","inputRef","type","status","statusClass","onResize","resizeCanvas","onKeyPress","catchEnter","callback","onSelect","root","current","canvas","clientWidth","devicePixelRatio","clientHeight","renderCanvas","loop","ctx","getContext","requestAnimationFrame","W","H","clearRect","calculateCoordinates","node","w","h","timestamp","volume","beginPath","moveTo","lineTo","first","last","coordinates","closePath","lineWidth","lineCap","strokeStyle","fillStyle","stroke","audio","video","then","AudioContext","webkitAudioContext","ondataavailable","e","push","data","createAnalyser","createMediaStreamSource","createScriptProcessor","connect","destination","durationString","onaudioprocess","MAX_RECORD_LENGTH","stopStream","fftSize","bufferLength","frequencyBinCount","dataArray","Uint8Array","getByteFrequencyData","sum","innerHTML","startCanvasRendering","micError","catch","err","send","onstop","blob","Blob","mimeType","value","stop","stopCanvasRendering","getTracks","forEach","track","millis","sec","floor","min","addZeros","str","n","repeat","updClassName","trim","inputDone","input","inputDiv","cansend","mic","text","protocol","warnText","placeholder","onChange","onInputChange","onKeyUp","onMicClick","onCloseClick","temp","getters","name","JSON","parse","localStorage","getItem","matches","cookie","match","RegExp","replace","decodeURIComponent","setters","setItem","stringify","encodeURIComponent","Storage","get","def","set","queryToStr","map","cutObject","nobj","cache","updCache","t","httpCache","method","url","before","isCORS","undefined","k","crc32","toString","r","http","res","Array","slice","xhr","XMLHttpRequest","open","onreadystatechange","readyState","responseText","console","warn","setRequestHeader","api","APIController","options","session_id","q","from","round","random","randomString","a","endpoint","audd","req","return","api_token","audd_token","session","bool","score","computer","human","Promise","resolve","reject","response","result","simulateScore","list","media","promises","geniusSearch","deezerSearch","all","isArray","m","provider","path","putMediaToTrack","song_art_image_url","cover","song_id","b","len","toLowerCase","genius_token","artist","access_token","hits","appropriate","hit","primary_artist","probablyEqual","putGeniusData","song","strict","link","album","cover_big","picture_big","simulateAnswer","requestObject","log","query","onResponse","simulateAPIServerResponse","func","FormData","genius","deezer","process","IndexPage","pathname","API","loading","inline","capitilize","toUpperCase","MediaLink","social","img","size","innerWidth","resize","newSize","backgroundImage","widgets","src","frameBorder","scrolling","allowtransparency","allow","multiple","widget","highlightText","minIndex","lowercaseText","words","split","highlights","wordId","index","splice","arr","j","medias","uri","lyrics","sort","elements","players","clean","hash","calcHash","save","reverse","GuessPage","pushState","_setState","storageState","loaded","init","lastTracks","LastTracks","getData","mounted","newState","toSave","newRequest","vote","voted","error","sendAnswer","newScore","Content","unlisten","history","listen","action","querySelector","TransitionGroup","CSSTransition","timeout","exit","classNames","exact","component","_404Page","ContentComponent","withRouter","render","getElementById"],"mappings":"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","file":"static/js/main.e76f18e3.chunk.js","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './Button.css';\n\nclass Button extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.enterHandler = this.onEnter.bind(this);\n\t\tthis.state = {\n\t\t\tdisabled: props.disabled\n\t\t};\n\t}\n\t\n\t_down(element, event) {\n\t\tif (this.state.disabled)\n\t\t\treturn;\n\t\tlet rect = element.getBoundingClientRect();\n\t\tlet x = (event.clientX - rect.left), y = (event.clientY - rect.top);\n\t\tlet R = Math.max(\n\t\t\t\t\tMath.sqrt(Math.pow(x, 2) + Math.pow(y, 2)),\n\t\t\t\t\tMath.sqrt(Math.pow(x-rect.width, 2) + Math.pow(y, 2)),\n\t\t\t\t\tMath.sqrt(Math.pow(x, 2) + Math.pow(y-rect.height, 2)),\n\t\t\t\t\tMath.sqrt(Math.pow(x-rect.width, 2) + Math.pow(y-rect.height, 2))\n\t\t\t\t);\n\n\t\tlet ripple = document.createElement('div');\n\t\tripple.className = 'ripple';\n\t\tripple.style.position = 'absolute';\n\t\tripple.style.transition = 'all 0.25s cubic-bezier(0.215, 0.61, 0.355, 1)';\n\t\tripple.style.borderRadius = '50%';\n\t\tripple.style.opacity = '1';\n\t\tripple.style.top = y + \"px\";\n\t\tripple.style.left = x + \"px\";\n\t\tripple.style.width = ripple.style.height = '0px';\n\t\tripple.id = 's' + Date.now();\n\t\tsetTimeout(function () {\n\t\t\tripple.style.opacity = '0.75';\n\t\t\tripple.style.top = (y-R) + \"px\";\n\t\t\tripple.style.left = (x-R) + \"px\";\n\t\t\tripple.style.width = ripple.style.height = R*2 + 'px';\n\t\t}, 10);\n\n\t\telement.append(ripple);\n\t}\n\t_up(element, event) {\n\t\tlet ripples = element.querySelectorAll('.ripple');\n\t\tif (ripples == null)\n\t\t\treturn;\n\n\t\tfor (let i = 0; i < ripples.length; ++i) {\n\t\t\tlet ripple = ripples[i];\n\t\t\tlet start = parseInt(ripple.id.substring(1));\n\t\t\tif (Date.now() - start > 250) {\n\t\t\t\tripple.style.opacity = '0';\n\t\t\t\tsetTimeout(ripple.remove.bind(ripple), 250);\n\t\t\t} else {\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\tripple.style.opacity = '0';\n\t\t\t\t\tsetTimeout(ripple.remove.bind(ripple), 250);\n\t\t\t\t}, 250 - (Date.now() - start))\n\t\t\t}\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\tlet element = ReactDOM.findDOMNode(this);\n\t\telement.style.position = 'relative';\n\t\telement.style.overflow = 'hidden';\n\n\t\tthis.down = this._down.bind(this, element);\n\t\tthis.up = this._up.bind(this, element);\n\t\telement.addEventListener('mousedown', this.down);\n\t\tdocument.body.addEventListener('mouseup', this.up);\n\t}\n\tcomponentWillMount() {\n\t\tif (this.props.enter)\n\t\t\twindow.addEventListener('keyup', this.enterHandler);\n\t}\n\tcomponentWillUnmount() {\n\t\tif (this.props.enter)\n\t\t\twindow.removeEventListener('keyup', this.enterHandler);\n\n\t\tdocument.body.removeEventListener('mouseup', this.up);\n\t}\n\tcomponentWillReceiveProps(nextProps) {\n\t\tif (nextProps.disabled !== this.state.disabled)\n\t\t\tthis.setState({ disabled: nextProps.disabled });\n\t}\n\tonEnter(event) {\n\t\tif (event.keyCode === 13 && !event.ctrlKey && !event.metaKey) {\n\t\t\tif (typeof this.props.onClick === 'function' && !this.props.disabled)\n\t\t\t\tthis.props.onClick();\n\t\t}\n\t}\n\n\tredirect(to) {\n\t\tif (this.props.disabled)\n\t\t\treturn;\n\t\twindow.location.href = to;\n\t}\n\n\trender() {\n\t\tlet className = this.props.className || '';\n\t\tif (this.props.invert)\n\t\t\tclassName += ' invert';\n\t\tif (this.state.disabled)\n\t\t\tclassName += ' disabled';\n\t\treturn ( \n\t\t\t<div className={className+' button'} \n\t\t\t\t id={this.props.id} \n\t\t\t\t onClick={(function () {\n\t\t\t\t \tif (this.props.disabled)\n\t\t\t\t \t\treturn;\n\t\t\t\t \t(this.props.to ? this.redirect.bind(this, this.props.to) : this.props.onClick)();\t\n\t\t\t\t }).bind(this)}\n\t\t\t\t style={this.props.style}>\n\t\t\t\t {this.props.children}\n\t\t\t</div> \n\t\t);\n\t}\n}\n\nexport default Button;\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M0 0h24v24H0z\",\n  fill: \"none\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z\"\n});\n\nvar SvgBack = function SvgBack(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgBack, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/back.ac944051.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M0 0h24v24H0z\",\n  fill: \"none\"\n});\n\nvar SvgMic = function SvgMic(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgMic, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/mic.c787772c.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M0 0h24v24H0z\",\n  fill: \"none\"\n});\n\nvar SvgClose = function SvgClose(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgClose, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/close.777b93c6.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"none\",\n  d: \"M0 0h24v24H0z\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z\"\n});\n\nvar SvgSend = function SvgSend(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgSend, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/send.e249914e.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z\"\n});\n\nvar SvgWarn = function SvgWarn(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgWarn, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/warn.e21c6b9d.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { ReactComponent as MicPic } from './mic.svg';\nimport { ReactComponent as ClosePic } from './close.svg';\nimport { ReactComponent as SendPic } from './send.svg';\nimport { ReactComponent as WarnPic } from './warn.svg';\n\nimport Button from '../Button/Button';\nimport './TextOrRecordInput.css';\n\nconst MAX_RECORD_LENGTH = 25; // 25 seconds (audd.io)\n\n\n// VERY simple linked list\nclass LinkedList {\n\tconstructor() {\n\t\tthis.tail = null;\n\t}\n\n\tpush(val) {\n\t\tlet tail = this.tail;\n\t\tthis.tail = Object.assign(val, {\n\t\t\tnext: tail\n\t\t});\n\t}\n}\n\nfunction classes(obj) {\n\treturn Object.keys(obj).filter(key => obj[key]).join(' ');\n}\n\nclass TextOrRecordInput extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.canvasRendering = false;\n\n\t\tthis.audioSupported = typeof MediaRecorder !== 'undefined' && \n\t\t\t(!!navigator.getUserMedia || \n\t\t\t\t(navigator.mediaDevices && !!navigator.mediaDevices.getUserMedia));\n\n\t\tthis.context = null;\n\t\tthis.stream = null;\n\t\tthis.source = null;\n\t\tthis.processor = null;\n\t\tthis.analyser = null;\n\t\tthis.recorder = null;\n\t\tthis.chunks = [];\n\t\tthis.recordingStart = null;\n\n\t\tthis.volumes = null;\n\t\tthis.volumeMax = 0;\n\n\t\tthis.inputDivRef = React.createRef();\n\t\tthis.statusRef = React.createRef();\n\t\tthis.canvasRef = React.createRef();\n\t\tthis.inputRef = React.createRef();\n\n\t\tthis.state = {\n\t\t\ttype: 'text',\n\t\t\tstatus: '',\n\t\t\tstatusClass: ''\n\t\t};\n\n\t\tthis.onResize = this.resizeCanvas.bind(this);\n\t\tthis.onKeyPress = this.catchEnter.bind(this);\n\n\t\tthis.callback = props.onSelect;\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.resizeCanvas();\n\t\twindow.addEventListener('resize', this.onResize);\n\t\twindow.addEventListener('keypress', this.onKeyPress);\n\t}\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener('resize', this.onResize);\n\t\twindow.removeEventListener('keypress', this.onKeyPress);\n\t}\n\n\tresizeCanvas() {\n\t\tlet root = this.inputDivRef.current;\n\t\tlet canvas = this.canvasRef.current;\n\t\tif (canvas == null || root == null)\n\t\t\treturn;\n\n\t\tcanvas.width = root.clientWidth * window.devicePixelRatio;\n\t\tcanvas.height = root.clientHeight * window.devicePixelRatio;\n\t\tthis.renderCanvas(false);\n\t}\n\trenderCanvas(loop) {\n\t\tlet canvas = this.canvasRef.current;\n\t\tif (canvas == null)\n\t\t\treturn;\n\t\tlet ctx = canvas.getContext('2d');\n\n\t\tif (loop) {\n\t\t\tif (!this.canvasRendering)\n\t\t\t\treturn;\n\t\t\trequestAnimationFrame(this.renderCanvas.bind(this, loop));\n\t\t}\n\n\t\tlet W = canvas.width,\n\t\t\tH = canvas.height;\n\n\t\tctx.clearRect(0, 0, W, H);\n\t\tif (this.recordingStart === null)\n\t\t\treturn;\n\n\t\tlet calculateCoordinates = (function (node, w, h) {\n\t\t\treturn {\n\t\t\t\tx: (node.timestamp - this.recordingStart) / (MAX_RECORD_LENGTH * 1000) * w,\n\t\t\t\ty: (1 - node.volume / this.volumeMax) * h\n\t\t\t};\n\t\t}).bind(this);\n\n\t\tctx.beginPath();\n\t\tif (this.volumes == null) {\n\t\t\tctx.moveTo(0, H + 10);\n\t\t\tctx.lineTo(0, H/2);\n\t\t\tctx.lineTo((Date.now() - this.recordingStart) / (MAX_RECORD_LENGTH * 1000) * W, H/2);\n\t\t\tctx.lineTo((Date.now() - this.recordingStart) / (MAX_RECORD_LENGTH * 1000) * W, H + 10);\n\t\t} else {\n\t\t\tlet node = this.volumes.tail, first = null, last = null;\n\t\t\twhile (node != null) {\n\t\t\t\tlet coordinates = calculateCoordinates(node, W, H);\n\t\t\t\tif (first == null)\n\t\t\t\t\tfirst = coordinates;\n\t\t\t\tctx.lineTo(coordinates.x, coordinates.y);\n\t\t\t\tlast = coordinates;\n\t\t\t\tnode = node.next;\n\t\t\t}\n\t\t\tif (first != null && last != null) {\n\t\t\t\tctx.lineTo(0, last.y);\n\t\t\t\tctx.lineTo(0, H + 10);\n\t\t\t\tctx.lineTo(first.x, H + 10);\n\t\t\t}\n\t\t}\n\t\tctx.closePath();\n\n\t\tctx.lineWidth = window.devicePixelRatio * 1.5;\n\t\tctx.lineCap = 'round';\n\t\tctx.strokeStyle = '#1976d2';\n\t\tctx.fillStyle = '#90caf9';\n\t\tctx.stroke();\n\t\tctx.fill();\n\t}\n\n\tonMicClick() {\n\t\tthis.setState({type: 'mic'});\n\t\tlet getUserMedia = (window.navigator.mediaDevices ? window.navigator.mediaDevices.getUserMedia : null) || window.navigator.getUserMedia;\n\t\tif (!getUserMedia) {\n\t\t\tthis.micError('getUserMedia() is not accessible');\n\t\t\treturn;\n\t\t}\n\n\t\twindow.navigator.mediaDevices.getUserMedia({ audio: true, video: false })\n      \t\t.then((stream) => {\n      \t\t\tthis.stream = stream;\n\n      \t\t\tlet AudioContext = window.AudioContext\n\t\t\t\t\t\t\t\t\t|| window.webkitAudioContext\n\t\t\t\t\t\t\t\t\t|| false;\n\n\t\t\t\tif (!this.audioSupported) {\n\t\t\t\t\tthis.micError('Your browser doesn\\'t support audio recording');\n\t      \t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.chunks = [];\n\t\t\t\tthis.recorder = new MediaRecorder(this.stream);\n\t\t\t    this.recorder.ondataavailable = (function (e) {\n\t\t\t    \tthis.chunks.push(e.data);\n\t\t\t    }).bind(this);\n\t\t\t\tthis.recorder.start();\n\t\t\t\tthis.recordingStart = Date.now();\n\n\t\t\t\tif (AudioContext) {\n\n\t      \t\t\tthis.context = new AudioContext();\n\t\t\t\t\tthis.analyser = this.context.createAnalyser();\n\t\t\t\t    this.source = this.context.createMediaStreamSource(this.stream);\n\t\t\t\t    this.processor = this.context.createScriptProcessor(1024, 1, 1);\n\n\t\t\t\t\tthis.volumes = new LinkedList();\n\t\t\t\t\tthis.volumeMax = 0;\n\n\t\t\t\t\tthis.source.connect(this.analyser);\n\t\t\t\t\tthis.analyser.connect(this.processor);\n\t\t\t\t\tthis.processor.connect(this.context.destination);\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tstatusClass: 'info', \n\t\t\t\t\t\tstatus: this.durationString(Date.now() - this.recordingStart)\n\t\t\t\t\t});\n\t\t\t\t\tthis.processor.onaudioprocess = (e) => {\n\t\t\t\t\t\tif (this.stream === null || this.state.type !== 'mic' || this.volumes === null)\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\tif (Date.now() - this.recordingStart > MAX_RECORD_LENGTH * 1000) {\n\t\t\t\t\t\t\tthis.stopStream(true);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.analyser.fftSize = 2048;\n\t\t\t\t\t\tlet bufferLength = this.analyser.frequencyBinCount;\n\t\t\t\t\t\tlet dataArray = new Uint8Array(bufferLength);\n\n\t\t\t\t\t\tthis.analyser.getByteFrequencyData(dataArray);\n\n\t\t\t\t\t\tlet sum = 0;\n\t\t\t\t\t\tfor (let i = 0; i < bufferLength; ++i)\n\t\t\t\t\t\t\tsum += dataArray[i];\n\n\t\t\t\t\t\tlet volume = (sum / bufferLength);\n\t\t\t\t\t\tif (volume > this.volumeMax)\n\t\t\t\t\t\t\tthis.volumeMax = volume;\n\t\t\t\t\t\tthis.volumes.push({timestamp: Date.now(), volume: volume});\n\n\t\t\t\t\t\tthis.statusRef.current.innerHTML = this.durationString(Date.now() - this.recordingStart);\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tthis.volumes = null;\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tif (Date.now() - this.recordingStart >= MAX_RECORD_LENGTH * 1000)\n\t\t\t\t\t\t\tthis.stopStream(true);\n\t\t\t\t\t}, MAX_RECORD_LENGTH * 1000);\n\t\t\t\t}\n\n\t\t\t\tthis.startCanvasRendering();\n      \t\t})\n      \t\t.catch((err) => {\n      \t\t\tthis.micError(err);\n      \t\t})\n\t}\n\tmicError(err) {\n\t\tthis.setState({\n\t\t\tstatusClass: 'error',\n\t\t\tstatus: 'Failed to access microphone: ' + (err+'')\n\t\t});\n\t\tthis.recordingStart = null;\n\t\tthis.renderCanvas(false);\n\t\tthis.stream = null;\n\t}\n\tstartCanvasRendering() {\n\t\tthis.canvasRendering = true;\n\t\tthis.renderCanvas(true);\n\t}\n\tstopCanvasRendering() {\n\t\tif (!this.canvasRendering)\n\t\t\tthis.renderCanvas(false); // render last time\n\t\tthis.canvasRendering = false;\n\t}\n\n\tstopStream(send) {\n\t\tif (this.stream === null)\n\t\t\treturn;\n\t\tif (send) {\n\t\t\tthis.recorder.onstop = () => {\n\t\t\t\tlet blob = new Blob(this.chunks, { 'type' : this.recorder.mimeType });\n\t\t\t\tthis.callback({type: 'audio', value: blob});\n\t\t\t}\n\t\t}\n\t\tthis.recorder.stop();\n\t\tthis.stopCanvasRendering();\n\t\tthis.stream.getTracks().forEach(function (track) {\n\t\t\ttrack.stop();\n\t\t});\n\t\tthis.stream = null;\n\t}\n\tdurationString(millis) {\n\t\tlet sec = Math.floor(millis / 1000);\n\t\tlet min = Math.floor(sec / 60);\n\t\tsec = sec % 60;\n\n\t\treturn this.addZeros(min) + ':' + this.addZeros(sec);\n\t}\n\taddZeros(str, n) {\n\t\tif (typeof n === 'undefined')\n\t\t\tn = 2;\n\t\tif (typeof str !== 'string')\n\t\t\tstr = str + '';\n\t\tif (str.length >= n)\n\t\t\treturn str;\n\t\treturn '0'.repeat(n-str.length) + str;\n\t}\n\n\tonCloseClick() {\n\t\tthis.setState({type: 'text'});\n\t\tthis.stopStream(false);\n\n\t\tthis.volumes = null;\n\t\tthis.volumeMax = 0;\n\n\t}\n\n\tonInputChange() {\n\t\tthis.updClassName();\n\t}\n\n\tsend() {\n\t\tif (this.state.type === 'text') {\n\t\t\tlet value = this.inputRef.current.value.trim();\n\t\t\tif (value.length > 0) \n\t\t\t\tthis.callback({type: 'text', value: value});\n\t\t} else {\n\t\t\tif (this.stream !== null)\n\t\t\t\tthis.stopStream(true);\n\t\t}\n\t}\n\n\tcatchEnter(e) {\n\t\tif (e.keyCode == 13 && this.inputDone())\n\t\t\tthis.send();\n\t}\n\n\tinputDone() {\n\t\tlet input = this.inputRef.current, value;\n\t\tif (input != null)\n\t\t\tvalue = input.value;\n\t\telse value = '';\n\n\t\treturn (\n\t\t\t(this.state.type == 'text' && value.length > 0) ||\n\t\t\t(this.state.type == 'mic' && this.audioSupported && this.state.statusClass != 'error')\n\t\t);\n\t}\n\n\tupdClassName() {\n\t\tlet root = ReactDOM.findDOMNode(this);\n\t\tlet inputDiv = root.children[root.children.length - 1];\n\n\t\tlet value = this.inputRef.current.value.trim();\n\t\tinputDiv.className = classes({\n\t\t\tTextOrRecordInput: true,\n\t\t\tcansend: value.length > 0,\n\t\t\tmic: this.state.type === 'mic',\n\t\t\ttext: this.state.type === 'text'\n\t\t});\n\t}\n\n\twarnText() {\n\t\tif ( !window.navigator.getUserMedia && \n\t\t\t (!window.navigator.mediaDevices ||\n\t\t\t !window.navigator.mediaDevices.getUserMedia) &&\n\t\t\t window.location.protocol === 'http:')\n\t\t\treturn \"Can't access microphone through http:// protocol (use https)\";\n\t\treturn \"Your browser doesn't support microphone recording.\";\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"TextOrRecordInputWrapper\">\n\t\t\t\t{\n\t\t\t\t\t!this.audioSupported ?\n\t\t\t\t\t<div className=\"warning\">\n\t\t\t\t\t\t<WarnPic />\n\t\t\t\t\t\t{this.warnText()}\n\t\t\t\t\t</div> : null\n\t\t\t\t}\n\t\t\t\t<div className={classes({\n\t\t\t\t\t\tTextOrRecordInput: true,\n\t\t\t\t\t\tcansend: this.inputDone(),\n\t\t\t\t\t\tmic: this.state.type === 'mic',\n\t\t\t\t\t\ttext: this.state.type === 'text'\n\t\t\t\t\t})}\n\t\t\t\t\tref={this.inputDivRef}>\n\t\t\t\t\t<div className=\"input-wrapper\">\n\t\t\t\t\t\t<input \n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tplaceholder=\"Write lyrics here or press mic...\"\n\t\t\t\t\t\t\tref={this.inputRef}\n\t\t\t\t\t\t\tonChange={this.onInputChange.bind(this)}\n\t\t\t\t\t\t\tonKeyPress={this.onInputChange.bind(this)}\n\t\t\t\t\t\t\tonKeyUp={this.onInputChange.bind(this)} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={\"status \"+this.state.statusClass} ref={this.statusRef}>{this.state.status}</div>\n\t\t\t\t\t<canvas ref={this.canvasRef}></canvas>\n\t\t\t\t\t<Button \n\t\t\t\t\t\tclassName={\"mic borderless round\" + (!this.audioSupported ? ' hidden' : '')}\n\t\t\t\t\t\tonClick={this.onMicClick.bind(this)}>\n\t\t\t\t\t\t<MicPic />\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tclassName=\"close borderless round\"\n\t\t\t\t\t\tonClick={this.onCloseClick.bind(this)}>\n\t\t\t\t\t\t<ClosePic />\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tclassName=\"send borderless round\"\n\t\t\t\t\t\tonClick={this.send.bind(this)}>\n\t\t\t\t\t\t<SendPic />\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default TextOrRecordInput;","let temp = {};\nconst getters = [\n\t(name) => JSON.parse(localStorage.getItem(name)),\n\t(name) => {\n\t\tlet matches = document.cookie.match(new RegExp(\n\t\t\t\"(?:^|; )\" + name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, '\\\\$1') + \"=([^;]*)\"\n\t\t));\n\t\treturn matches ? JSON.parse(decodeURIComponent(matches[1])) : null;\n\t},\n\t(name) => temp[name]\n];\nconst setters = [\n\t(name, value) => localStorage.setItem(name, JSON.stringify(value)),\n\t(name, value) => document.cookie = encodeURIComponent(name) + '=' + encodeURIComponent(JSON.stringify(value)),\n\t(name, value) => temp[name] = value\n];\n\nconst Storage = {\n\tget: (name, def) => {\n\t\tlet value = null;\n\t\tfor (let i = 0; i < getters.length; ++i) {\n\t\t\tvalue = getters[i](name);\n\t\t\tif (value != null || typeof value !== 'undefined')\n\t\t\t\tbreak;\n\t\t\telse value = null;\n\t\t}\n\t\tif ((value == null || typeof value === 'undefined') && typeof def !== 'undefined') {\n\t\t\tStorage.set(name, def);\n\t\t\treturn def;\n\t\t} else\n\t\t\treturn value;\n\t},\n\tset: (name, value) => {\n\t\tfor (let i = 0; i < setters.length; ++i)\n\t\t\tsetters[i](name, value);\n\t}\n};\nwindow.Storage = Storage;\nexport default Storage;","import Storage from './Storage';\nimport crc32 from 'crc/crc32';\n\nfunction randomString(n) {\n\tif (typeof n !== 'number')\n\t\tn = 16;\n\tconst q = \"1234567890qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM\";\n\treturn Array.from({length: n}, () => q[Math.round(Math.random() * (q.length-1))]).join('');\n}\nfunction queryToStr(obj) {\n\treturn Object.keys(obj).map(key => encodeURIComponent(key) + '=' + encodeURIComponent(obj[key])).join('&');\n}\nfunction cutObject(keys, obj) {\n\tlet nobj = {};\n\tfor (let i = 0, key; i < keys.length; ++i) {\n\t\tkey = keys[i];\n\t\tif (typeof obj[key] === 'undefined')\n\t\t\tnobj[key] = null;\n\t\telse nobj[key] = obj[key];\n\t}\n\treturn nobj;\n}\n\nlet cache = Storage.get('cache', {});\nfunction updCache() {\n\tfor (let key in cache)\n\t\tif (Date.now() - cache[key].t > 1000 * 60 * 60)\n\t\t\tdelete cache[key];\n}\nconst escapeCORS = 'https://cors-anywhere.herokuapp.com/';\nfunction httpCache(method, url, before, callback, isCORS) {\n\tif (arguments.length === 3) {\n\t\tcallback = before;\n\t\tbefore = undefined;\n\t}\n\n\tlet k = crc32(method + ' ' + url).toString(16);\n\tif (cache[k] && typeof cache[k].r !== 'undefined' && cache[k].r !== null && !before) {\n\t\tcallback(true, cache[k].r);\n\t\treturn;\n\t}\n\n\thttp(method, url, before, function (status, res) {\n\t\tif (!before && status) {\n\t\t\tcache[k] = {t: Date.now(), r: res};\n\t\t\tupdCache();\n\t\t\tStorage.set('cache', cache);\n\t\t}\n\n\t\tcallback.apply(this, Array.prototype.slice.apply(arguments));\n\t})\n}\nfunction http(method, url, before, callback, isCORS) {\n\tif (arguments.length === 3) {\n\t\tcallback = before;\n\t\tbefore = undefined;\n\t}\n\n\n\tlet xhr = new XMLHttpRequest();\n\txhr.open(method, url, true);\n\n\txhr.onreadystatechange = () => {\n\t\tif (xhr.readyState !== 4) return;\n\n\t\tif (xhr.status === 200) {\n\t\t\tlet res = xhr.responseText;\n\t\t\ttry {\n\t\t\t\tres = JSON.parse(res);\n\t\t\t} catch (e) {}\n\n\t\t\tcallback(true, res);\n\t\t} else {\n\t\t\tconsole.warn(\"Failed to send HTTP request: bad status code (\" + xhr.status + \")\");\n\t\t\tcallback(false, \"Bad status code: \" + xhr.status);\n\t\t}\n\t}\n\t// xhr.onerror = (err) => {\n\t// \tif (!isCORS)\n\t// \t\thttp(method, escapeCORS + (url), before, callback, true);\n\t// \telse\n\t// \t\tconsole.log(err);\n\t// }\n\n\tif (isCORS) {\n\t\t// xhr.setRequestHeader(\"Origin\", window.location.href);\n\t\txhr.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\n\t}\n\n\tif (typeof before !== 'function')\n\t\txhr.send();\t\n\telse before(xhr);\n}\n\nclass APIController {\n\tconstructor(type, options) {\n\t\tthis.type = type;\n\t\tthis.options = options;\n\t\tthis.session_id = Storage.get('session', randomString(16));\n\t}\n\tendpoint(name) {\n\t\tlet a = APIController.endpoint[this.type];\n\t\tif (typeof a === 'string')\n\t\t\treturn a;\n\t\tif (typeof a === 'object' && typeof name === 'undefined')\n\t\t\treturn a.audd;\n\t\treturn a[name];\n\t}\n\tquery(type, req) {\n\t\tlet obj = {};\n\t\tif (req.type === 'text')\n\t\t\tobj.q = req.value;\n\n\t\tif (type === 'direct') {\n\t\t\tobj.return = 'timecode,lyrics,apple_music,deezer,spotify';\n\t\t\tobj.api_token = this.options.audd_token;\n\t\t} else\n\t\t\tobj.session = this.session_id;\n\t\treturn obj;\n\t}\n\n\tsimulateAnswer(bool) {\n\t\tlet score = Storage.get('score', {computer: 0, human: 0});\n\t\tscore[bool ? 'computer' : 'human']++;\n\t\tStorage.set('score', score);\n\t\treturn score;\n\t}\n\tsimulateScore() {\n\t\treturn Storage.get('score', {computer: 0, human: 0});\n\t}\n\tsimulateAPIServerResponse(obj) {\n\t\treturn new Promise((resolve, reject) => {\n\n\t\t\tlet response = (result) => {\n\t\t\t\tresolve({\n\t\t\t\t\tresult: result,\n\t\t\t\t\tscore: this.simulateScore()\n\t\t\t\t})\n\t\t\t};\n\n\t\t\tif (obj && obj.status !== 'error' && obj.result !== null) {\n\t\t\t\tlet track = obj.result.list ? obj.result.list[0] : obj.result[0];\n\t\t\t\tif (typeof track === 'undefined' || track === null) {\n\t\t\t\t\tresponse(null);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (typeof track.media === 'string')\n\t\t\t\t\ttrack.media = JSON.parse(track.media);\n\t\t\t\tif (track.media)\n\t\t\t\t\ttrack.media = track.media.map(cutObject.bind(this, ['provider', 'url']));\n\n\t\t\t\tlet promises = [\n\t\t\t\t\tthis.geniusSearch(track),\n\t\t\t\t\tthis.deezerSearch(track)\n\t\t\t\t];\n\t\t\t\tPromise.all(promises)\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tresponse(cutObject(['title', 'media', 'artist', 'lyrics', 'cover'], track));\n\t\t\t\t\t});\n\t\t\t} else\n\t\t\t\tresponse(null)\n\t\t});\n\t}\n\n\tputMediaToTrack(track, media) {\n\t\tif (!Array.isArray(track.media))\n\t\t\ttrack.media = [];\n\t\t\n\t\tif (track.media.map(m => m.provider).indexOf(media.provider) < 0)\n\t\t\ttrack.media.push(media);\n\t}\n\tputGeniusData(data, track) {\n\t\tif (data.path) {\n\t\t\tthis.putMediaToTrack(track, {provider: 'genius', url: \"https://genius.com\" + data.path});\n\t\t}\n\t\tif (data.media) {\n\t\t\tfor (let i = 0; i < data.media.length; ++i)\n\t\t\t\tthis.putMediaToTrack(track, data.media[i]);\n\t\t}\n\t\tif (data.song_art_image_url)\n\t\t\ttrack.cover = data.song_art_image_url;\n\t\tif (!track.song_id && data.id)\n\t\t\ttrack.song_id = data.id;\n\t}\n\tprobablyEqual(a, b) {\n\t\tlet len = Math.min(a.length, b.length);\n\t\treturn a.toLowerCase().trim().substring(0, len) === b.toLowerCase().trim().substring(0, len);\n\t}\n\tgeniusSearch(track) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tlet url = this.endpoint('genius');\n\t\t\tif (track.song_id)\n\t\t\t\turl += 'songs/' + track.song_id + '?access_token=' + this.options.genius_token;\n\t\t\telse \n\t\t\t\turl += 'search?' + queryToStr({q: track.artist + ' ' + track.title, access_token: this.options.genius_token});\n\n\t\t\thttp('GET', url,\n\t\t\t\t(status, data) => {\n\t\t\t\t\tif (status && data.response && data.response.hits) {\n\t\t\t\t\t\tlet appropriate = null;\n\t\t\t\t\t\tfor (let i = 0; i < data.response.hits.length; ++i) {\n\t\t\t\t\t\t\tlet hit = data.response.hits[i];\n\t\t\t\t\t\t\tif (hit.result && \n\t\t\t\t\t\t\t\thit.result.title &&\n\t\t\t\t\t\t\t\thit.result.primary_artist.name &&\n\t\t\t\t\t\t\t\tthis.probablyEqual(hit.result.title, track.title) &&\n\t\t\t\t\t\t\t\tthis.probablyEqual(hit.result.primary_artist.name, track.artist)) {\n\t\t\t\t\t\t\t\tappropriate = hit.result;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (appropriate !== null) {\n\t\t\t\t\t\t\tthis.putGeniusData(appropriate, track);\n\t\t\t\t\t\t\tif (track.song_id) {\n\t\t\t\t\t\t\t\tthis.geniusSearch(track)\n\t\t\t\t\t\t\t\t\t.then(resolve)\n\t\t\t\t\t\t\t\t\t.catch(reject);\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (status && data.response && data.response.song) {\n\t\t\t\t\t\tthis.putGeniusData(data.response.song, track);\n\t\t\t\t\t}\n\t\t\t\t\tresolve();\n\t\t\t\t}\n\t\t\t);\n\t\t});\n\t}\n\tdeezerSearch(track) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\thttp('GET', escapeCORS + this.endpoint('deezer') + 'search?' + queryToStr({\n\t\t\t\tq: \"track:\\\"\"+track.title+\"\\\" artist:\\\"\"+track.artist+\"\\\"\",\n\t\t\t\tstrict: \"on\"\n\t\t\t}), (x) => x.send(), (status, data) => {\n\t\t\t\tif (status && data.data && data.data.length > 0) {\n\t\t\t\t\tdata = data.data[0];\n\t\t\t\t\tif (data.link) {\n\t\t\t\t\t\tthis.putMediaToTrack(track, {provider: 'deezer', url: data.link});\n\t\t\t\t\t}\n\n\t\t\t\t\tif (data.album && data.album.cover_big)\n\t\t\t\t\t\ttrack.cover = data.album.cover_big;\n\t\t\t\t\telse if (data.artist && data.artist.picture_big)\n\t\t\t\t\t\ttrack.cover = data.artist.picture_big;\n\t\t\t\t}\n\t\t\t\tresolve();\n\t\t\t}, true);\n\t\t})\n\t}\n\n\n\tsendAnswer(bool) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tif (this.type === 'backend') {\n\t\t\t\thttp('POST', \n\t\t\t\t\t this.endpoint() +\n\t\t\t\t\t APIController.path[this.type][bool]\n\t\t\t\t\t + '?' + queryToStr({session: this.session_id}),\n\t\t\t\t\t (status, data) => {\n\t\t\t\t\t \t(status ? resolve : reject)(data);\n\t\t\t\t\t }\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tresolve(this.simulateAnswer(bool));\n\t\t\t}\n\t\t})\n\t}\n\n\tsend(requestObject) {\n\t\tconsole.log(\"API.send(\", requestObject, \")\")\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tlet url = this.endpoint() + \n\t\t\t\t\t  APIController.path[this.type][requestObject.type] + \n\t\t\t\t\t  '?' + queryToStr(this.query(this.type, requestObject));\n\t\t\tlet xhr = new window.XMLHttpRequest();\n\t\t\txhr.open('POST', url, true);\n\t\t\tlet onResponse = (status, data) => {\n\t\t\t\tif (!status) {\n\t\t\t\t\treject(data);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconsole.log(\"<= \", data);\n\n\t\t\t\tif (this.type === 'direct') {\n\t\t\t\t\tthis.simulateAPIServerResponse(data)\n\t\t\t\t\t\t.then(resolve)\n\t\t\t\t\t\t.catch(reject);\n\t\t\t\t} else\n\t\t\t\t\tresolve(data);\n\t\t\t};\n\n\t\t\tlet func = this.type === 'direct' ? httpCache : http;\n\n\t\t\tif (requestObject.type === 'text' && this.type === 'direct')\n\t\t\t\tfunc('POST', url, onResponse);\n\t\t\telse {\n\t\t\t\tfunc('POST', url, (xhr) => {\n\t\t\t\t\tif (requestObject.type === 'audio') {\n\t\t\t\t\t\tlet data = new window.FormData();\n\t\t\t\t\t\tconsole.log(requestObject)\n\t\t\t\t\t\tdata.append(\"file\", requestObject.value);\n\t\t\t\t\t\twindow.data = data;\n\t\t\t\t\t\txhr.send(data);\n\t\t\t\t\t} else if (requestObject.type === 'text') {\n\t\t\t\t\t\txhr.send();\n\t\t\t\t\t}\n\t\t\t\t}, onResponse);\n\t\t\t}\n\t\t});\n\t}\n}\nAPIController.endpoint = {\n\t'direct': {\n\t\taudd: 'https://api.audd.io/', \n\t\tgenius: 'https://api.genius.com/', \n\t\tdeezer: 'https://api.deezer.com/'\n\t},\n\t'backend': process.env.REACT_APP_API_BACKEND_ENDPOINT\n\t// backend: \"http://localhost:9333/\"\n};\nAPIController.path = {\n\t'direct': {\n\t\t// audd.io\n\t\t'audio': 'recognizeWithOffset/',\n\t\t'text': 'findLyrics/'\n\t},\n\t'backend': {\n\t\t'audio': 'humming',\n\t\t'text': 'lyrics',\n\n\t\t'true': 'right',\n\t\t'false': 'wrong'\n\t}\n};\n\nlet api;\nif (Storage.get('backend'))\n\tapi = new APIController('backend');\nelse\n\tapi = new APIController(process.env.REACT_APP_API_TYPE, {\n\t\taudd_token: process.env.REACT_APP_AUDD_TOKEN,\n\t\tgenius_token: process.env.REACT_APP_GENIUS_TOKEN\n\t});\nwindow.api = api;\nexport default api;","import React from 'react';\n\nimport TextOrRecordInput from '../../Components/TextOrRecordInput/TextOrRecordInput';\nimport { Redirect } from 'react-router-dom';\nimport API from '../../Controllers/APIController';\n\nclass IndexPage extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {};\n\t}\n\n\trender() {\n\t\tif (this.state.redirect) {\n\t\t\tStorage.set('guess-state', this.state.redirect);\n\t\t\treturn <Redirect to={{\n\t\t\t\tpathname: '/guess',\n\t\t\t\tstate: this.state.redirect\n\t\t\t}} />;\n\t\t}\n\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<p>Akinator tries to recognize and guess what song you are trying to find. You are welcome to type lyrics or hum song's rythm in microphone.</p>\n\t\t\t\t<TextOrRecordInput onSelect={(input) => {\n\t\t\t\t\tthis.setState({redirect: {\n\t\t\t\t\t\tinput\n\t\t\t\t\t}});\n\t\t\t\t}} />\n\t\t\t\t<br />\n\t\t\t\t<p><b>How does this work?</b></p>\n\t\t\t\t<p>We use these APIs:</p>\n\t\t\t\t<ul>\n\t\t\t\t\t<li><a href=\"https://audd.io/\">audd.io</a> — for recognition and track's search</li>\n\t\t\t\t\t<li><a href=\"https://docs.genius.com/\">Genius API</a> — for obtaining more info about songs</li>\n\t\t\t\t\t<li><a href=\"https://developers.deezer.com/api\">Deezer API</a> — also for obtaining song's info (not so accurate)</li>\n\t\t\t\t</ul>\n\t\t\t\t<p>Website also tries to add widgets from following social medias: <b>YouTube</b>, <b>Deezer</b>, <b>Spotify</b>, <b>Soundcloud</b>.</p>\n\t\t\t\t<p>\n\t\t\t\t\tNow this website is based on\n\t\t\t\t\t{\n\t\t\t\t\t\tAPI.type === 'direct' ?\n\t\t\t\t\t\t<span> <b>its own</b>. (sends requests directly to API and simulates backend logic)</span> : \n\t\t\t\t\t\t<span> <b>server</b>. (sends requests to backend server)</span>\n\t\t\t\t\t}\n\t\t\t\t</p>\n\t\t\t\t<p>Made by:</p>\n\t\t\t\t<ul>\n\t\t\t\t\t<li><b><a className=\"dev\" href=\"https://dkaraush.me\">Dmitriy Karaush</a></b> — <a href=\"https://github.com/dkaraush/musical-akinator\">frontend</a> made with React.</li>\n\t\t\t\t\t<li><b><a className=\"dev\" href=\"https://t.me/thejunglegiant\">Oleksii Morozov</a></b> — <a href=\"https://github.com/thejunglegiant/backend-akinator\">backend</a>.</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t);\t\n\t}\n}\nexport default IndexPage;","import React from 'react';\nimport './Loading.css';\n\nfunction classes(obj) {\n\tlet res = [];\n\tfor (let key in obj)\n\t\tif (obj[key])\n\t\t\tres.push(key)\n\treturn res.join(' ');\n}\n\nexport default function (props) {\n\treturn <div className={classes({\n\t\tloading: true,\n\t\tinline: props.inline\n\t})}></div>\n}","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z\"\n});\n\nvar SvgMusic = function SvgMusic(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgMusic, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/music.03ec63b4.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react';\nimport './MediaLink.css';\n\nfunction capitilize(str) {\n\tstr = str.replace(/_/g, ' ');\n\tstr = str.trim();\n\treturn str.slice(0, 1).toUpperCase() + str.slice(1);\n}\n\nclass MediaLink extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.social = props.social;\n\t\tthis.link = props.link || props.href;\n\t\tthis.img = false;\n\t\tif ((['apple_music', 'spotify', 'genius', 'soundcloud', 'youtube', 'deezer']).indexOf(props.social) >= 0)\n\t\t\tthis.img = true;\n\t\t\n\t\tthis.state = {size: props.size === 'big' ? (window.innerWidth < 700 ? 'small' : 'big') : props.size || 'small'};\n\t\tthis.onResize = this.resize.bind(this);\n\t}\n\n\tcomponentDidMount() {\n\t\tif (this.props.size === 'big')\n\t\t\twindow.addEventListener('resize', this.onResize);\n\t}\n\n\tcomponentWillMount() {\n\t\tif (this.props.size === 'big')\n\t\t\twindow.removeEventListener('resize', this.onResize);\n\t}\n\t\t\n\tresize() {\n\t\tlet newSize = (window.innerWidth < 700 ? 'small' : 'big');\n\t\tif (newSize != this.state.size)\n\t\t\tthis.setState({size: newSize});\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<a className={\"media-link \" + this.state.size} href={this.link} title={capitilize(this.social)} target=\"_blank\">\n\t\t\t\t{this.img ? \n\t\t\t\t\t<div style={{backgroundImage: 'url(/social/'+this.state.size+\"/\"+this.social+\".svg)\"}} /> : \n\t\t\t\t\tcapitilize(this.social)\n\t\t\t\t}\n\t\t\t</a>\n\t\t);\n\t}\n}\n\nexport default MediaLink;","import React from 'react';\n\nimport './Widgets.css';\n\nconst widgets = {\n\t'youtube': (media) => {\n\t\tlet id = media.url.match(/^(?:https?\\:)?(?:\\/\\/)?(?:www\\.)?youtu\\.?be(?:\\.com)?\\/(?:watch\\?v=)?([A-Za-z0-9_-]{11})/);\n\t\tif (id === null || id.length < 1)\n\t\t\treturn null;\n\t\tid = id[1];\n\t\treturn <iframe\n\t\t\t\t\tkey=\"youtube\"\n\t\t\t\t\ttype=\"text/html\"\n\t\t\t\t\tclassName=\"youtube-widget\"\n  \t\t\t\t\tsrc={\"https://www.youtube.com/embed/\"+id+\"?enablejsapi=1\"}\n  \t\t\t\t\tframeBorder=\"0\"></iframe>;\n\t},\n\t'deezer': (media) => {\n\t\tlet id = media.url.match(/^(?:https?\\:)?(?:\\/\\/)?(?:www\\.)?deezer\\.com\\/track\\/(\\d+)(?:\\?.+)?(?:\\#.+)?$/);\n\t\tconsole.log(id);\n\t\tif (id === null || id.length < 1)\n\t\t\treturn null;\n\t\tid = id[1];\n\n\t\treturn <iframe\n\t\t\t\t\tkey=\"deezer\"\n\t\t\t\t\tclassName=\"deezer-widget\"\n\t\t\t\t\tscrolling=\"no\"\n\t\t\t\t\tframeBorder=\"0\"\n\t\t\t\t\tallowtransparency=\"true\"\n\t\t\t\t\tsrc={\"https://www.deezer.com/plugins/player?format=classic&autoplay=false&playlist=true&width=700&height=350&color=E08000&layout=&size=medium&type=tracks&app_id=1&id=\"+id} \n\t\t\t\t\twidth=\"100%\" \n\t\t\t\t\theight=\"95\"></iframe>;\n\t},\n\t'soundcloud': (media) => {\n\t\treturn <iframe\n\t\t\t\t\tkey=\"soundcloud\"\n\t\t\t\t\tclassName=\"soundcloud-widget\"\n\t\t\t\t\twidth=\"100%\"\n\t\t\t\t\theight=\"166\"\n\t\t\t\t\tscrolling=\"no\"\n\t\t\t\t\tframeBorder=\"no\" \n\t\t\t\t\tallow=\"autoplay\"\n\t\t\t\t  \tsrc={\"https://w.soundcloud.com/player/?url=\" + encodeURIComponent(media.url)}>\n\t\t\t\t</iframe>;\n\t},\n\t'spotify': (media) => {\n\t\treturn <iframe\n\t\t\t\t\tkey=\"spotify\"\n\t\t\t\t\tclassName=\"spotify-widget\"\n\t\t\t\t\twidth=\"100%\"\n\t\t\t\t\theight=\"300\"\n\t\t\t\t\tscrolling=\"no\"\n\t\t\t\t\tframeBorder=\"0\"\n\t\t\t\t\tallowtransparency=\"true\"\n\t\t\t\t\tsrc={\"https://open.spotify.com/embed?uri=\" + encodeURIComponent(media.url)}>\n\t\t\t\t</iframe>;\n\t}\n};\n\nexport default function (props) {\n\tlet track = props.track || props.data;\n\tlet multiple = props.multiple || false;\n\n\tif (track.media === null || track.media.length === 0)\n\t\treturn null;\n\n\tlet result = [];\n\tfor (let social in widgets) {\n\t\tfor (let i = 0; i < track.media.length; ++i) {\n\t\t\tif (social === track.media[i].provider) {\n\t\t\t\tlet widget = widgets[social](track.media[i]);\n\t\t\t\tif (widget !== null) {\n\t\t\t\t\tif (!multiple)\n\t\t\t\t\t\treturn widget;\n\t\t\t\t\tresult.push(widget);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\treturn result;\n}","import React from 'react';\n\nimport { ReactComponent as MusicPic } from '../../CommonAssets/music.svg';\nimport MediaLink from '../MediaLink/MediaLink';\nimport Widgets from \"../Widgets/Widgets\";\n\nimport './TrackBig.css';\n\nfunction highlightText(text, q) {\n\tif (q == null)\n\t\treturn text;\n\n\tlet lowercaseText = text.toLowerCase();\n\tq = q.toLowerCase().trim();\n\tlet words = q.split(/ /g);\n\n\tlet highlights = [];\n\n\tlet x = 0;\n\tlet minIndex, wordId = -1;\n\tdo {\n\t\tminIndex = -1;\n\t\twordId = -1;\n\t\tfor (let i = 0; i < words.length; ++i) {\n\t\t\tlet index = lowercaseText.indexOf(words[i], x);\n\t\t\tif (index == -1)\n\t\t\t\tcontinue;\n\t\t\tif (minIndex > index || minIndex == -1) {\n\t\t\t\tminIndex = index;\n\t\t\t\twordId = i;\n\t\t\t}\n\t\t}\n\t\tif (wordId == -1 || minIndex == -1) \n\t\t\tbreak;\n\n\t\thighlights.push([minIndex, minIndex + words[wordId].length]);\n\t\tx = minIndex + words[wordId].length + 1;\n\t} while (minIndex != -1);\n\n\tif (highlights.length == 0)\n\t\treturn text;\n\n\t// merge nearby highlights\n\tfor (let i = 0; i < highlights.length - 1; ++i) {\n\t\tlet a = highlights[i],\n\t\t\tb = highlights[i+1];\n\t\tif (a[1] == b[0]) {\n\t\t\thighlights[i][1] = b[1];\n\t\t\thighlights.splice(i+1, 1);\n\t\t\ti--;\n\t\t}\n\t}\n\n\tlet arr = [];\n\tx = 0;\n\tfor (let i = 0, j = 0; i < highlights.length; ++i) {\n\t\tlet h = highlights[i];\n\t\tif (h[0] > x) {\n\t\t\tarr.push(text.substring(x, h[0]));\n\t\t\tx = h[0];\n\t\t}\n\t\tarr.push(<span className=\"highlight\" key={++j}>{text.substring(h[0], h[1])}</span>);\n\t\tx = h[1];\n\t}\n\tif (x < text.length)\n\t\tarr.push(text.substring(x));\n\treturn arr;\n}\n\nexport default function (props) {\n\tlet track = props.data || props.track;\n\tlet q = props.q || null;\n\n\tlet medias = (track.media || []).map(social => {\n\t\treturn <MediaLink \n\t\t\t\t\thref={social.url||social.uri}\n\t\t\t\t\tsocial={social.provider}\n\t\t\t\t\tkey={social.provider}\n\t\t\t\t\tsize=\"big\" />\n\t});\n\n\treturn (\n\t\t<div className=\"track-wrapper\">\n\t\t\t<div className=\"track-big\">\n\t\t\t\t<div className=\"cover-wrapper\">\n\t\t\t\t\t<div className=\"cover\">\n\t\t\t\t\t\t<div className=\"bg\">\n\t\t\t\t\t\t\t<MusicPic />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{track.cover ? <div className=\"cover-img\" style={{backgroundImage: 'url('+track.cover+')'}} /> : null}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"info\">\n\t\t\t\t\t<div className=\"meta\">\n\t\t\t\t\t\t<h1>{highlightText(track.title, q)}</h1>\n\t\t\t\t\t\t<h2>{highlightText(track.artist, q)}</h2>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"media\">\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t{ medias }\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<Widgets track={track} />\n\t\t\t{ track.lyrics !== null && typeof track.lyrics !== 'undefined' && track.lyrics.length > 0 ?\n\t\t\t\t<div className=\"lyrics\">\n\t\t\t\t\t<span className=\"header\">Lyrics</span>\n\t\t\t\t\t<span>{highlightText(track.lyrics, q)}</span>\n\t\t\t\t</div>\n\t\t\t\t: null \n\t\t\t}\n\t\t</div>\n\t);\n}","import React from 'react';\n\nimport { ReactComponent as MusicPic } from '../../CommonAssets/music.svg';\nimport MediaLink from '../MediaLink/MediaLink';\nimport './TrackSmall.css';\n\nexport default function (props) {\n\tlet track = props.track || props.data || {};\n\n\tlet medias = (track.media || []).sort().map(social => {\n\t\treturn <MediaLink \n\t\t\t\t\thref={social.url||social.uri}\n\t\t\t\t\tsocial={social.provider}\n\t\t\t\t\tkey={social.provider}\n\t\t\t\t\tsize=\"small\" />\n\t});\n\n\treturn (\n\t\t<div className=\"track-small\">\n\t\t\t<div className=\"cover\">\n\t\t\t\t<div className=\"blank\">\n\t\t\t\t\t<MusicPic />\n\t\t\t\t</div>\n\t\t\t\t<div className=\"img\" style={{backgroundImage: 'url(' + track.cover + ')'}} />\n\t\t\t</div>\n\t\t\t<div className=\"info\">\n\t\t\t\t<span>\n\t\t\t\t\t<h1>{track.title}</h1>\n\t\t\t\t\t<h2>{track.artist}</h2>\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t\t<div className=\"media\">\n\t\t\t\t<span>\n\t\t\t\t\t{ medias }\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t</div>\n\t)\n}","import React from 'react';\nimport './Score.css';\n\nfunction capitilize(str) {\n\tstr = str.replace(/_/g, ' ');\n\tstr = str.trim();\n\treturn str.slice(0, 1).toUpperCase() + str.slice(1);\n}\n\nexport default function (props) {\n\tlet score = props.score || {};\n\n\tlet elements = [];\n\tlet players = Object.keys(score);\n\tfor (let i = 0, x = 0; i < players.length; ++i) {\n\t\telements.push(\n\t\t\t<span key={++x} className=\"player\">\n\t\t\t\t<span className=\"name\">\n\t\t\t\t\t{capitilize(players[i])}\n\t\t\t\t</span>\n\t\t\t\t<span className=\"value\">\n\t\t\t\t\t{score[players[i]]}\n\t\t\t\t</span>\n\t\t\t</span>\n\t\t);\n\n\t\tif (players.length - 1 !== i) {\n\t\t\telements.push(<span key={++x} className=\"separator\">:</span>);\n\t\t}\n\t}\n\treturn <div className=\"score\"><div>{elements}</div></div>;\n}","import Storage from './Storage';\nimport crc32 from 'crc/crc32';\n\nconst MAX_COUNT = 5;\n\nclass LastTracks {\n\tconstructor() {\n\t\tthis.data = Storage.get(\"last-data\", {});\n\t\tthis.list = Storage.get(\"last-list\", []);\n\n\t\tthis.clean();\n\t}\n\n\tcalcHash(track) {\n\t\treturn crc32(JSON.stringify(track));\n\t}\n\n\tpush(track) {\n\t\tif (track.lyrics) {\n\t\t\ttrack = Object.assign({}, track); // clone object\n\t\t\tdelete track.lyrics;\n\t\t}\n\n\t\tlet hash = this.calcHash(track).toString(16), index;\n\t\tif ((index = this.list.indexOf(hash)) >= 0) {\n\t\t\tthis.list.splice(index, 1);\n\t\t\tthis.list.push(hash);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.data[hash] = track;\n\t\tthis.list.push(hash);\n\t\tthis.clean();\n\t\tthis.save();\n\t}\n\n\tclean() {\n\t\tif (this.list.length > MAX_COUNT)\n\t\t\tthis.list.splice(0, this.list.length - MAX_COUNT);\n\t\tfor (let hash in this.data) {\n\t\t\tif (this.list.indexOf(hash) < 0) {\n\t\t\t\tdelete this.data[hash];\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t}\n\t\tfor (let i = 0; i < this.list.length; ++i) {\n\t\t\tif (typeof this.data[this.list[i]] === 'undefined') {\n\t\t\t\tthis.list.splice(i, 1);\n\t\t\t\ti--;\n\t\t\t}\n\t\t}\n\t}\n\n\tsave() {\n\t\tStorage.set('last-data', this.data);\n\t\tStorage.set('last-list', this.list);\n\t}\n\n\tlength() {\n\t\treturn Math.max(this.list.length, MAX_COUNT);\n\t}\n\n\tgetData() {\n\t\treturn this.list.slice().reverse().map(hash => this.data[hash]);\n\t}\n}\n\nexport default new LastTracks();","import React from 'react';\n\nimport { Redirect } from 'react-router-dom';\n\nimport TextOrRecordInput from '../../Components/TextOrRecordInput/TextOrRecordInput';\nimport Loading from '../../Components/Loading/Loading';\nimport Button from '../../Components/Button/Button';\nimport TrackBig from '../../Components/TrackBig/TrackBig';\nimport TrackSmall from '../../Components/TrackSmall/TrackSmall';\nimport Score from './Score';\n\nimport API from '../../Controllers/APIController';\nimport LastTracks from '../../Controllers/LastTracks';\n\nimport './GuessPage.css';\n\nclass GuessPage extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.pushState = this._setState.bind(this, false);\n\t\tthis.state = {};\n\t\tlet storageState = Storage.get('guess-state');\n\n\t\tthis.pushState(this.props.location.state);\n\n\t\tif (storageState) {\n\t\t\tthis.pushState(storageState);\n\t\t}\n\n\t\tlet input = null;\n\t\tif (this.state.input && this.state.input.type === 'text')\n\t\t\tinput = this.state.input;\n\t\tif (this.props.location.state && this.props.location.state.input)\n\t\t\tinput = this.props.location.state.input;\n\n\t\tif (!this.state.loaded && input)\n\t\t\tthis.init(false, input);\n\n\n\t\tthis.lastTracks = LastTracks.getData();\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.pushState = this._setState.bind(this, true);\n\t}\n\n\t_setState(mounted, newState) {\n\t\t// console.log('pushState(', newState, ')', '\\n', new Error().stack.split('\\n').slice(1).join('\\n'))\n\t\tif (mounted)\n\t\t\tthis.setState(newState||{});\n\t\telse this.state = Object.assign(this.state||{}, newState||{});\n\t\t// console.log('state = ', this.state);\n\n\t\tlet toSave = Object.assign({}, Object.assign(this.state||{}, newState||{}));\n\t\tif (toSave)\n\t\t\tdelete toSave.input;\n\t\tStorage.set('guess-state', toSave);\n\t\t// console.log('toSave: ', toSave);\n\t}\n\n\tinit(newRequest, input) {\n\t\tthis.props.location.state = input;\n\n\t\tlet newState = {};\n\t\tif (input.type === 'text') \n\t\t\tnewState.q = input.value;\n\t\tnewState.loading = true;\n\t\tthis.pushState(newState);\n\n\t\tAPI.send(input)\n\t\t   .then((res) => {\n\t\t\t\tthis.lastTracks = LastTracks.getData();\n\t\t   \t\tif (res.result == null) {\n\t\t   \t\t\tthis.vote(false, true);\n\t\t   \t\t\tthis.pushState({voted: true});\n\t\t   \t\t} else if (newRequest)\n\t\t   \t\t\tthis.pushState({voted: false});\n\n\t\t   \t\tthis.pushState({\n\t\t   \t\t\tloading: false,\n\t\t   \t\t\tloaded: true,\n\t\t   \t\t\ttrack: res.result,\n\t\t   \t\t\tscore: res.score\n\t\t   \t\t}, true);\n\t\t   })\n\t\t   .catch((error) => {\n\t\t   \t\tthis.pushState({loading: false, error: error});\n\t\t   })\n\t}\n\n\tvote(bool, strict) {\n\t\tif (!strict && this.state.voted)\n\t\t\treturn;\n\n\t\tif (bool)\n\t\t\tLastTracks.push(this.state.track);\n\n\t\tthis.pushState({voted: true});\n\t\tAPI.sendAnswer(bool)\n\t\t    .then((newScore) => {\n\t\t    \tthis.pushState({score: newScore})\n\t\t    });\n\t}\n\n\trender() {\n\t\tif (this.props.location.state === null ||\n\t\t\ttypeof this.props.location.state === 'undefined') {\n\t\t\treturn <Redirect to='/' />;\n\t\t}\n\n\t\tif (this.state.loading)\n\t\t\treturn <div>\n\t\t\t\t\t<p className=\"center\">Searching your track...</p>\n\t\t\t\t\t<Loading />\n\t\t\t\t   </div>;\n\t\tconsole.log(LastTracks)\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<div className={\"voting\" + (this.state.voted || !this.state.track ? ' voted' : '')}>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<Score score={this.state.score} />\n\t\t\t\t\t\t<p>What about next song?</p>\n\t\t\t\t\t\t<TextOrRecordInput onSelect={this.init.bind(this, true)} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<p>Is it {this.state.track ? <span><b>{this.state.track.artist} — {this.state.track.title}</b></span> : null}?</p>\n\t\t\t\t\t\t<div className=\"buttons\">\n\t\t\t\t\t\t\t<Button invert onClick={this.vote.bind(this, true)}>Right!</Button>\n\t\t\t\t\t\t\t<Button onClick={this.vote.bind(this, false)}>No...</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t{!this.state.track ? \n\t\t\t\t\t<div>\n\t\t\t\t\t\t<p className=\"center\">Unfortunately, we didn't find any track. You won this round.</p>\n\t\t\t\t\t</div> : null\n\t\t\t\t}\n\t\t\t\t<div className={\"last\" + (this.state.voted && this.state.loaded && this.lastTracks.length > 0 ? ' visible' : '')}>\n\t\t\t\t\t<p><b>Last correctly guessed tracks:</b></p>\n\t\t\t\t\t{this.state.voted && this.state.loaded ? \n\t\t\t\t\t\tthis.lastTracks.map((track, i) => <TrackSmall track={track} key={i} /> )\n\t\t\t\t\t\t: null\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t\t{this.state.track ? \n\t\t\t\t\t<TrackBig track={this.state.track} q={this.state.q} /> : null\n\t\t\t\t}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default GuessPage;","import React from 'react';\n\nexport default function () {\n\treturn (\n\t\t<div>\n\t\t\t<p>404!</p>\n\t\t</div>\n\t);\n}","import React from 'react';\n\nimport { BrowserRouter as Router } from \"react-router-dom\";\nimport { Switch, Route, Link, withRouter } from \"react-router-dom\";\nimport { TransitionGroup, CSSTransition } from \"react-transition-group\";\n\nimport Button from './Components/Button/Button';\n\nimport { ReactComponent as BackPic } from \"./back.svg\";\n\nimport IndexPage from './Pages/IndexPage/IndexPage';\nimport GuessPage from './Pages/GuessPage/GuessPage';\nimport _404Page from './Pages/404Page/404Page';\n\nimport './App.css';\n\n// for header animation\nfunction updHeaderClassName() {\n\tdocument.querySelector(\"#header\").className = window.location.pathname == '/' ? 'index' : '';\n}\n\nclass Content extends React.Component {\n\tcomponentWillMount() {\n\t\tthis.unlisten = this.props.history.listen((location, action) => {\n\t\t\tupdHeaderClassName();\n\t\t});\n\t}\n\tcomponentWillUnmount() {\n\t\tthis.unlisten();\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<div id=\"content\">\n\t\t\t\t<TransitionGroup className=\"transition-group\">\n\t\t\t\t\t<CSSTransition\n\t\t\t          key={this.props.location.key}\n\t\t\t          timeout={{ enter: 150, exit: 150 }}\n\t\t\t          classNames=\"fade\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<section className=\"route-section\">\n\t\t\t\t\t\t\t<Switch location={this.props.location}>\n\t\t\t\t\t\t\t\t<Route path=\"/\" exact component={IndexPage} />\n\t\t\t\t\t\t\t\t<Route path=\"/guess/\" component={GuessPage} />\n\t\t\t\t\t\t\t\t<Route component={_404Page} />\n\t\t\t\t\t\t\t</Switch>\n\t\t\t\t\t\t</section>\n\t\t\t\t\t</CSSTransition>\n\t\t\t\t</TransitionGroup>\n\t\t\t</div>\n\t\t);\n\t}\n}\nconst ContentComponent = withRouter(Content);\n\nexport default function () {\n\treturn (\n\t\t<div id=\"container\">\n\t\t\t<Router>\n\t\t\t\t<Link \n\t\t\t\t\tid=\"header\" \n\t\t\t\t\tclassName={window.location.pathname == '/' ? 'index' : ''}\n\t\t\t\t\tto=\"/\">\n\t\t\t\t\t<Button round className=\"borderless\" to=\"/\">\n\t\t\t\t\t\t<BackPic />\n\t\t\t\t\t</Button>\n\t\t\t\t\t<h1>Musical Akinator</h1>\n\t\t\t\t</Link>\n\t\t\t\t<ContentComponent />\n\t\t\t</Router>\n\t\t</div>\n\t);\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n\t<App />,\n\tdocument.getElementById('root')\n);"],"sourceRoot":""}