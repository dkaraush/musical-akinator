{"version":3,"sources":["Components/Button/Button.jsx","back.svg","Components/TextOrRecordInput/mic.svg","Components/TextOrRecordInput/close.svg","Components/TextOrRecordInput/send.svg","Components/TextOrRecordInput/warn.svg","Components/TextOrRecordInput/TextOrRecordInput.jsx","Pages/IndexPage/IndexPage.jsx","Components/Loading/Loading.jsx","Components/TrackBig/music.svg","Components/MediaLink/MediaLink.jsx","Components/Widget/Widget.jsx","Components/TrackBig/TrackBig.jsx","Pages/GuessPage/Score.jsx","Controllers/Storage.js","Controllers/APIController.js","Pages/GuessPage/GuessPage.jsx","Pages/404Page/404Page.jsx","App.jsx","index.js"],"names":["Button","props","enterHandler","onEnter","bind","state","disabled","element","event","this","rect","getBoundingClientRect","x","clientX","left","y","clientY","top","R","Math","max","sqrt","pow","width","height","ripple","document","createElement","className","style","position","transition","borderRadius","opacity","id","Date","now","setTimeout","append","ripples","querySelectorAll","i","start","parseInt","substring","remove","length","ReactDOM","findDOMNode","overflow","down","_down","up","_up","addEventListener","body","enter","window","removeEventListener","nextProps","setState","keyCode","ctrlKey","metaKey","onClick","to","location","href","invert","redirect","children","React","Component","_extends","Object","assign","target","arguments","source","key","prototype","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_ref2","d","fill","_ref3","_ref","svgRef","title","viewBox","ref","ForwardRef","forwardRef","LinkedList","tail","val","next","classes","obj","filter","join","TextOrRecordInput","canvasRendering","audioSupported","MediaRecorder","context","stream","processor","analyser","recorder","chunks","recordingStart","volumes","volumeMax","inputDivRef","createRef","statusRef","canvasRef","inputRef","type","status","statusClass","onResize","resizeCanvas","onKeyPress","catchEnter","callback","onSelect","root","current","canvas","clientWidth","devicePixelRatio","clientHeight","renderCanvas","loop","ctx","getContext","requestAnimationFrame","W","H","clearRect","calculateCoordinates","node","w","h","timestamp","volume","beginPath","moveTo","lineTo","first","last","coordinates","closePath","lineWidth","lineCap","strokeStyle","fillStyle","stroke","navigator","mediaDevices","getUserMedia","audio","video","then","AudioContext","webkitAudioContext","ondataavailable","e","push","data","createAnalyser","createMediaStreamSource","createScriptProcessor","connect","destination","durationString","onaudioprocess","MAX_RECORD_LENGTH","stopStream","fftSize","bufferLength","frequencyBinCount","dataArray","Uint8Array","getByteFrequencyData","sum","innerHTML","startCanvasRendering","catch","err","console","error","send","onstop","blob","Blob","mimeType","value","stop","stopCanvasRendering","getTracks","forEach","track","millis","sec","floor","min","addZeros","str","n","repeat","updClassName","trim","inputDone","input","inputDiv","cansend","mic","text","placeholder","onChange","onInputChange","onKeyUp","onMicClick","onCloseClick","IndexPage","pathname","res","loading","inline","img","social","size","link","backgroundImage","replace","slice","toUpperCase","available","media","url","match","src","frameborder","scrolling","allowTransparency","provider","widget","highlightText","q","minIndex","lowercaseText","toLowerCase","words","split","highlights","wordId","index","a","b","splice","arr","medias","map","uri","cover","artist","lyrics","score","elements","players","temp","getters","name","JSON","parse","localStorage","getItem","matches","cookie","RegExp","decodeURIComponent","setters","setItem","stringify","encodeURIComponent","Storage","get","def","set","queryToStr","cutObject","nobj","cache","updCache","t","http","method","before","isCORS","undefined","k","crc32","toString","log","xhr","XMLHttpRequest","open","onreadystatechange","readyState","responseText","r","warn","setRequestHeader","api","APIController","options","session_id","Array","from","round","random","randomString","endpoint","audd","req","return","api_token","audd_token","session","bool","computer","human","Promise","resolve","reject","response","result","simulateScore","list","promises","geniusSearch","deezerSearch","all","isArray","m","path","putMediaToTrack","song_art_image_url","song_id","len","genius_token","access_token","hits","appropriate","hit","primary_artist","probablyEqual","putGeniusData","song","strict","album","cover_big","picture_big","simulateAnswer","requestObject","query","onResponse","simulateAPIServerResponse","FormData","genius","deezer","process","hash","GuessPage","voted","API","vote","sendAnswer","newScore","Content","unlisten","history","listen","action","querySelector","TransitionGroup","CSSTransition","timeout","exit","classNames","exact","component","_404Page","ContentComponent","withRouter","render","getElementById"],"mappings":"4dA2HeA,G,kBAtHd,WAAYC,GAAQ,IAAD,8BAClB,4CAAMA,KAEDC,aAAe,EAAKC,QAAQC,KAAb,gBACpB,EAAKC,MAAQ,CACZC,SAAUL,EAAMK,UALC,E,mEASbC,EAASC,GACd,IAAIC,KAAKJ,MAAMC,SAAf,CAEA,IAAII,EAAOH,EAAQI,wBACfC,EAAKJ,EAAMK,QAAUH,EAAKI,KAAOC,EAAKP,EAAMQ,QAAUN,EAAKO,IAC3DC,EAAIC,KAAKC,IACVD,KAAKE,KAAKF,KAAKG,IAAIV,EAAG,GAAKO,KAAKG,IAAIP,EAAG,IACvCI,KAAKE,KAAKF,KAAKG,IAAIV,EAAEF,EAAKa,MAAO,GAAKJ,KAAKG,IAAIP,EAAG,IAClDI,KAAKE,KAAKF,KAAKG,IAAIV,EAAG,GAAKO,KAAKG,IAAIP,EAAEL,EAAKc,OAAQ,IACnDL,KAAKE,KAAKF,KAAKG,IAAIV,EAAEF,EAAKa,MAAO,GAAKJ,KAAKG,IAAIP,EAAEL,EAAKc,OAAQ,KAG7DC,EAASC,SAASC,cAAc,OACpCF,EAAOG,UAAY,SACnBH,EAAOI,MAAMC,SAAW,WACxBL,EAAOI,MAAME,WAAa,gDAC1BN,EAAOI,MAAMG,aAAe,MAC5BP,EAAOI,MAAMI,QAAU,IACvBR,EAAOI,MAAMZ,IAAMF,EAAI,KACvBU,EAAOI,MAAMf,KAAOF,EAAI,KACxBa,EAAOI,MAAMN,MAAQE,EAAOI,MAAML,OAAS,MAC3CC,EAAOS,GAAK,IAAMC,KAAKC,MACvBC,YAAW,WACVZ,EAAOI,MAAMI,QAAU,OACvBR,EAAOI,MAAMZ,IAAOF,EAAEG,EAAK,KAC3BO,EAAOI,MAAMf,KAAQF,EAAEM,EAAK,KAC5BO,EAAOI,MAAMN,MAAQE,EAAOI,MAAML,OAAW,EAAFN,EAAM,OAC/C,IAEHX,EAAQ+B,OAAOb,M,0BAEZlB,EAASC,GACZ,IAAI+B,EAAUhC,EAAQiC,iBAAiB,WACvC,GAAe,MAAXD,EAGJ,IALmB,eAKVE,GACR,IAAIhB,EAASc,EAAQE,GACjBC,EAAQC,SAASlB,EAAOS,GAAGU,UAAU,IACrCT,KAAKC,MAAQM,EAAQ,KACxBjB,EAAOI,MAAMI,QAAU,IACvBI,WAAWZ,EAAOoB,OAAOzC,KAAKqB,GAAS,MAEvCY,YAAW,WACVZ,EAAOI,MAAMI,QAAU,IACvBI,WAAWZ,EAAOoB,OAAOzC,KAAKqB,GAAS,OACrC,KAAOU,KAAKC,MAAQM,KAVhBD,EAAI,EAAGA,EAAIF,EAAQO,SAAUL,EAAI,EAAjCA,K,0CAgBT,IAAIlC,EAAUwC,IAASC,YAAYvC,MACnCF,EAAQsB,MAAMC,SAAW,WACzBvB,EAAQsB,MAAMoB,SAAW,SAEzBxC,KAAKyC,KAAOzC,KAAK0C,MAAM/C,KAAKK,KAAMF,GAClCE,KAAK2C,GAAK3C,KAAK4C,IAAIjD,KAAKK,KAAMF,GAC9BA,EAAQ+C,iBAAiB,YAAa7C,KAAKyC,MAC3CxB,SAAS6B,KAAKD,iBAAiB,UAAW7C,KAAK2C,M,2CAG3C3C,KAAKR,MAAMuD,OACdC,OAAOH,iBAAiB,QAAS7C,KAAKP,gB,6CAGnCO,KAAKR,MAAMuD,OACdC,OAAOC,oBAAoB,QAASjD,KAAKP,cAE1CwB,SAAS6B,KAAKG,oBAAoB,UAAWjD,KAAK2C,M,gDAEzBO,GACrBA,EAAUrD,WAAaG,KAAKJ,MAAMC,UACrCG,KAAKmD,SAAS,CAAEtD,SAAUqD,EAAUrD,a,8BAE9BE,GACe,KAAlBA,EAAMqD,SAAmBrD,EAAMsD,SAAYtD,EAAMuD,SAClB,oBAAvBtD,KAAKR,MAAM+D,SAA2BvD,KAAKR,MAAMK,UAC3DG,KAAKR,MAAM+D,Y,+BAILC,GACJxD,KAAKR,MAAMK,WAEfmD,OAAOS,SAASC,KAAOF,K,+BAIvB,IAAIrC,EAAYnB,KAAKR,MAAM2B,WAAa,GAKxC,OAJInB,KAAKR,MAAMmE,SACdxC,GAAa,WACVnB,KAAKJ,MAAMC,WACdsB,GAAa,aAEb,yBAAKA,UAAWA,EAAU,UACxBM,GAAIzB,KAAKR,MAAMiC,GACf8B,QAAU,WACLvD,KAAKR,MAAMK,WAEdG,KAAKR,MAAMgE,GAAKxD,KAAK4D,SAASjE,KAAKK,KAAMA,KAAKR,MAAMgE,IAAMxD,KAAKR,MAAM+D,YACpE5D,KAAKK,MACRoB,MAAOpB,KAAKR,MAAM4B,OACjBpB,KAAKR,MAAMqE,c,GAjHIC,IAAMC,YCJ3B,SAASC,IAA2Q,OAA9PA,EAAWC,OAAOC,QAAU,SAAUC,GAAU,IAAK,IAAInC,EAAI,EAAGA,EAAIoC,UAAU/B,OAAQL,IAAK,CAAE,IAAIqC,EAASD,UAAUpC,GAAI,IAAK,IAAIsC,KAAOD,EAAcJ,OAAOM,UAAUC,eAAeC,KAAKJ,EAAQC,KAAQH,EAAOG,GAAOD,EAAOC,IAAY,OAAOH,IAA2BO,MAAM1E,KAAMoE,WAEhT,SAASO,EAAyBN,EAAQO,GAAY,GAAc,MAAVP,EAAgB,MAAO,GAAI,IAAkEC,EAAKtC,EAAnEmC,EAEzF,SAAuCE,EAAQO,GAAY,GAAc,MAAVP,EAAgB,MAAO,GAAI,IAA2DC,EAAKtC,EAA5DmC,EAAS,GAAQU,EAAaZ,OAAOa,KAAKT,GAAqB,IAAKrC,EAAI,EAAGA,EAAI6C,EAAWxC,OAAQL,IAAOsC,EAAMO,EAAW7C,GAAQ4C,EAASG,QAAQT,IAAQ,IAAaH,EAAOG,GAAOD,EAAOC,IAAQ,OAAOH,EAFxMa,CAA8BX,EAAQO,GAAuB,GAAIX,OAAOgB,sBAAuB,CAAE,IAAIC,EAAmBjB,OAAOgB,sBAAsBZ,GAAS,IAAKrC,EAAI,EAAGA,EAAIkD,EAAiB7C,OAAQL,IAAOsC,EAAMY,EAAiBlD,GAAQ4C,EAASG,QAAQT,IAAQ,GAAkBL,OAAOM,UAAUY,qBAAqBV,KAAKJ,EAAQC,KAAgBH,EAAOG,GAAOD,EAAOC,IAAU,OAAOH,EAMne,IAAIiB,EAEJ,IAAMlE,cAAc,OAAQ,CAC1BmE,EAAG,gBACHC,KAAM,SAGJC,EAEJ,IAAMrE,cAAc,OAAQ,CAC1BmE,EAAG,iEAGD,EAAU,SAAiBG,GAC7B,IAAIC,EAASD,EAAKC,OACdC,EAAQF,EAAKE,MACblG,EAAQmF,EAAyBa,EAAM,CAAC,SAAU,UAEtD,OAAO,IAAMtE,cAAc,MAAO8C,EAAS,CACzClD,MAAO,GACPC,OAAQ,GACR4E,QAAS,YACTC,IAAKH,GACJjG,GAAQkG,EAAQ,IAAMxE,cAAc,QAAS,KAAMwE,GAAS,KAAMN,EAAOG,IAG1EM,EAAa,IAAMC,YAAW,SAAUtG,EAAOoG,GACjD,OAAO,IAAM1E,cAAc,EAAS8C,EAAS,CAC3CyB,OAAQG,GACPpG,OAEU,ICvCf,SAAS,IAA2Q,OAA9P,EAAWyE,OAAOC,QAAU,SAAUC,GAAU,IAAK,IAAInC,EAAI,EAAGA,EAAIoC,UAAU/B,OAAQL,IAAK,CAAE,IAAIqC,EAASD,UAAUpC,GAAI,IAAK,IAAIsC,KAAOD,EAAcJ,OAAOM,UAAUC,eAAeC,KAAKJ,EAAQC,KAAQH,EAAOG,GAAOD,EAAOC,IAAY,OAAOH,IAA2BO,MAAM1E,KAAMoE,WAEhT,SAAS,EAAyBC,EAAQO,GAAY,GAAc,MAAVP,EAAgB,MAAO,GAAI,IAAkEC,EAAKtC,EAAnEmC,EAEzF,SAAuCE,EAAQO,GAAY,GAAc,MAAVP,EAAgB,MAAO,GAAI,IAA2DC,EAAKtC,EAA5DmC,EAAS,GAAQU,EAAaZ,OAAOa,KAAKT,GAAqB,IAAKrC,EAAI,EAAGA,EAAI6C,EAAWxC,OAAQL,IAAOsC,EAAMO,EAAW7C,GAAQ4C,EAASG,QAAQT,IAAQ,IAAaH,EAAOG,GAAOD,EAAOC,IAAQ,OAAOH,EAFxM,CAA8BE,EAAQO,GAAuB,GAAIX,OAAOgB,sBAAuB,CAAE,IAAIC,EAAmBjB,OAAOgB,sBAAsBZ,GAAS,IAAKrC,EAAI,EAAGA,EAAIkD,EAAiB7C,OAAQL,IAAOsC,EAAMY,EAAiBlD,GAAQ4C,EAASG,QAAQT,IAAQ,GAAkBL,OAAOM,UAAUY,qBAAqBV,KAAKJ,EAAQC,KAAgBH,EAAOG,GAAOD,EAAOC,IAAU,OAAOH,EAMne,IAAI,EAEJ,IAAMjD,cAAc,OAAQ,CAC1BmE,EAAG,oMAGD,EAEJ,IAAMnE,cAAc,OAAQ,CAC1BmE,EAAG,gBACHC,KAAM,SAGJ,EAAS,SAAgBE,GAC3B,IAAIC,EAASD,EAAKC,OACdC,EAAQF,EAAKE,MACblG,EAAQ,EAAyBgG,EAAM,CAAC,SAAU,UAEtD,OAAO,IAAMtE,cAAc,MAAO,EAAS,CACzCJ,MAAO,GACPC,OAAQ,GACR4E,QAAS,YACTC,IAAKH,GACJjG,GAAQkG,EAAQ,IAAMxE,cAAc,QAAS,KAAMwE,GAAS,KAAM,EAAO,IAG1E,EAAa,IAAMI,YAAW,SAAUtG,EAAOoG,GACjD,OAAO,IAAM1E,cAAc,EAAQ,EAAS,CAC1CuE,OAAQG,GACPpG,OAEU,ICvCf,SAAS,IAA2Q,OAA9P,EAAWyE,OAAOC,QAAU,SAAUC,GAAU,IAAK,IAAInC,EAAI,EAAGA,EAAIoC,UAAU/B,OAAQL,IAAK,CAAE,IAAIqC,EAASD,UAAUpC,GAAI,IAAK,IAAIsC,KAAOD,EAAcJ,OAAOM,UAAUC,eAAeC,KAAKJ,EAAQC,KAAQH,EAAOG,GAAOD,EAAOC,IAAY,OAAOH,IAA2BO,MAAM1E,KAAMoE,WAEhT,SAAS,EAAyBC,EAAQO,GAAY,GAAc,MAAVP,EAAgB,MAAO,GAAI,IAAkEC,EAAKtC,EAAnEmC,EAEzF,SAAuCE,EAAQO,GAAY,GAAc,MAAVP,EAAgB,MAAO,GAAI,IAA2DC,EAAKtC,EAA5DmC,EAAS,GAAQU,EAAaZ,OAAOa,KAAKT,GAAqB,IAAKrC,EAAI,EAAGA,EAAI6C,EAAWxC,OAAQL,IAAOsC,EAAMO,EAAW7C,GAAQ4C,EAASG,QAAQT,IAAQ,IAAaH,EAAOG,GAAOD,EAAOC,IAAQ,OAAOH,EAFxM,CAA8BE,EAAQO,GAAuB,GAAIX,OAAOgB,sBAAuB,CAAE,IAAIC,EAAmBjB,OAAOgB,sBAAsBZ,GAAS,IAAKrC,EAAI,EAAGA,EAAIkD,EAAiB7C,OAAQL,IAAOsC,EAAMY,EAAiBlD,GAAQ4C,EAASG,QAAQT,IAAQ,GAAkBL,OAAOM,UAAUY,qBAAqBV,KAAKJ,EAAQC,KAAgBH,EAAOG,GAAOD,EAAOC,IAAU,OAAOH,EAMne,IAAI,EAEJ,IAAMjD,cAAc,OAAQ,CAC1BmE,EAAG,0GAGD,EAEJ,IAAMnE,cAAc,OAAQ,CAC1BmE,EAAG,gBACHC,KAAM,SAGJ,EAAW,SAAkBE,GAC/B,IAAIC,EAASD,EAAKC,OACdC,EAAQF,EAAKE,MACblG,EAAQ,EAAyBgG,EAAM,CAAC,SAAU,UAEtD,OAAO,IAAMtE,cAAc,MAAO,EAAS,CACzCJ,MAAO,GACPC,OAAQ,GACR4E,QAAS,YACTC,IAAKH,GACJjG,GAAQkG,EAAQ,IAAMxE,cAAc,QAAS,KAAMwE,GAAS,KAAM,EAAO,IAG1E,EAAa,IAAMI,YAAW,SAAUtG,EAAOoG,GACjD,OAAO,IAAM1E,cAAc,EAAU,EAAS,CAC5CuE,OAAQG,GACPpG,OAEU,ICvCf,SAAS,IAA2Q,OAA9P,EAAWyE,OAAOC,QAAU,SAAUC,GAAU,IAAK,IAAInC,EAAI,EAAGA,EAAIoC,UAAU/B,OAAQL,IAAK,CAAE,IAAIqC,EAASD,UAAUpC,GAAI,IAAK,IAAIsC,KAAOD,EAAcJ,OAAOM,UAAUC,eAAeC,KAAKJ,EAAQC,KAAQH,EAAOG,GAAOD,EAAOC,IAAY,OAAOH,IAA2BO,MAAM1E,KAAMoE,WAEhT,SAAS,EAAyBC,EAAQO,GAAY,GAAc,MAAVP,EAAgB,MAAO,GAAI,IAAkEC,EAAKtC,EAAnEmC,EAEzF,SAAuCE,EAAQO,GAAY,GAAc,MAAVP,EAAgB,MAAO,GAAI,IAA2DC,EAAKtC,EAA5DmC,EAAS,GAAQU,EAAaZ,OAAOa,KAAKT,GAAqB,IAAKrC,EAAI,EAAGA,EAAI6C,EAAWxC,OAAQL,IAAOsC,EAAMO,EAAW7C,GAAQ4C,EAASG,QAAQT,IAAQ,IAAaH,EAAOG,GAAOD,EAAOC,IAAQ,OAAOH,EAFxM,CAA8BE,EAAQO,GAAuB,GAAIX,OAAOgB,sBAAuB,CAAE,IAAIC,EAAmBjB,OAAOgB,sBAAsBZ,GAAS,IAAKrC,EAAI,EAAGA,EAAIkD,EAAiB7C,OAAQL,IAAOsC,EAAMY,EAAiBlD,GAAQ4C,EAASG,QAAQT,IAAQ,GAAkBL,OAAOM,UAAUY,qBAAqBV,KAAKJ,EAAQC,KAAgBH,EAAOG,GAAOD,EAAOC,IAAU,OAAOH,EAMne,IAAI,EAEJ,IAAMjD,cAAc,OAAQ,CAC1BoE,KAAM,OACND,EAAG,kBAGD,EAEJ,IAAMnE,cAAc,OAAQ,CAC1BmE,EAAG,uDAGD,EAAU,SAAiBG,GAC7B,IAAIC,EAASD,EAAKC,OACdC,EAAQF,EAAKE,MACblG,EAAQ,EAAyBgG,EAAM,CAAC,SAAU,UAEtD,OAAO,IAAMtE,cAAc,MAAO,EAAS,CACzCJ,MAAO,GACPC,OAAQ,GACR4E,QAAS,YACTC,IAAKH,GACJjG,GAAQkG,EAAQ,IAAMxE,cAAc,QAAS,KAAMwE,GAAS,KAAM,EAAO,IAG1E,EAAa,IAAMI,YAAW,SAAUtG,EAAOoG,GACjD,OAAO,IAAM1E,cAAc,EAAS,EAAS,CAC3CuE,OAAQG,GACPpG,OAEU,ICvCf,SAAS,IAA2Q,OAA9P,EAAWyE,OAAOC,QAAU,SAAUC,GAAU,IAAK,IAAInC,EAAI,EAAGA,EAAIoC,UAAU/B,OAAQL,IAAK,CAAE,IAAIqC,EAASD,UAAUpC,GAAI,IAAK,IAAIsC,KAAOD,EAAcJ,OAAOM,UAAUC,eAAeC,KAAKJ,EAAQC,KAAQH,EAAOG,GAAOD,EAAOC,IAAY,OAAOH,IAA2BO,MAAM1E,KAAMoE,WAEhT,SAAS,EAAyBC,EAAQO,GAAY,GAAc,MAAVP,EAAgB,MAAO,GAAI,IAAkEC,EAAKtC,EAAnEmC,EAEzF,SAAuCE,EAAQO,GAAY,GAAc,MAAVP,EAAgB,MAAO,GAAI,IAA2DC,EAAKtC,EAA5DmC,EAAS,GAAQU,EAAaZ,OAAOa,KAAKT,GAAqB,IAAKrC,EAAI,EAAGA,EAAI6C,EAAWxC,OAAQL,IAAOsC,EAAMO,EAAW7C,GAAQ4C,EAASG,QAAQT,IAAQ,IAAaH,EAAOG,GAAOD,EAAOC,IAAQ,OAAOH,EAFxM,CAA8BE,EAAQO,GAAuB,GAAIX,OAAOgB,sBAAuB,CAAE,IAAIC,EAAmBjB,OAAOgB,sBAAsBZ,GAAS,IAAKrC,EAAI,EAAGA,EAAIkD,EAAiB7C,OAAQL,IAAOsC,EAAMY,EAAiBlD,GAAQ4C,EAASG,QAAQT,IAAQ,GAAkBL,OAAOM,UAAUY,qBAAqBV,KAAKJ,EAAQC,KAAgBH,EAAOG,GAAOD,EAAOC,IAAU,OAAOH,EAMne,IAAI,EAEJ,IAAMjD,cAAc,OAAQ,CAC1BmE,EAAG,uDAGD,EAAU,SAAiBG,GAC7B,IAAIC,EAASD,EAAKC,OACdC,EAAQF,EAAKE,MACblG,EAAQ,EAAyBgG,EAAM,CAAC,SAAU,UAEtD,OAAO,IAAMtE,cAAc,MAAO,EAAS,CACzCJ,MAAO,GACPC,OAAQ,GACR4E,QAAS,YACTC,IAAKH,GACJjG,GAAQkG,EAAQ,IAAMxE,cAAc,QAAS,KAAMwE,GAAS,KAAM,IAGnE,EAAa,IAAMI,YAAW,SAAUtG,EAAOoG,GACjD,OAAO,IAAM1E,cAAc,EAAS,EAAS,CAC3CuE,OAAQG,GACPpG,OChBCuG,GDkBS,I,iBCjBd,aAAe,oBACd/F,KAAKgG,KAAO,K,iDAGRC,GACJ,IAAID,EAAOhG,KAAKgG,KAChBhG,KAAKgG,KAAO/B,OAAOC,OAAO+B,EAAK,CAC9BC,KAAMF,Q,MAKT,SAASG,EAAQC,GAChB,OAAOnC,OAAOa,KAAKsB,GAAKC,QAAO,SAAA/B,GAAG,OAAI8B,EAAI9B,MAAMgC,KAAK,K,IA4VvCC,E,YAxVd,WAAY/G,GAAQ,IAAD,8BAClB,4CAAMA,KAEDgH,iBAAkB,EAEvB,EAAKC,eAA0C,qBAAlBC,cAE7B,EAAKC,QAAU,KACf,EAAKC,OAAS,KACd,EAAKvC,OAAS,KACd,EAAKwC,UAAY,KACjB,EAAKC,SAAW,KAChB,EAAKC,SAAW,KAChB,EAAKC,OAAS,GACd,EAAKC,eAAiB,KAEtB,EAAKC,QAAU,KACf,EAAKC,UAAY,EAEjB,EAAKC,YAActD,IAAMuD,YACzB,EAAKC,UAAYxD,IAAMuD,YACvB,EAAKE,UAAYzD,IAAMuD,YACvB,EAAKG,SAAW1D,IAAMuD,YAEtB,EAAKzH,MAAQ,CACZ6H,KAAM,OACNC,OAAQ,GACRC,YAAa,IAGd,EAAKC,SAAW,EAAKC,aAAalI,KAAlB,gBAChB,EAAKmI,WAAa,EAAKC,WAAWpI,KAAhB,gBAElB,EAAKqI,SAAWxI,EAAMyI,SAjCJ,E,iFAqClBjI,KAAK6H,eACL7E,OAAOH,iBAAiB,SAAU7C,KAAK4H,UACvC5E,OAAOH,iBAAiB,WAAY7C,KAAK8H,c,6CAGzC9E,OAAOC,oBAAoB,SAAUjD,KAAK4H,UAC1C5E,OAAOC,oBAAoB,WAAYjD,KAAK8H,c,qCAI5C,IAAII,EAAOlI,KAAKoH,YAAYe,QACxBC,EAASpI,KAAKuH,UAAUY,QACd,MAAVC,GAA0B,MAARF,IAGtBE,EAAOtH,MAAQoH,EAAKG,YAAcrF,OAAOsF,iBACzCF,EAAOrH,OAASmH,EAAKK,aAAevF,OAAOsF,iBAC3CtI,KAAKwI,cAAa,M,mCAENC,GACZ,IAAIL,EAASpI,KAAKuH,UAAUY,QAC5B,GAAc,MAAVC,EAAJ,CAEA,IAAIM,EAAMN,EAAOO,WAAW,MAE5B,GAAIF,EAAM,CACT,IAAKzI,KAAKwG,gBACT,OACDoC,sBAAsB5I,KAAKwI,aAAa7I,KAAKK,KAAMyI,IAGpD,IAAII,EAAIT,EAAOtH,MACdgI,EAAIV,EAAOrH,OAEZ2H,EAAIK,UAAU,EAAG,EAAGF,EAAGC,GAEvB,IAAIE,EAAwB,SAAUC,EAAMC,EAAGC,GAC9C,MAAO,CACNhJ,GAAI8I,EAAKG,UAAYpJ,KAAKiH,gBAAvB,KAAsEiC,EACzE5I,GAAI,EAAI2I,EAAKI,OAASrJ,KAAKmH,WAAagC,IAEvCxJ,KAAKK,MAGR,GADA0I,EAAIY,YACgB,MAAhBtJ,KAAKkH,QACRwB,EAAIa,OAAO,EAAGT,EAAI,IAClBJ,EAAIc,OAAO,EAAGV,EAAE,GAChBJ,EAAIc,QAAQ9H,KAAKC,MAAQ3B,KAAKiH,gBAAnB,KAAkE4B,EAAGC,EAAE,GAClFJ,EAAIc,QAAQ9H,KAAKC,MAAQ3B,KAAKiH,gBAAnB,KAAkE4B,EAAGC,EAAI,QAC9E,CAEN,IADA,IAAIG,EAAOjJ,KAAKkH,QAAQlB,KAAMyD,EAAQ,KAAMC,EAAO,KACpC,MAART,GAAc,CACpB,IAAIU,EAAcX,EAAqBC,EAAMJ,EAAGC,GACnC,MAATW,IACHA,EAAQE,GACTjB,EAAIc,OAAOG,EAAYxJ,EAAGwJ,EAAYrJ,GACtCoJ,EAAOC,EACPV,EAAOA,EAAK/C,KAEA,MAATuD,GAAyB,MAARC,IACpBhB,EAAIc,OAAO,EAAGE,EAAKpJ,GACnBoI,EAAIc,OAAO,EAAGV,EAAI,IAClBJ,EAAIc,OAAOC,EAAMtJ,EAAG2I,EAAI,KAG1BJ,EAAIkB,YAEJlB,EAAImB,UAAsC,IAA1B7G,OAAOsF,iBACvBI,EAAIoB,QAAU,QACdpB,EAAIqB,YAAc,UAClBrB,EAAIsB,UAAY,UAChBtB,EAAIuB,SACJvB,EAAIpD,U,mCAGS,IAAD,OACZtF,KAAKmD,SAAS,CAACsE,KAAM,QACrByC,UAAUC,aAAaC,aAAa,CAAEC,OAAO,EAAMC,OAAO,IACnDC,MAAK,SAAC3D,GACN,EAAKA,OAASA,EAEd,IAAI4D,EAAexH,OAAOwH,cACvBxH,OAAOyH,qBACP,EAER,IAAK,EAAKhE,eAMJ,OALL,EAAKtD,SAAS,CACRwE,YAAa,QACbD,OAAQ,sDAET,EAAKd,OAAS,MAIpB,EAAKI,OAAS,GACd,EAAKD,SAAW,IAAIL,cAAc,EAAKE,QACpC,EAAKG,SAAS2D,gBAAmB,SAAUC,GAC1C3K,KAAKgH,OAAO4D,KAAKD,EAAEE,OACjBlL,KAAK,GACX,EAAKoH,SAAS9E,QACd,EAAKgF,eAAiBvF,KAAKC,MAEvB6I,GAEE,EAAK7D,QAAU,IAAI6D,EACxB,EAAK1D,SAAW,EAAKH,QAAQmE,iBAC1B,EAAKzG,OAAS,EAAKsC,QAAQoE,wBAAwB,EAAKnE,QACxD,EAAKC,UAAY,EAAKF,QAAQqE,sBAAsB,KAAM,EAAG,GAEhE,EAAK9D,QAAU,IAAInB,EACnB,EAAKoB,UAAY,EAEjB,EAAK9C,OAAO4G,QAAQ,EAAKnE,UACzB,EAAKA,SAASmE,QAAQ,EAAKpE,WAC3B,EAAKA,UAAUoE,QAAQ,EAAKtE,QAAQuE,aACpC,EAAK/H,SAAS,CACbwE,YAAa,OACbD,OAAQ,EAAKyD,eAAezJ,KAAKC,MAAQ,EAAKsF,kBAE/C,EAAKJ,UAAUuE,eAAiB,SAACT,GAChC,GAAoB,OAAhB,EAAK/D,QAAuC,QAApB,EAAKhH,MAAM6H,MAAmC,OAAjB,EAAKP,QAE9D,GAAIxF,KAAKC,MAAQ,EAAKsF,eAAiBoE,KACtC,EAAKC,YAAW,OADjB,CAKA,EAAKxE,SAASyE,QAAU,KACxB,IAAIC,EAAe,EAAK1E,SAAS2E,kBAC7BC,EAAY,IAAIC,WAAWH,GAE/B,EAAK1E,SAAS8E,qBAAqBF,GAGnC,IADA,IAAIG,EAAM,EACD7J,EAAI,EAAGA,EAAIwJ,IAAgBxJ,EACnC6J,GAAOH,EAAU1J,GAElB,IAAIqH,EAAUwC,EAAML,EAChBnC,EAAS,EAAKlC,YACjB,EAAKA,UAAYkC,GAClB,EAAKnC,QAAQ0D,KAAK,CAACxB,UAAW1H,KAAKC,MAAO0H,OAAQA,IAGlD,EAAK/B,UAAUa,QAAQ2D,UAAY,EAAKX,eAAezJ,KAAKC,MAAQ,EAAKsF,oBAG1E,EAAKC,QAAU,KACftF,YAAW,WACNF,KAAKC,MAAQ,EAAKsF,gBAAkBoE,MACvC,EAAKC,YAAW,KACfD,OAGJ,EAAKU,0BAEAC,OAAM,SAACC,GACPC,QAAQC,MAAMF,GACd,EAAK9I,SAAS,CACbwE,YAAa,QACbD,OAAQ,gCAAmCuE,S,6CAKnDjM,KAAKwG,iBAAkB,EACvBxG,KAAKwI,cAAa,K,4CAGlBxI,KAAKwG,iBAAkB,I,iCAGb4F,GAAO,IAAD,OACI,OAAhBpM,KAAK4G,SAELwF,IACHpM,KAAK+G,SAASsF,OAAS,WACtB,IAAIC,EAAO,IAAIC,KAAK,EAAKvF,OAAQ,CAAE,KAAS,EAAKD,SAASyF,WAC1D,EAAKxE,SAAS,CAACP,KAAM,QAASgF,MAAOH,MAGvCtM,KAAK+G,SAAS2F,OACd1M,KAAK2M,sBACL3M,KAAK4G,OAAOgG,YAAYC,SAAQ,SAAUC,GACzCA,EAAMJ,UAEP1M,KAAK4G,OAAS,Q,qCAEAmG,GACd,IAAIC,EAAMtM,KAAKuM,MAAMF,EAAS,KAC1BG,EAAMxM,KAAKuM,MAAMD,EAAM,IAG3B,OAFAA,GAAY,GAELhN,KAAKmN,SAASD,GAAO,IAAMlN,KAAKmN,SAASH,K,+BAExCI,EAAKC,GAKb,MAJiB,qBAANA,IACVA,EAAI,GACc,kBAARD,IACVA,GAAY,IACTA,EAAI/K,QAAUgL,EACVD,EACD,IAAIE,OAAOD,EAAED,EAAI/K,QAAU+K,I,qCAIlCpN,KAAKmD,SAAS,CAACsE,KAAM,SACrBzH,KAAKsL,YAAW,GAEhBtL,KAAKkH,QAAU,KACflH,KAAKmH,UAAY,I,sCAKjBnH,KAAKuN,iB,6BAIL,GAAwB,SAApBvN,KAAKJ,MAAM6H,KAAiB,CAC/B,IAAIgF,EAAQzM,KAAKwH,SAASW,QAAQsE,MAAMe,OACpCf,EAAMpK,OAAS,GAClBrC,KAAKgI,SAAS,CAACP,KAAM,OAAQgF,MAAOA,SAEjB,OAAhBzM,KAAK4G,QACR5G,KAAKsL,YAAW,K,iCAIRX,GACO,IAAbA,EAAEvH,SAAiBpD,KAAKyN,aAC3BzN,KAAKoM,S,kCAIN,IAAmCK,EAA/BiB,EAAQ1N,KAAKwH,SAASW,QAK1B,OAHCsE,EADY,MAATiB,EACKA,EAAMjB,MACF,GAGQ,QAAnBzM,KAAKJ,MAAM6H,MAAkBgF,EAAMpK,OAAS,GACzB,OAAnBrC,KAAKJ,MAAM6H,MAAiBzH,KAAKyG,gBAA4C,SAA1BzG,KAAKJ,MAAM+H,c,qCAKhE,IAAIO,EAAO5F,IAASC,YAAYvC,MAC5B2N,EAAWzF,EAAKrE,SAASqE,EAAKrE,SAASxB,OAAS,GAEhDoK,EAAQzM,KAAKwH,SAASW,QAAQsE,MAAMe,OACxCG,EAASxM,UAAYgF,EAAQ,CAC5BI,mBAAmB,EACnBqH,QAASnB,EAAMpK,OAAS,EACxBwL,IAAyB,QAApB7N,KAAKJ,MAAM6H,KAChBqG,KAA0B,SAApB9N,KAAKJ,MAAM6H,S,+BAKlB,OACC,yBAAKtG,UAAU,4BAEZnB,KAAKyG,eAIG,KAHT,yBAAKtF,UAAU,WACd,kBAAC,EAAD,MACA,kFAGF,yBAAKA,UAAWgF,EAAQ,CACtBI,mBAAmB,EACnBqH,QAAS5N,KAAKyN,YACdI,IAAyB,QAApB7N,KAAKJ,MAAM6H,KAChBqG,KAA0B,SAApB9N,KAAKJ,MAAM6H,OAElB7B,IAAK5F,KAAKoH,aACV,yBAAKjG,UAAU,iBACd,2BACCsG,KAAK,OACLsG,YAAY,oCACZnI,IAAK5F,KAAKwH,SACVwG,SAAUhO,KAAKiO,cAActO,KAAKK,MAClC8H,WAAY9H,KAAKiO,cAActO,KAAKK,MACpCkO,QAASlO,KAAKiO,cAActO,KAAKK,SAEnC,yBAAKmB,UAAW,UAAUnB,KAAKJ,MAAM+H,YAAa/B,IAAK5F,KAAKsH,WAAYtH,KAAKJ,MAAM8H,QACnF,4BAAQ9B,IAAK5F,KAAKuH,YAClB,kBAAC,EAAD,CACCpG,UAAW,wBAA2BnB,KAAKyG,eAA6B,GAAZ,WAC5DlD,QAASvD,KAAKmO,WAAWxO,KAAKK,OAC9B,kBAAC,EAAD,OAED,kBAAC,EAAD,CACCmB,UAAU,yBACVoC,QAASvD,KAAKoO,aAAazO,KAAKK,OAChC,kBAAC,EAAD,OAED,kBAAC,EAAD,CACCmB,UAAU,wBACVoC,QAASvD,KAAKoM,KAAKzM,KAAKK,OACxB,kBAAC,EAAD,a,GAjV0B8D,IAAMC,WCHvBsK,E,YAtBd,WAAY7O,GAAQ,IAAD,8BAClB,4CAAMA,KACDI,MAAQ,GAFK,E,sEAKT,IAAD,OACR,OAAII,KAAKJ,MAAMgE,SACP,kBAAC,IAAD,CAAUJ,GAAI,CACpB8K,SAAU,SACV1O,MAAOI,KAAKJ,MAAMgE,YAInB,6BACC,wKACA,kBAAC,EAAD,CAAmBqE,SAAU,SAACyF,GAC7B,EAAKvK,SAAS,CAACS,SAAU8J,Y,GAjBN5J,IAAMC,W,MCF9B,SAASoC,EAAQC,GAChB,IAAImI,EAAM,GACV,IAAK,IAAIjK,KAAO8B,EACXA,EAAI9B,IACPiK,EAAI3D,KAAKtG,GACX,OAAOiK,EAAIjI,KAAK,KAGF,eAAU9G,GACxB,OAAO,yBAAK2B,UAAWgF,EAAQ,CAC9BqI,SAAS,EACTC,OAAQjP,EAAMiP,YCdhB,SAAS,IAA2Q,OAA9P,EAAWxK,OAAOC,QAAU,SAAUC,GAAU,IAAK,IAAInC,EAAI,EAAGA,EAAIoC,UAAU/B,OAAQL,IAAK,CAAE,IAAIqC,EAASD,UAAUpC,GAAI,IAAK,IAAIsC,KAAOD,EAAcJ,OAAOM,UAAUC,eAAeC,KAAKJ,EAAQC,KAAQH,EAAOG,GAAOD,EAAOC,IAAY,OAAOH,IAA2BO,MAAM1E,KAAMoE,WAEhT,SAAS,GAAyBC,EAAQO,GAAY,GAAc,MAAVP,EAAgB,MAAO,GAAI,IAAkEC,EAAKtC,EAAnEmC,EAEzF,SAAuCE,EAAQO,GAAY,GAAc,MAAVP,EAAgB,MAAO,GAAI,IAA2DC,EAAKtC,EAA5DmC,EAAS,GAAQU,EAAaZ,OAAOa,KAAKT,GAAqB,IAAKrC,EAAI,EAAGA,EAAI6C,EAAWxC,OAAQL,IAAOsC,EAAMO,EAAW7C,GAAQ4C,EAASG,QAAQT,IAAQ,IAAaH,EAAOG,GAAOD,EAAOC,IAAQ,OAAOH,EAFxM,CAA8BE,EAAQO,GAAuB,GAAIX,OAAOgB,sBAAuB,CAAE,IAAIC,EAAmBjB,OAAOgB,sBAAsBZ,GAAS,IAAKrC,EAAI,EAAGA,EAAIkD,EAAiB7C,OAAQL,IAAOsC,EAAMY,EAAiBlD,GAAQ4C,EAASG,QAAQT,IAAQ,GAAkBL,OAAOM,UAAUY,qBAAqBV,KAAKJ,EAAQC,KAAgBH,EAAOG,GAAOD,EAAOC,IAAU,OAAOH,EAMne,IAAI,GAEJ,IAAMjD,cAAc,OAAQ,CAC1BmE,EAAG,0FAGD,GAAW,SAAkBG,GAC/B,IAAIC,EAASD,EAAKC,OACdC,EAAQF,EAAKE,MACblG,EAAQ,GAAyBgG,EAAM,CAAC,SAAU,UAEtD,OAAO,IAAMtE,cAAc,MAAO,EAAS,CACzCJ,MAAO,GACPC,OAAQ,GACR4E,QAAS,YACTC,IAAKH,GACJjG,GAAQkG,EAAQ,IAAMxE,cAAc,QAAS,KAAMwE,GAAS,KAAM,KAGnE,GAAa,IAAMI,YAAW,SAAUtG,EAAOoG,GACjD,OAAO,IAAM1E,cAAc,GAAU,EAAS,CAC5CuE,OAAQG,GACPpG,OAEU,I,MCvBA,gBAAUA,GACxB,IAAIkP,GAAM,EACL,CAAC,cAAe,UAAW,SAAU,aAAc,UAAW,UAAW3J,QAAQvF,EAAMmP,SAAW,IACtGD,GAAM,GACP,IAVmBtB,EAUfwB,EAAOpP,EAAMoP,MAAQ,QACzB,OACC,uBAAGzN,UAAW,cAAgByN,EAAMlL,KAAMlE,EAAMqP,MAAQrP,EAAMkE,MAC5DgL,EACA,yBAAKtN,MAAO,CAAC0N,gBAAiB,eAAeF,EAAK,IAAIpP,EAAMmP,OAAO,YAZtEvB,GADAA,GADmBA,EAeL5N,EAAMmP,QAdVI,QAAQ,KAAM,MACdvB,QACCwB,MAAM,EAAG,GAAGC,cAAgB7B,EAAI4B,MAAM,KCF5CE,I,MAAY,CACjB,QAAW,SAACC,GACX,IAAI1N,EAAK0N,EAAMC,IAAIC,MAAM,4FACzB,OAAW,OAAP5N,GAAeA,EAAGY,OAAS,EACvB,MACRZ,EAAKA,EAAG,GACD,4BAAQgG,KAAK,YAAYtG,UAAU,iBACtCmO,IAAK,gCAAgC7N,EAAG,iBACxC8N,YAAY,QAEjB,OAAU,SAACJ,GACV,IAAI1N,EAAK0N,EAAMC,IAAIC,MAAM,gFACzB,OAAW,OAAP5N,GAAeA,EAAGY,OAAS,EACvB,MACRZ,EAAKA,EAAG,GAED,4BACJ+N,UAAU,KACVD,YAAY,IACZE,kBAAkB,OAClBH,IAAK,mKAAmK7N,EACxKX,MAAM,MACNC,OAAO,YAIG,YAAUvB,GACxB,IAAIsN,EAAQtN,EAAMsN,OAAStN,EAAMqL,KAEjC,GAAoB,OAAhBiC,EAAMqC,OAAyC,IAAvBrC,EAAMqC,MAAM9M,OACvC,OAAO,KAER,IAAK,IAAIsM,KAAUO,GAClB,IAAK,IAAIlN,EAAI,EAAGA,EAAI8K,EAAMqC,MAAM9M,SAAUL,EACzC,GAAI2M,IAAW7B,EAAMqC,MAAMnN,GAAG0N,SAAU,CACvC,IAAIC,EAAST,GAAUP,GAAQ7B,EAAMqC,MAAMnN,IAE1C,OAAO2N,EAIX,OAAO,M,MCrCR,SAASC,GAAc9B,EAAM+B,GAC5B,GAAS,MAALA,EACH,OAAO/B,EAER,IAOIgC,EAPAC,EAAgBjC,EAAKkC,cAErBC,GADJJ,EAAIA,EAAEG,cAAcxC,QACN0C,MAAM,MAEhBC,EAAa,GAEbhQ,EAAI,EACMiQ,GAAU,EACxB,EAAG,CACFN,GAAY,EACZM,GAAU,EACV,IAAK,IAAIpO,EAAI,EAAGA,EAAIiO,EAAM5N,SAAUL,EAAG,CACtC,IAAIqO,EAAQN,EAAchL,QAAQkL,EAAMjO,GAAI7B,IAC9B,GAAVkQ,KAEAP,EAAWO,IAAsB,GAAbP,KACvBA,EAAWO,EACXD,EAASpO,IAGX,IAAe,GAAXoO,IAA6B,GAAbN,EACnB,MAEDK,EAAWvF,KAAK,CAACkF,EAAUA,EAAWG,EAAMG,GAAQ/N,SACpDlC,EAAI2P,EAAWG,EAAMG,GAAQ/N,OAAS,SACjB,GAAbyN,GAET,GAAyB,GAArBK,EAAW9N,OACd,OAAOyL,EAGR,IAAK,IAAI9L,EAAI,EAAGA,EAAImO,EAAW9N,OAAS,IAAKL,EAAG,CAC/C,IAAIsO,EAAIH,EAAWnO,GAClBuO,EAAIJ,EAAWnO,EAAE,GACdsO,EAAE,IAAMC,EAAE,KACbJ,EAAWnO,GAAG,GAAKuO,EAAE,GACrBJ,EAAWK,OAAOxO,EAAE,EAAG,GACvBA,KAIF,IAAIyO,EAAM,GACVtQ,EAAI,EACJ,IAAK,IAAI6B,EAAI,EAAGA,EAAImO,EAAW9N,SAAUL,EAAG,CAC3C,IAAImH,EAAIgH,EAAWnO,GACfmH,EAAE,GAAKhJ,IACVsQ,EAAI7F,KAAKkD,EAAK3L,UAAUhC,EAAGgJ,EAAE,KAC7BhJ,EAAIgJ,EAAE,IAEPsH,EAAI7F,KAAK,0BAAMzJ,UAAU,aAAa2M,EAAK3L,UAAUgH,EAAE,GAAIA,EAAE,MAC7DhJ,EAAIgJ,EAAE,GAIP,OAFIhJ,EAAI2N,EAAKzL,QACZoO,EAAI7F,KAAKkD,EAAK3L,UAAUhC,IAClBsQ,EAGO,gBAAUjR,GACxB,IAAIsN,EAAQtN,EAAMqL,MAAQrL,EAAMsN,MAC5B+C,EAAIrQ,EAAMqQ,GAAK,KAEfa,GAAU5D,EAAMqC,OAAS,IAAIwB,KAAI,SAAAhC,GACpC,OAAO,kBAAC,GAAD,CACJjL,KAAMiL,EAAOS,KAAKT,EAAOiC,IACzBjC,OAAQA,EAAOe,SACfpL,IAAKqK,EAAOe,SACZd,KAAK,WAGT,OACC,yBAAKzN,UAAU,iBACd,yBAAKA,UAAU,aACd,yBAAKA,UAAU,iBACd,yBAAKA,UAAU,SACd,yBAAKA,UAAU,MACd,kBAAC,GAAD,OAEA2L,EAAM+D,MAAQ,yBAAKvB,IAAKxC,EAAM+D,QAAY,OAG7C,yBAAK1P,UAAU,QACd,yBAAKA,UAAU,QACd,4BAAKyO,GAAc9C,EAAMpH,MAAOmK,IAChC,4BAAKD,GAAc9C,EAAMgE,OAAQjB,KAElC,yBAAK1O,UAAU,SACd,8BACGuP,MAKN,kBAAC,GAAD,CAAQ5D,MAAOA,IACI,OAAjBA,EAAMiE,OACP,yBAAK5P,UAAU,UACd,0BAAMA,UAAU,UAAhB,UACA,8BAAOyO,GAAc9C,EAAMiE,OAAQlB,KAElC,O,MCrGS,gBAAUrQ,GAKxB,IAJA,IAPmB4N,EAOf4D,EAAQxR,EAAMwR,OAAS,GAEvBC,EAAW,GACXC,EAAUjN,OAAOa,KAAKkM,GACjBhP,EAAI,EAAG7B,EAAI,EAAG6B,EAAIkP,EAAQ7O,SAAUL,EAC5CiP,EAASrG,KACR,0BAAMtG,MAAOnE,EAAGgB,UAAU,UACzB,0BAAMA,UAAU,SAZnBiM,GADAA,GADmBA,EAeH8D,EAAQlP,IAdd+M,QAAQ,KAAM,MACdvB,QACCwB,MAAM,EAAG,GAAGC,cAAgB7B,EAAI4B,MAAM,IAc9C,0BAAM7N,UAAU,SACd6P,EAAME,EAAQlP,OAKdkP,EAAQ7O,OAAS,IAAML,GAC1BiP,EAASrG,KAAK,0BAAMtG,MAAOnE,EAAGgB,UAAU,aAA1B,MAGhB,OAAO,yBAAKA,UAAU,SAAQ,6BAAM8P,KC9BjCE,GAAO,GACLC,GAAU,CACf,SAACC,GAAD,OAAUC,KAAKC,MAAMC,aAAaC,QAAQJ,KAC1C,SAACA,GACA,IAAIK,EAAUzQ,SAAS0Q,OAAOtC,MAAM,IAAIuC,OACvC,WAAaP,EAAKtC,QAAQ,+BAAgC,QAAU,aAErE,OAAO2C,EAAUJ,KAAKC,MAAMM,mBAAmBH,EAAQ,KAAO,MAE/D,SAACL,GAAD,OAAUF,GAAKE,KAEVS,GAAU,CACf,SAACT,EAAM5E,GAAP,OAAiB+E,aAAaO,QAAQV,EAAMC,KAAKU,UAAUvF,KAC3D,SAAC4E,EAAM5E,GAAP,OAAiBxL,SAAS0Q,OAASM,mBAAmBZ,GAAQ,IAAMY,mBAAmBX,KAAKU,UAAUvF,KACtG,SAAC4E,EAAM5E,GAAP,OAAiB0E,GAAKE,GAAQ5E,IAGzByF,GAAU,CACfC,IAAK,SAACd,EAAMe,GAEX,IADA,IAAI3F,EAAQ,KACHzK,EAAI,EAAGA,EAAIoP,GAAQ/O,SAEd,OADboK,EAAQ2E,GAAQpP,GAAGqP,KACmB,qBAAV5E,KAFSzK,EAIhCyK,EAAQ,KAEd,OAAc,MAATA,GAAkC,qBAAVA,GAAyC,qBAAR2F,EAItD3F,GAHPyF,GAAQG,IAAIhB,EAAMe,GACXA,IAITC,IAAK,SAAChB,EAAM5E,GACX,IAAK,IAAIzK,EAAI,EAAGA,EAAI8P,GAAQzP,SAAUL,EACrC8P,GAAQ9P,GAAGqP,EAAM5E,KAGpBzJ,OAAOkP,QAAUA,GACFA,U,SC7Bf,SAASI,GAAWlM,GACnB,OAAOnC,OAAOa,KAAKsB,GAAKuK,KAAI,SAAArM,GAAG,OAAI2N,mBAAmB3N,GAAO,IAAM2N,mBAAmB7L,EAAI9B,OAAOgC,KAAK,KAEvG,SAASiM,GAAUzN,EAAMsB,GAExB,IADA,IACgB9B,EADZkO,EAAO,GACFxQ,EAAI,EAAQA,EAAI8C,EAAKzC,SAAUL,EAEf,qBAAboE,EADX9B,EAAMQ,EAAK9C,IAEVwQ,EAAKlO,GAAO,KACRkO,EAAKlO,GAAO8B,EAAI9B,GAEtB,OAAOkO,EAGR,IAAIC,GAAQP,GAAQC,IAAI,QAAS,IACjC,SAASO,KACR,IAAK,IAAIpO,KAAOmO,GACX/Q,KAAKC,MAAQ8Q,GAAMnO,GAAKqO,EAAI,aACxBF,GAAMnO,GAGhB,SAASsO,GAAKC,EAAQzD,EAAK0D,EAAQ9K,EAAU+K,GACnB,IAArB3O,UAAU/B,SACb2F,EAAW8K,EACXA,OAASE,GAGV,IAAIC,EAAIC,aAAML,EAAS,IAAMzD,GAAK+D,SAAS,IAE3C,GADAjH,QAAQkH,IAAIP,EAAQzD,EAAK,IAAK6D,IAC1BR,GAAMQ,IAAOH,EAAjB,CAKA,IAAIO,EAAM,IAAIC,eACdD,EAAIE,KAAKV,EAAQzD,GAAK,GAEtBiE,EAAIG,mBAAqB,WACxB,GAAuB,IAAnBH,EAAII,WAER,GAAmB,MAAfJ,EAAI3L,OAAgB,CACvB,IAAI6G,EAAM8E,EAAIK,aACd,IACCnF,EAAM+C,KAAKC,MAAMhD,GAChB,MAAO5D,IAEJmI,IACJL,GAAMS,aAAML,EAAS,IAAMzD,GAAK+D,SAAS,KAAO,CAACR,EAAGjR,KAAKC,MAAOgS,EAAGpF,GACnEmE,KACAR,GAAQG,IAAI,QAASI,KAGtBzK,GAAS,EAAMuG,QAEfrC,QAAQ0H,KAAK,iDAAmDP,EAAI3L,OAAS,KAC7EM,GAAS,EAAO,oBAAsBqL,EAAI3L,SAUxCqL,GAEHM,EAAIQ,iBAAiB,mBAAoB,kBAGpB,oBAAXf,EACVO,EAAIjH,OACA0G,EAAOO,QA1CXrL,GAAS,EAAMyK,GAAMQ,GAAGU,G,IAuRtBG,GA1OEC,G,WACL,WAAYtM,EAAMuM,GAAU,oBAC3BhU,KAAKyH,KAAOA,EACZzH,KAAKgU,QAAUA,EACfhU,KAAKiU,WAAa/B,GAAQC,IAAI,UArFhC,SAAsB9E,GACJ,kBAANA,IACVA,EAAI,IACL,IAAMwC,EAAI,iEACV,OAAOqE,MAAMC,KAAK,CAAC9R,OAAQgL,IAAI,kBAAMwC,EAAEnP,KAAK0T,MAAM1T,KAAK2T,UAAYxE,EAAExN,OAAO,QAAMiE,KAAK,IAiF7CgO,CAAa,K,qDAE9CjD,GACR,IAAIf,EAAIyD,EAAcQ,SAASvU,KAAKyH,MACpC,MAAiB,kBAAN6I,EACHA,EACS,kBAANA,GAAkC,qBAATe,EAC5Bf,EAAEkE,KACHlE,EAAEe,K,4BAEJ5J,EAAMgN,GACX,IAAIrO,EAAM,GASV,MARiB,SAAbqO,EAAIhN,OACPrB,EAAIyJ,EAAI4E,EAAIhI,OAEA,WAAThF,GACHrB,EAAIsO,OAAS,6CACbtO,EAAIuO,UAAY3U,KAAKgU,QAAQY,YAE7BxO,EAAIyO,QAAU7U,KAAKiU,WACb7N,I,qCAGO0O,GACd,IAAI9D,EAAQkB,GAAQC,IAAI,QAAS,CAAC4C,SAAU,EAAGC,MAAO,IAGtD,OAFAhE,EAAM8D,EAAO,WAAa,WAC1B5C,GAAQG,IAAI,QAASrB,GACdA,I,sCAGP,OAAOkB,GAAQC,IAAI,QAAS,CAAC4C,SAAU,EAAGC,MAAO,M,gDAExB5O,GAAM,IAAD,OAC9B,OAAO,IAAI6O,SAAQ,SAACC,EAASC,GAE5B,IAAIC,EAAW,SAACC,GACfH,EAAQ,CACPG,OAAQA,EACRrE,MAAO,EAAKsE,iBAId,GAAmB,UAAflP,EAAIsB,QAAqC,OAAftB,EAAIiP,OAAiB,CAClD,IAAIvI,EAAQ1G,EAAIiP,OAAOE,KAAOnP,EAAIiP,OAAOE,KAAK,GAAKnP,EAAIiP,OAAO,GAC9D,GAAqB,qBAAVvI,GAAmC,OAAVA,EAEnC,YADAsI,EAAS,MAGiB,kBAAhBtI,EAAMqC,QAChBrC,EAAMqC,MAAQmC,KAAKC,MAAMzE,EAAMqC,QAC5BrC,EAAMqC,QACTrC,EAAMqC,MAAQrC,EAAMqC,MAAMwB,IAAI4B,GAAU5S,KAAK,EAAM,CAAC,WAAY,UAEjE,IAAI6V,EAAW,CACd,EAAKC,aAAa3I,GAClB,EAAK4I,aAAa5I,IAEnBmI,QAAQU,IAAIH,GACVjL,MAAK,WACL6K,EAAS7C,GAAU,CAAC,QAAS,QAAS,SAAU,SAAU,SAAUzF,YAGtEsI,EAAS,W,sCAIItI,EAAOqC,GACjB+E,MAAM0B,QAAQ9I,EAAMqC,SACxBrC,EAAMqC,MAAQ,IAEXrC,EAAMqC,MAAMwB,KAAI,SAAAkF,GAAC,OAAIA,EAAEnG,YAAU3K,QAAQoK,EAAMO,UAAY,GAC9D5C,EAAMqC,MAAMvE,KAAKuE,K,oCAELtE,EAAMiC,GAInB,GAHIjC,EAAKiL,MACR9V,KAAK+V,gBAAgBjJ,EAAO,CAAC4C,SAAU,SAAUN,IAAK,qBAAuBvE,EAAKiL,OAE/EjL,EAAKsE,MACR,IAAK,IAAInN,EAAI,EAAGA,EAAI6I,EAAKsE,MAAM9M,SAAUL,EACxChC,KAAK+V,gBAAgBjJ,EAAOjC,EAAKsE,MAAMnN,IAErC6I,EAAKmL,qBACRlJ,EAAM+D,MAAQhG,EAAKmL,qBACflJ,EAAMmJ,SAAWpL,EAAKpJ,KAC1BqL,EAAMmJ,QAAUpL,EAAKpJ,M,oCAET6O,EAAGC,GAChB,IAAI2F,EAAMxV,KAAKwM,IAAIoD,EAAEjO,OAAQkO,EAAElO,QAC/B,OAAOiO,EAAEN,cAAcxC,OAAOrL,UAAU,EAAG+T,KAAS3F,EAAEP,cAAcxC,OAAOrL,UAAU,EAAG+T,K,mCAE5EpJ,GAAQ,IAAD,OACnB,OAAO,IAAImI,SAAQ,SAACC,EAASC,GAC5B,IAAI/F,EAAM,EAAKmF,SAAS,UACpBzH,EAAMmJ,QACT7G,GAAO,SAAWtC,EAAMmJ,QAAU,iBAAmB,EAAKjC,QAAQmC,aAElE/G,GAAO,UAAYkD,GAAW,CAACzC,EAAG/C,EAAMgE,OAAS,IAAMhE,EAAMpH,MAAO0Q,aAAc,EAAKpC,QAAQmC,eAEhGvD,GAAK,MAAOxD,GACX,SAAC1H,EAAQmD,GACR,GAAInD,GAAUmD,EAAKuK,UAAYvK,EAAKuK,SAASiB,KAAM,CAElD,IADA,IAAIC,EAAc,KACTtU,EAAI,EAAGA,EAAI6I,EAAKuK,SAASiB,KAAKhU,SAAUL,EAAG,CACnD,IAAIuU,EAAM1L,EAAKuK,SAASiB,KAAKrU,GAC7B,GAAIuU,EAAIlB,QACPkB,EAAIlB,OAAO3P,OACX6Q,EAAIlB,OAAOmB,eAAenF,MAC1B,EAAKoF,cAAcF,EAAIlB,OAAO3P,MAAOoH,EAAMpH,QAC3C,EAAK+Q,cAAcF,EAAIlB,OAAOmB,eAAenF,KAAMvE,EAAMgE,QAAS,CAClEwF,EAAcC,EAAIlB,OAClB,OAGF,GAAoB,OAAhBiB,IACH,EAAKI,cAAcJ,EAAaxJ,GAC5BA,EAAMmJ,SAIT,YAHA,EAAKR,aAAa3I,GAChBvC,KAAK2K,GACLlJ,MAAMmJ,QAIAzN,GAAUmD,EAAKuK,UAAYvK,EAAKuK,SAASuB,MACnD,EAAKD,cAAc7L,EAAKuK,SAASuB,KAAM7J,GAExCoI,Y,mCAKSpI,GAAQ,IAAD,OACnB,OAAO,IAAImI,SAAQ,SAACC,EAASC,GAC5BvC,GAAK,MA/LW,uCA+LS,EAAK2B,SAAS,UAAY,UAAYjC,GAAW,CACzEzC,EAAG,UAAW/C,EAAMpH,MAAM,aAAeoH,EAAMgE,OAAO,IACtD8F,OAAQ,QACL,SAACzW,GAAD,OAAOA,EAAEiM,UAAQ,SAAC1E,EAAQmD,GACzBnD,GAAUmD,EAAKA,MAAQA,EAAKA,KAAKxI,OAAS,KAC7CwI,EAAOA,EAAKA,KAAK,IACRgE,MACR,EAAKkH,gBAAgBjJ,EAAO,CAAC4C,SAAU,SAAUN,IAAKvE,EAAKgE,OAGxDhE,EAAKgM,OAAShM,EAAKgM,MAAMC,UAC5BhK,EAAM+D,MAAQhG,EAAKgM,MAAMC,UACjBjM,EAAKiG,QAAUjG,EAAKiG,OAAOiG,cACnCjK,EAAM+D,MAAQhG,EAAKiG,OAAOiG,cAE5B7B,OACE,Q,iCAKMJ,GAAO,IAAD,OAChB,OAAO,IAAIG,SAAQ,SAACC,EAASC,GACV,YAAd,EAAK1N,KACRmL,GAAK,OACH,EAAK2B,WACLR,EAAc+B,KAAK,EAAKrO,MAAMqN,IAC9B,SAACpN,EAAQmD,IACPnD,EAASwN,EAAUC,GAAQtK,MAI/BqK,EAAQ,EAAK8B,eAAelC,S,2BAK1BmC,GAAgB,IAAD,OACnB,OAAO,IAAIhC,SAAQ,SAACC,EAASC,GAC5B,IAAI/F,EAAM,EAAKmF,WACXR,EAAc+B,KAAK,EAAKrO,MAAMwP,EAAcxP,MAC5C,IAAM6K,GAAW,EAAK4E,MAAM,EAAKzP,KAAMwP,KACjC,IAAIjU,OAAOsQ,gBACjBC,KAAK,OAAQnE,GAAK,GACtB,IAAI+H,EAAa,SAACzP,EAAQmD,GACpBnD,EAKa,WAAd,EAAKD,KACR,EAAK2P,0BAA0BvM,GAC7BN,KAAK2K,GACLlJ,MAAMmJ,GAERD,EAAQrK,GATRsK,EAAOtK,IAWkB,SAAvBoM,EAAcxP,MAAiC,WAAd,EAAKA,KACzCmL,GAAK,OAAQxD,EAAK+H,GAElBvE,GAAK,OAAQxD,GAAK,SAACiE,GAClB,GAA2B,UAAvB4D,EAAcxP,KAAkB,CACnC,IAAIoD,EAAO,IAAI7H,OAAOqU,SACtBxM,EAAKhJ,OAAO,OAAQoV,EAAcxK,OAClCzJ,OAAO6H,KAAOA,EACdwI,EAAIjH,KAAKvB,OACwB,SAAvBoM,EAAcxP,MACxB4L,EAAIjH,SAEH+K,U,KAKPpD,GAAcQ,SAAW,CACxB,OAAU,CACTC,KAAM,uBACN8C,OAAQ,0BACRC,OAAQ,2BAET,QAAWC,+BAGZzD,GAAc+B,KAAO,CACpB,OAAU,CAET,MAAS,uBACT,KAAQ,eAET,QAAW,CACV,MAAS,UACT,KAAQ,SAER,KAAQ,QACR,MAAS,UAMVhC,GAD4B,WAAzB9Q,OAAOS,SAASgU,KACb,IAAI1D,GAAc,WAElB,IAAIA,GAAcyD,SAAgC,CACvD5C,WAAY4C,mCACZrB,aAAcqB,qEAEhBxU,OAAO8Q,IAAMA,GACEA,UCrPA4D,G,YArEd,WAAYlY,GAAQ,IAAD,EAKlB,GALkB,qBAClB,4CAAMA,KAEDI,MAAQ,CAAC+X,OAAO,GAEjB,EAAKnY,MAAMiE,SAAS7D,MAAO,CAC9B,IAAIA,EAAQ,EAAKJ,MAAMiE,SAAS7D,MACb,SAAfA,EAAM6H,OACT,EAAK7H,MAAMiQ,EAAIjQ,EAAM6M,OACtB,EAAK7M,MAAM4O,SAAU,EAErBoJ,GAAIxL,KAAKxM,GACL2K,MAAK,SAACgE,GACL,EAAKpL,SAAS,CACbqL,SAAS,EACT1B,MAAOyB,EAAI8G,OACXsC,MAAqB,MAAdpJ,EAAI8G,OACXrE,MAAOzC,EAAIyC,QAEM,MAAdzC,EAAI8G,QACP,EAAKwC,MAAK,MAEZ7L,OAAM,SAACG,GACN,EAAKhJ,SAAS,CAACqL,SAAS,EAAOrC,MAAOA,OAvB1B,S,kEA4Bd2I,GAAO,IAAD,OACV9U,KAAKmD,SAAS,CAACwU,OAAO,IACtBC,GAAIE,WAAWhD,GACVvK,MAAK,SAACwN,GACN,EAAK5U,SAAS,CAAC6N,MAAO+G,S,+BAM3B,OAAkC,OAA9B/X,KAAKR,MAAMiE,SAAS7D,MAChB,kBAAC,IAAD,CAAU4D,GAAG,MAGjBxD,KAAKJ,MAAM4O,QACP,6BACL,uBAAGrN,UAAU,UAAb,2BACA,kBAAC,EAAD,OAIF,6BAQEnB,KAAKJ,MAAMkN,MACX,kBAAC,GAAD,CAAUjC,KAAM7K,KAAKJ,MAAMkN,MAAO+C,EAAG7P,KAAKJ,MAAMiQ,IAChD,6BACC,uBAAG1O,UAAU,UAAb,gEACA,kBAAC,GAAD,CAAO6P,MAAOhR,KAAKJ,MAAMoR,c,GA9DPlN,IAAMC,WCVf,cACd,OACC,6BACC,qC,UCgBGiU,G,6LAEJhY,KAAKiY,SAAWjY,KAAKR,MAAM0Y,QAAQC,QAAO,SAAC1U,EAAU2U,GALtDnX,SAASoX,cAAc,WAAWlX,UAAwC,KAA5B6B,OAAOS,SAAS6K,SAAkB,QAAU,Q,6CAUzFtO,KAAKiY,a,+BAGL,OACC,yBAAKxW,GAAG,WACP,kBAAC6W,EAAA,EAAD,CAAiBnX,UAAU,oBAC1B,kBAACoX,EAAA,EAAD,CACQjU,IAAKtE,KAAKR,MAAMiE,SAASa,IACzBkU,QAAS,CAAEzV,MAAO,IAAK0V,KAAM,KAC7BC,WAAW,QAElB,6BAASvX,UAAU,iBAClB,kBAAC,IAAD,CAAQsC,SAAUzD,KAAKR,MAAMiE,UAC5B,kBAAC,IAAD,CAAOqS,KAAK,IAAI6C,OAAK,EAACC,UAAWvK,IACjC,kBAAC,IAAD,CAAOyH,KAAK,UAAU8C,UAAWlB,KACjC,kBAAC,IAAD,CAAOkB,UAAWC,c,GAtBJ/U,IAAMC,WA+BtB+U,GAAmBC,YAAWf,IC/CpC1V,IAAS0W,OACR,mBDgDc,WACd,OACC,yBAAKvX,GAAG,aACP,kBAAC,IAAD,KACC,kBAAC,IAAD,CACCA,GAAG,SACHN,UAAuC,KAA5B6B,OAAOS,SAAS6K,SAAkB,QAAU,GACvD9K,GAAG,KACH,kBAAC,EAAD,CAAQ4Q,OAAK,EAACjT,UAAU,aAAaqC,GAAG,KACvC,kBAAC,EAAD,OAED,iDAED,kBAACsV,GAAD,UC7DH,MACA7X,SAASgY,eAAe,W","file":"static/js/main.4ad58a58.chunk.js","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './Button.css';\n\nclass Button extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.enterHandler = this.onEnter.bind(this);\n\t\tthis.state = {\n\t\t\tdisabled: props.disabled\n\t\t};\n\t}\n\t\n\t_down(element, event) {\n\t\tif (this.state.disabled)\n\t\t\treturn;\n\t\tlet rect = element.getBoundingClientRect();\n\t\tlet x = (event.clientX - rect.left), y = (event.clientY - rect.top);\n\t\tlet R = Math.max(\n\t\t\t\t\tMath.sqrt(Math.pow(x, 2) + Math.pow(y, 2)),\n\t\t\t\t\tMath.sqrt(Math.pow(x-rect.width, 2) + Math.pow(y, 2)),\n\t\t\t\t\tMath.sqrt(Math.pow(x, 2) + Math.pow(y-rect.height, 2)),\n\t\t\t\t\tMath.sqrt(Math.pow(x-rect.width, 2) + Math.pow(y-rect.height, 2))\n\t\t\t\t);\n\n\t\tlet ripple = document.createElement('div');\n\t\tripple.className = 'ripple';\n\t\tripple.style.position = 'absolute';\n\t\tripple.style.transition = 'all 0.25s cubic-bezier(0.215, 0.61, 0.355, 1)';\n\t\tripple.style.borderRadius = '50%';\n\t\tripple.style.opacity = '1';\n\t\tripple.style.top = y + \"px\";\n\t\tripple.style.left = x + \"px\";\n\t\tripple.style.width = ripple.style.height = '0px';\n\t\tripple.id = 's' + Date.now();\n\t\tsetTimeout(function () {\n\t\t\tripple.style.opacity = '0.75';\n\t\t\tripple.style.top = (y-R) + \"px\";\n\t\t\tripple.style.left = (x-R) + \"px\";\n\t\t\tripple.style.width = ripple.style.height = R*2 + 'px';\n\t\t}, 10);\n\n\t\telement.append(ripple);\n\t}\n\t_up(element, event) {\n\t\tlet ripples = element.querySelectorAll('.ripple');\n\t\tif (ripples == null)\n\t\t\treturn;\n\n\t\tfor (let i = 0; i < ripples.length; ++i) {\n\t\t\tlet ripple = ripples[i];\n\t\t\tlet start = parseInt(ripple.id.substring(1));\n\t\t\tif (Date.now() - start > 250) {\n\t\t\t\tripple.style.opacity = '0';\n\t\t\t\tsetTimeout(ripple.remove.bind(ripple), 250);\n\t\t\t} else {\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\tripple.style.opacity = '0';\n\t\t\t\t\tsetTimeout(ripple.remove.bind(ripple), 250);\n\t\t\t\t}, 250 - (Date.now() - start))\n\t\t\t}\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\tlet element = ReactDOM.findDOMNode(this);\n\t\telement.style.position = 'relative';\n\t\telement.style.overflow = 'hidden';\n\n\t\tthis.down = this._down.bind(this, element);\n\t\tthis.up = this._up.bind(this, element);\n\t\telement.addEventListener('mousedown', this.down);\n\t\tdocument.body.addEventListener('mouseup', this.up);\n\t}\n\tcomponentWillMount() {\n\t\tif (this.props.enter)\n\t\t\twindow.addEventListener('keyup', this.enterHandler);\n\t}\n\tcomponentWillUnmount() {\n\t\tif (this.props.enter)\n\t\t\twindow.removeEventListener('keyup', this.enterHandler);\n\n\t\tdocument.body.removeEventListener('mouseup', this.up);\n\t}\n\tcomponentWillReceiveProps(nextProps) {\n\t\tif (nextProps.disabled !== this.state.disabled)\n\t\t\tthis.setState({ disabled: nextProps.disabled });\n\t}\n\tonEnter(event) {\n\t\tif (event.keyCode === 13 && !event.ctrlKey && !event.metaKey) {\n\t\t\tif (typeof this.props.onClick === 'function' && !this.props.disabled)\n\t\t\t\tthis.props.onClick();\n\t\t}\n\t}\n\n\tredirect(to) {\n\t\tif (this.props.disabled)\n\t\t\treturn;\n\t\twindow.location.href = to;\n\t}\n\n\trender() {\n\t\tlet className = this.props.className || '';\n\t\tif (this.props.invert)\n\t\t\tclassName += ' invert';\n\t\tif (this.state.disabled)\n\t\t\tclassName += ' disabled';\n\t\treturn ( \n\t\t\t<div className={className+' button'} \n\t\t\t\t id={this.props.id} \n\t\t\t\t onClick={(function () {\n\t\t\t\t \tif (this.props.disabled)\n\t\t\t\t \t\treturn;\n\t\t\t\t \t(this.props.to ? this.redirect.bind(this, this.props.to) : this.props.onClick)();\t\n\t\t\t\t }).bind(this)}\n\t\t\t\t style={this.props.style}>\n\t\t\t\t {this.props.children}\n\t\t\t</div> \n\t\t);\n\t}\n}\n\nexport default Button;\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M0 0h24v24H0z\",\n  fill: \"none\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z\"\n});\n\nvar SvgBack = function SvgBack(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgBack, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/back.ac944051.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M0 0h24v24H0z\",\n  fill: \"none\"\n});\n\nvar SvgMic = function SvgMic(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgMic, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/mic.c787772c.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M0 0h24v24H0z\",\n  fill: \"none\"\n});\n\nvar SvgClose = function SvgClose(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgClose, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/close.777b93c6.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"none\",\n  d: \"M0 0h24v24H0z\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z\"\n});\n\nvar SvgSend = function SvgSend(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgSend, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/send.e249914e.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z\"\n});\n\nvar SvgWarn = function SvgWarn(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgWarn, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/warn.e21c6b9d.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { ReactComponent as MicPic } from './mic.svg';\nimport { ReactComponent as ClosePic } from './close.svg';\nimport { ReactComponent as SendPic } from './send.svg';\nimport { ReactComponent as WarnPic } from './warn.svg';\n\nimport Button from '../Button/Button';\nimport './TextOrRecordInput.css';\n\nconst MAX_RECORD_LENGTH = 25; // 25 seconds (audd.io)\n\n\n// VERY simple linked list\nclass LinkedList {\n\tconstructor() {\n\t\tthis.tail = null;\n\t}\n\n\tpush(val) {\n\t\tlet tail = this.tail;\n\t\tthis.tail = Object.assign(val, {\n\t\t\tnext: tail\n\t\t});\n\t}\n}\n\nfunction classes(obj) {\n\treturn Object.keys(obj).filter(key => obj[key]).join(' ');\n}\n\nclass TextOrRecordInput extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.canvasRendering = false;\n\n\t\tthis.audioSupported = typeof MediaRecorder !== 'undefined';\n\n\t\tthis.context = null;\n\t\tthis.stream = null;\n\t\tthis.source = null;\n\t\tthis.processor = null;\n\t\tthis.analyser = null;\n\t\tthis.recorder = null;\n\t\tthis.chunks = [];\n\t\tthis.recordingStart = null;\n\n\t\tthis.volumes = null;\n\t\tthis.volumeMax = 0;\n\n\t\tthis.inputDivRef = React.createRef();\n\t\tthis.statusRef = React.createRef();\n\t\tthis.canvasRef = React.createRef();\n\t\tthis.inputRef = React.createRef();\n\n\t\tthis.state = {\n\t\t\ttype: 'text',\n\t\t\tstatus: '',\n\t\t\tstatusClass: ''\n\t\t};\n\n\t\tthis.onResize = this.resizeCanvas.bind(this);\n\t\tthis.onKeyPress = this.catchEnter.bind(this);\n\n\t\tthis.callback = props.onSelect;\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.resizeCanvas();\n\t\twindow.addEventListener('resize', this.onResize);\n\t\twindow.addEventListener('keypress', this.onKeyPress);\n\t}\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener('resize', this.onResize);\n\t\twindow.removeEventListener('keypress', this.onKeyPress);\n\t}\n\n\tresizeCanvas() {\n\t\tlet root = this.inputDivRef.current;\n\t\tlet canvas = this.canvasRef.current;\n\t\tif (canvas == null || root == null)\n\t\t\treturn;\n\n\t\tcanvas.width = root.clientWidth * window.devicePixelRatio;\n\t\tcanvas.height = root.clientHeight * window.devicePixelRatio;\n\t\tthis.renderCanvas(false);\n\t}\n\trenderCanvas(loop) {\n\t\tlet canvas = this.canvasRef.current;\n\t\tif (canvas == null)\n\t\t\treturn;\n\t\tlet ctx = canvas.getContext('2d');\n\n\t\tif (loop) {\n\t\t\tif (!this.canvasRendering)\n\t\t\t\treturn;\n\t\t\trequestAnimationFrame(this.renderCanvas.bind(this, loop));\n\t\t}\n\n\t\tlet W = canvas.width,\n\t\t\tH = canvas.height;\n\n\t\tctx.clearRect(0, 0, W, H);\n\n\t\tlet calculateCoordinates = (function (node, w, h) {\n\t\t\treturn {\n\t\t\t\tx: (node.timestamp - this.recordingStart) / (MAX_RECORD_LENGTH * 1000) * w,\n\t\t\t\ty: (1 - node.volume / this.volumeMax) * h\n\t\t\t};\n\t\t}).bind(this);\n\n\t\tctx.beginPath();\n\t\tif (this.volumes == null) {\n\t\t\tctx.moveTo(0, H + 10);\n\t\t\tctx.lineTo(0, H/2);\n\t\t\tctx.lineTo((Date.now() - this.recordingStart) / (MAX_RECORD_LENGTH * 1000) * W, H/2);\n\t\t\tctx.lineTo((Date.now() - this.recordingStart) / (MAX_RECORD_LENGTH * 1000) * W, H + 10);\n\t\t} else {\n\t\t\tlet node = this.volumes.tail, first = null, last = null;\n\t\t\twhile (node != null) {\n\t\t\t\tlet coordinates = calculateCoordinates(node, W, H);\n\t\t\t\tif (first == null)\n\t\t\t\t\tfirst = coordinates;\n\t\t\t\tctx.lineTo(coordinates.x, coordinates.y);\n\t\t\t\tlast = coordinates;\n\t\t\t\tnode = node.next;\n\t\t\t}\n\t\t\tif (first != null && last != null) {\n\t\t\t\tctx.lineTo(0, last.y);\n\t\t\t\tctx.lineTo(0, H + 10);\n\t\t\t\tctx.lineTo(first.x, H + 10);\n\t\t\t}\n\t\t}\n\t\tctx.closePath();\n\n\t\tctx.lineWidth = window.devicePixelRatio * 1.5;\n\t\tctx.lineCap = 'round';\n\t\tctx.strokeStyle = '#1976d2';\n\t\tctx.fillStyle = '#90caf9';\n\t\tctx.stroke();\n\t\tctx.fill();\n\t}\n\n\tonMicClick() {\n\t\tthis.setState({type: 'mic'});\n\t\tnavigator.mediaDevices.getUserMedia({ audio: true, video: false })\n      \t\t.then((stream) => {\n      \t\t\tthis.stream = stream;\n\n      \t\t\tlet AudioContext = window.AudioContext\n\t\t\t\t\t\t\t\t\t|| window.webkitAudioContext\n\t\t\t\t\t\t\t\t\t|| false;\n\n\t\t\t\tif (!this.audioSupported) {\n\t\t\t\t\tthis.setState({\n\t      \t\t\t\tstatusClass: 'error',\n\t      \t\t\t\tstatus: 'Your browser doesn\\'t support audio recording'\n\t      \t\t\t});\n\t      \t\t\tthis.stream = null;\n\t      \t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.chunks = [];\n\t\t\t\tthis.recorder = new MediaRecorder(this.stream);\n\t\t\t    this.recorder.ondataavailable = (function (e) {\n\t\t\t    \tthis.chunks.push(e.data);\n\t\t\t    }).bind(this);\n\t\t\t\tthis.recorder.start();\n\t\t\t\tthis.recordingStart = Date.now();\n\n\t\t\t\tif (AudioContext) {\n\n\t      \t\t\tthis.context = new AudioContext();\n\t\t\t\t\tthis.analyser = this.context.createAnalyser();\n\t\t\t\t    this.source = this.context.createMediaStreamSource(this.stream);\n\t\t\t\t    this.processor = this.context.createScriptProcessor(1024, 1, 1);\n\n\t\t\t\t\tthis.volumes = new LinkedList();\n\t\t\t\t\tthis.volumeMax = 0;\n\n\t\t\t\t\tthis.source.connect(this.analyser);\n\t\t\t\t\tthis.analyser.connect(this.processor);\n\t\t\t\t\tthis.processor.connect(this.context.destination);\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tstatusClass: 'info', \n\t\t\t\t\t\tstatus: this.durationString(Date.now() - this.recordingStart)\n\t\t\t\t\t});\n\t\t\t\t\tthis.processor.onaudioprocess = (e) => {\n\t\t\t\t\t\tif (this.stream === null || this.state.type !== 'mic' || this.volumes === null)\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\tif (Date.now() - this.recordingStart > MAX_RECORD_LENGTH * 1000) {\n\t\t\t\t\t\t\tthis.stopStream(true);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.analyser.fftSize = 2048;\n\t\t\t\t\t\tlet bufferLength = this.analyser.frequencyBinCount;\n\t\t\t\t\t\tlet dataArray = new Uint8Array(bufferLength);\n\n\t\t\t\t\t\tthis.analyser.getByteFrequencyData(dataArray);\n\n\t\t\t\t\t\tlet sum = 0;\n\t\t\t\t\t\tfor (let i = 0; i < bufferLength; ++i)\n\t\t\t\t\t\t\tsum += dataArray[i];\n\n\t\t\t\t\t\tlet volume = (sum / bufferLength);\n\t\t\t\t\t\tif (volume > this.volumeMax)\n\t\t\t\t\t\t\tthis.volumeMax = volume;\n\t\t\t\t\t\tthis.volumes.push({timestamp: Date.now(), volume: volume});\n\t\t\t\t\t\t// this.renderCanvas();\n\n\t\t\t\t\t\tthis.statusRef.current.innerHTML = this.durationString(Date.now() - this.recordingStart);\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tthis.volumes = null;\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tif (Date.now() - this.recordingStart >= MAX_RECORD_LENGTH * 1000)\n\t\t\t\t\t\t\tthis.stopStream(true);\n\t\t\t\t\t}, MAX_RECORD_LENGTH * 1000);\n\t\t\t\t}\n\n\t\t\t\tthis.startCanvasRendering();\n      \t\t})\n      \t\t.catch((err) => {\n      \t\t\tconsole.error(err);\n      \t\t\tthis.setState({\n      \t\t\t\tstatusClass: 'error',\n      \t\t\t\tstatus: 'Failed to access microphone: ' + (err+'')\n      \t\t\t})\n      \t\t})\n\t}\n\tstartCanvasRendering() {\n\t\tthis.canvasRendering = true;\n\t\tthis.renderCanvas(true);\n\t}\n\tstopCanvasRendering() {\n\t\tthis.canvasRendering = false;\n\t}\n\n\tstopStream(send) {\n\t\tif (this.stream === null)\n\t\t\treturn;\n\t\tif (send) {\n\t\t\tthis.recorder.onstop = () => {\n\t\t\t\tlet blob = new Blob(this.chunks, { 'type' : this.recorder.mimeType });\n\t\t\t\tthis.callback({type: 'audio', value: blob});\n\t\t\t}\n\t\t}\n\t\tthis.recorder.stop();\n\t\tthis.stopCanvasRendering();\n\t\tthis.stream.getTracks().forEach(function (track) {\n\t\t\ttrack.stop();\n\t\t});\n\t\tthis.stream = null;\n\t}\n\tdurationString(millis) {\n\t\tlet sec = Math.floor(millis / 1000);\n\t\tlet min = Math.floor(sec / 60);\n\t\tsec = sec % 60;\n\n\t\treturn this.addZeros(min) + ':' + this.addZeros(sec);\n\t}\n\taddZeros(str, n) {\n\t\tif (typeof n === 'undefined')\n\t\t\tn = 2;\n\t\tif (typeof str !== 'string')\n\t\t\tstr = str + '';\n\t\tif (str.length >= n)\n\t\t\treturn str;\n\t\treturn '0'.repeat(n-str.length) + str;\n\t}\n\n\tonCloseClick() {\n\t\tthis.setState({type: 'text'});\n\t\tthis.stopStream(false);\n\n\t\tthis.volumes = null;\n\t\tthis.volumeMax = 0;\n\n\t}\n\n\tonInputChange() {\n\t\tthis.updClassName();\n\t}\n\n\tsend() {\n\t\tif (this.state.type === 'text') {\n\t\t\tlet value = this.inputRef.current.value.trim();\n\t\t\tif (value.length > 0) \n\t\t\t\tthis.callback({type: 'text', value: value});\n\t\t} else {\n\t\t\tif (this.stream !== null)\n\t\t\t\tthis.stopStream(true);\n\t\t}\n\t}\n\n\tcatchEnter(e) {\n\t\tif (e.keyCode == 13 && this.inputDone())\n\t\t\tthis.send();\n\t}\n\n\tinputDone() {\n\t\tlet input = this.inputRef.current, value;\n\t\tif (input != null)\n\t\t\tvalue = input.value;\n\t\telse value = '';\n\n\t\treturn (\n\t\t\t(this.state.type == 'text' && value.length > 0) ||\n\t\t\t(this.state.type == 'mic' && this.audioSupported && this.state.statusClass != 'error')\n\t\t);\n\t}\n\n\tupdClassName() {\n\t\tlet root = ReactDOM.findDOMNode(this);\n\t\tlet inputDiv = root.children[root.children.length - 1];\n\n\t\tlet value = this.inputRef.current.value.trim();\n\t\tinputDiv.className = classes({\n\t\t\tTextOrRecordInput: true,\n\t\t\tcansend: value.length > 0,\n\t\t\tmic: this.state.type === 'mic',\n\t\t\ttext: this.state.type === 'text'\n\t\t});\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"TextOrRecordInputWrapper\">\n\t\t\t\t{\n\t\t\t\t\t!this.audioSupported ?\n\t\t\t\t\t<div className=\"warning\">\n\t\t\t\t\t\t<WarnPic />\n\t\t\t\t\t\t<p>Your browser doesn't support microphone recording.</p>\n\t\t\t\t\t</div> : null\n\t\t\t\t}\n\t\t\t\t<div className={classes({\n\t\t\t\t\t\tTextOrRecordInput: true,\n\t\t\t\t\t\tcansend: this.inputDone(),\n\t\t\t\t\t\tmic: this.state.type === 'mic',\n\t\t\t\t\t\ttext: this.state.type === 'text'\n\t\t\t\t\t})}\n\t\t\t\t\tref={this.inputDivRef}>\n\t\t\t\t\t<div className=\"input-wrapper\">\n\t\t\t\t\t\t<input \n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tplaceholder=\"Write lyrics here or press mic...\"\n\t\t\t\t\t\t\tref={this.inputRef}\n\t\t\t\t\t\t\tonChange={this.onInputChange.bind(this)}\n\t\t\t\t\t\t\tonKeyPress={this.onInputChange.bind(this)}\n\t\t\t\t\t\t\tonKeyUp={this.onInputChange.bind(this)} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={\"status \"+this.state.statusClass} ref={this.statusRef}>{this.state.status}</div>\n\t\t\t\t\t<canvas ref={this.canvasRef}></canvas>\n\t\t\t\t\t<Button \n\t\t\t\t\t\tclassName={\"mic borderless round\" + (!this.audioSupported ? ' hidden' : '')}\n\t\t\t\t\t\tonClick={this.onMicClick.bind(this)}>\n\t\t\t\t\t\t<MicPic />\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tclassName=\"close borderless round\"\n\t\t\t\t\t\tonClick={this.onCloseClick.bind(this)}>\n\t\t\t\t\t\t<ClosePic />\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tclassName=\"send borderless round\"\n\t\t\t\t\t\tonClick={this.send.bind(this)}>\n\t\t\t\t\t\t<SendPic />\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default TextOrRecordInput;","import React from 'react';\n\nimport TextOrRecordInput from '../../Components/TextOrRecordInput/TextOrRecordInput';\nimport { Redirect } from 'react-router-dom';\n\nclass IndexPage extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {};\n\t}\n\n\trender() {\n\t\tif (this.state.redirect)\n\t\t\treturn <Redirect to={{\n\t\t\t\tpathname: '/guess',\n\t\t\t\tstate: this.state.redirect\n\t\t\t}} />;\n\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<p>Akinator tries to recognize and guess what song you are trying to find. You are welcome to type lyrics or hum song's rythm in microphone.</p>\n\t\t\t\t<TextOrRecordInput onSelect={(input) => {\n\t\t\t\t\tthis.setState({redirect: input});\n\t\t\t\t}} />\n\t\t\t</div>\n\t\t);\t\n\t}\n}\nexport default IndexPage;","import React from 'react';\nimport './Loading.css';\n\nfunction classes(obj) {\n\tlet res = [];\n\tfor (let key in obj)\n\t\tif (obj[key])\n\t\t\tres.push(key)\n\treturn res.join(' ');\n}\n\nexport default function (props) {\n\treturn <div className={classes({\n\t\tloading: true,\n\t\tinline: props.inline\n\t})}></div>\n}","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z\"\n});\n\nvar SvgMusic = function SvgMusic(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgMusic, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/music.03ec63b4.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react';\nimport './MediaLink.css';\n\nfunction capitilize(str) {\n\tstr = str.replace(/_/g, ' ');\n\tstr = str.trim();\n\treturn str.slice(0, 1).toUpperCase() + str.slice(1);\n}\n\nexport default function (props) {\n\tlet img = false;\n\tif ((['apple_music', 'spotify', 'genius', 'soundcloud', 'youtube', 'deezer']).indexOf(props.social) >= 0)\n\t\timg = true;\n\tlet size = props.size || 'small';\n\treturn (\n\t\t<a className={\"media-link \" + size} href={props.link || props.href}>\n\t\t\t{img ? \n\t\t\t\t<div style={{backgroundImage: 'url(/social/'+size+\"/\"+props.social+\".svg)\"}} /> : \n\t\t\t\tcapitilize(props.social)\n\t\t\t}\n\t\t</a>\n\t);\n}","import React from 'react';\n\nimport './Widget.css';\n\nconst available = {\n\t'youtube': (media) => {\n\t\tlet id = media.url.match(/^(?:https?\\:)?(?:\\/\\/)?(?:www\\.)?youtu\\.?be(?:\\.com)?\\/(?:watch\\?v=)?([A-Za-z0-9_-]{11})/);\n\t\tif (id === null || id.length < 1)\n\t\t\treturn null;\n\t\tid = id[1];\n\t\treturn <iframe type=\"text/html\" className=\"youtube-widget\"\n  \t\t\t\tsrc={\"http://www.youtube.com/embed/\"+id+\"?enablejsapi=1\"}\n  \t\t\t\tframeborder=\"0\"></iframe>;\n\t},\n\t'deezer': (media) => {\n\t\tlet id = media.url.match(/^(?:http?\\:)?(?:\\/\\/)?(?:www\\.)?deezer\\.com\\/track\\/(\\d+)(?:\\?.+)?(?:\\#.+)?$/);\n\t\tif (id === null || id.length < 1)\n\t\t\treturn null;\n\t\tid = id[1];\n\n\t\treturn <iframe\n\t\t\t\t\tscrolling=\"no\"\n\t\t\t\t\tframeborder=\"0\"\n\t\t\t\t\tallowTransparency=\"true\"\n\t\t\t\t\tsrc={\"https://www.deezer.com/plugins/player?format=classic&autoplay=false&playlist=true&width=700&height=350&color=E08000&layout=&size=medium&type=tracks&app_id=1&id=\"+id} \n\t\t\t\t\twidth=\"700\" \n\t\t\t\t\theight=\"350\"></iframe>;\n\t}\n};\n\nexport default function (props) {\n\tlet track = props.track || props.data;\n\n\tif (track.media === null || track.media.length === 0)\n\t\treturn null;\n\t\n\tfor (let social in available) {\n\t\tfor (let i = 0; i < track.media.length; ++i) {\n\t\t\tif (social === track.media[i].provider) {\n\t\t\t\tlet widget = available[social](track.media[i]);\n\t\t\t\tif (widget !== null);\n\t\t\t\t\treturn widget;\n\t\t\t}\n\t\t}\n\t}\n\treturn null;\n}","import React from 'react';\n\nimport { ReactComponent as MusicPic } from './music.svg';\nimport MediaLink from '../MediaLink/MediaLink';\nimport Widget from \"../Widget/Widget\";\n\nimport './TrackBig.css';\n\nfunction highlightText(text, q) {\n\tif (q == null)\n\t\treturn text;\n\n\tlet lowercaseText = text.toLowerCase();\n\tq = q.toLowerCase().trim();\n\tlet words = q.split(/ /g);\n\n\tlet highlights = [];\n\n\tlet x = 0;\n\tlet minIndex, wordId = -1;\n\tdo {\n\t\tminIndex = -1;\n\t\twordId = -1;\n\t\tfor (let i = 0; i < words.length; ++i) {\n\t\t\tlet index = lowercaseText.indexOf(words[i], x);\n\t\t\tif (index == -1)\n\t\t\t\tcontinue;\n\t\t\tif (minIndex > index || minIndex == -1) {\n\t\t\t\tminIndex = index;\n\t\t\t\twordId = i;\n\t\t\t}\n\t\t}\n\t\tif (wordId == -1 || minIndex == -1) \n\t\t\tbreak;\n\n\t\thighlights.push([minIndex, minIndex + words[wordId].length]);\n\t\tx = minIndex + words[wordId].length + 1;\n\t} while (minIndex != -1);\n\n\tif (highlights.length == 0)\n\t\treturn text;\n\n\t// merge nearby highlights\n\tfor (let i = 0; i < highlights.length - 1; ++i) {\n\t\tlet a = highlights[i],\n\t\t\tb = highlights[i+1];\n\t\tif (a[1] == b[0]) {\n\t\t\thighlights[i][1] = b[1];\n\t\t\thighlights.splice(i+1, 1);\n\t\t\ti--;\n\t\t}\n\t}\n\n\tlet arr = [];\n\tx = 0;\n\tfor (let i = 0; i < highlights.length; ++i) {\n\t\tlet h = highlights[i];\n\t\tif (h[0] > x) {\n\t\t\tarr.push(text.substring(x, h[0]));\n\t\t\tx = h[0];\n\t\t}\n\t\tarr.push(<span className=\"highlight\">{text.substring(h[0], h[1])}</span>);\n\t\tx = h[1];\n\t}\n\tif (x < text.length)\n\t\tarr.push(text.substring(x));\n\treturn arr;\n}\n\nexport default function (props) {\n\tlet track = props.data || props.track;\n\tlet q = props.q || null;\n\n\tlet medias = (track.media || []).map(social => {\n\t\treturn <MediaLink \n\t\t\t\t\thref={social.url||social.uri}\n\t\t\t\t\tsocial={social.provider}\n\t\t\t\t\tkey={social.provider}\n\t\t\t\t\tsize=\"big\" />\n\t});\n\n\treturn (\n\t\t<div className=\"track-wrapper\">\n\t\t\t<div className=\"track-big\">\n\t\t\t\t<div className=\"cover-wrapper\">\n\t\t\t\t\t<div className=\"cover\">\n\t\t\t\t\t\t<div className=\"bg\">\n\t\t\t\t\t\t\t<MusicPic />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{track.cover ? <img src={track.cover} /> : null}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"info\">\n\t\t\t\t\t<div className=\"meta\">\n\t\t\t\t\t\t<h1>{highlightText(track.title, q)}</h1>\n\t\t\t\t\t\t<h2>{highlightText(track.artist, q)}</h2>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"media\">\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t{ medias }\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<Widget track={track} />\n\t\t\t{ track.lyrics !== null ?\n\t\t\t\t<div className=\"lyrics\">\n\t\t\t\t\t<span className=\"header\">Lyrics</span>\n\t\t\t\t\t<span>{highlightText(track.lyrics, q)}</span>\n\t\t\t\t</div>\n\t\t\t\t: null \n\t\t\t}\n\t\t</div>\n\t);\n}","import React from 'react';\nimport './Score.css';\n\nfunction capitilize(str) {\n\tstr = str.replace(/_/g, ' ');\n\tstr = str.trim();\n\treturn str.slice(0, 1).toUpperCase() + str.slice(1);\n}\n\nexport default function (props) {\n\tlet score = props.score || {};\n\n\tlet elements = [];\n\tlet players = Object.keys(score);\n\tfor (let i = 0, x = 0; i < players.length; ++i) {\n\t\telements.push(\n\t\t\t<span key={++x} className=\"player\">\n\t\t\t\t<span className=\"name\">\n\t\t\t\t\t{capitilize(players[i])}\n\t\t\t\t</span>\n\t\t\t\t<span className=\"value\">\n\t\t\t\t\t{score[players[i]]}\n\t\t\t\t</span>\n\t\t\t</span>\n\t\t);\n\n\t\tif (players.length - 1 !== i) {\n\t\t\telements.push(<span key={++x} className=\"separator\">:</span>);\n\t\t}\n\t}\n\treturn <div className=\"score\"><div>{elements}</div></div>;\n}","let temp = {};\nconst getters = [\n\t(name) => JSON.parse(localStorage.getItem(name)),\n\t(name) => {\n\t\tlet matches = document.cookie.match(new RegExp(\n\t\t\t\"(?:^|; )\" + name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, '\\\\$1') + \"=([^;]*)\"\n\t\t));\n\t\treturn matches ? JSON.parse(decodeURIComponent(matches[1])) : null;\n\t},\n\t(name) => temp[name]\n];\nconst setters = [\n\t(name, value) => localStorage.setItem(name, JSON.stringify(value)),\n\t(name, value) => document.cookie = encodeURIComponent(name) + '=' + encodeURIComponent(JSON.stringify(value)),\n\t(name, value) => temp[name] = value\n];\n\nconst Storage = {\n\tget: (name, def) => {\n\t\tlet value = null;\n\t\tfor (let i = 0; i < getters.length; ++i) {\n\t\t\tvalue = getters[i](name);\n\t\t\tif (value != null || typeof value !== 'undefined')\n\t\t\t\tbreak;\n\t\t\telse value = null;\n\t\t}\n\t\tif ((value == null || typeof value === 'undefined') && typeof def !== 'undefined') {\n\t\t\tStorage.set(name, def);\n\t\t\treturn def;\n\t\t} else\n\t\t\treturn value;\n\t},\n\tset: (name, value) => {\n\t\tfor (let i = 0; i < setters.length; ++i)\n\t\t\tsetters[i](name, value);\n\t}\n};\nwindow.Storage = Storage;\nexport default Storage;","import Storage from './Storage';\nimport crc32 from 'crc/crc32';\n\nfunction randomString(n) {\n\tif (typeof n !== 'number')\n\t\tn = 16;\n\tconst q = \"1234567890qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM\";\n\treturn Array.from({length: n}, () => q[Math.round(Math.random() * (q.length-1))]).join('');\n}\nfunction queryToStr(obj) {\n\treturn Object.keys(obj).map(key => encodeURIComponent(key) + '=' + encodeURIComponent(obj[key])).join('&');\n}\nfunction cutObject(keys, obj) {\n\tlet nobj = {};\n\tfor (let i = 0, key; i < keys.length; ++i) {\n\t\tkey = keys[i];\n\t\tif (typeof obj[key] === 'undefined')\n\t\t\tnobj[key] = null;\n\t\telse nobj[key] = obj[key];\n\t}\n\treturn nobj;\n}\n\nlet cache = Storage.get('cache', {});\nfunction updCache() {\n\tfor (let key in cache)\n\t\tif (Date.now() - cache[key].t > 1000 * 60 * 60)\n\t\t\tdelete cache[key];\n}\nconst escapeCORS = 'https://cors-anywhere.herokuapp.com/';\nfunction http(method, url, before, callback, isCORS) {\n\tif (arguments.length === 3) {\n\t\tcallback = before;\n\t\tbefore = undefined;\n\t}\n\n\tlet k = crc32(method + ' ' + url).toString(16);\n\tconsole.log(method, url, '=', k);\n\tif (cache[k] && !before) {\n\t\tcallback(true, cache[k].r);\n\t\treturn;\n\t}\n\n\tlet xhr = new XMLHttpRequest();\n\txhr.open(method, url, true);\n\n\txhr.onreadystatechange = () => {\n\t\tif (xhr.readyState !== 4) return;\n\n\t\tif (xhr.status === 200) {\n\t\t\tlet res = xhr.responseText;\n\t\t\ttry {\n\t\t\t\tres = JSON.parse(res);\n\t\t\t} catch (e) {}\n\n\t\t\tif (!before) {\n\t\t\t\tcache[crc32(method + ' ' + url).toString(16)] = {t: Date.now(), r: res};\n\t\t\t\tupdCache();\n\t\t\t\tStorage.set('cache', cache);\n\t\t\t}\n\n\t\t\tcallback(true, res);\n\t\t} else {\n\t\t\tconsole.warn(\"Failed to send HTTP request: bad status code (\" + xhr.status + \")\");\n\t\t\tcallback(false, \"Bad status code: \" + xhr.status);\n\t\t}\n\t}\n\t// xhr.onerror = (err) => {\n\t// \tif (!isCORS)\n\t// \t\thttp(method, escapeCORS + (url), before, callback, true);\n\t// \telse\n\t// \t\tconsole.log(err);\n\t// }\n\n\tif (isCORS) {\n\t\t// xhr.setRequestHeader(\"Origin\", window.location.href);\n\t\txhr.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\n\t}\n\n\tif (typeof before !== 'function')\n\t\txhr.send();\t\n\telse before(xhr);\n}\n\nclass APIController {\n\tconstructor(type, options) {\n\t\tthis.type = type;\n\t\tthis.options = options;\n\t\tthis.session_id = Storage.get('session', randomString(16));\n\t}\n\tendpoint(name) {\n\t\tlet a = APIController.endpoint[this.type];\n\t\tif (typeof a === 'string')\n\t\t\treturn a;\n\t\tif (typeof a === 'object' && typeof name === 'undefined')\n\t\t\treturn a.audd;\n\t\treturn a[name];\n\t}\n\tquery(type, req) {\n\t\tlet obj = {};\n\t\tif (req.type === 'text')\n\t\t\tobj.q = req.value;\n\n\t\tif (type === 'direct') {\n\t\t\tobj.return = 'timecode,lyrics,apple_music,deezer,spotify';\n\t\t\tobj.api_token = this.options.audd_token;\n\t\t} else\n\t\t\tobj.session = this.session_id;\n\t\treturn obj;\n\t}\n\n\tsimulateAnswer(bool) {\n\t\tlet score = Storage.get('score', {computer: 0, human: 0});\n\t\tscore[bool ? 'computer' : 'human']++;\n\t\tStorage.set('score', score);\n\t\treturn score;\n\t}\n\tsimulateScore() {\n\t\treturn Storage.get('score', {computer: 0, human: 0});\n\t}\n\tsimulateAPIServerResponse(obj) {\n\t\treturn new Promise((resolve, reject) => {\n\n\t\t\tlet response = (result) => {\n\t\t\t\tresolve({\n\t\t\t\t\tresult: result,\n\t\t\t\t\tscore: this.simulateScore\n\t\t\t\t})\n\t\t\t};\n\n\t\t\tif (obj.status !== 'error' && obj.result !== null) {\n\t\t\t\tlet track = obj.result.list ? obj.result.list[0] : obj.result[0];\n\t\t\t\tif (typeof track === 'undefined' || track === null) {\n\t\t\t\t\tresponse(null);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (typeof track.media === 'string')\n\t\t\t\t\ttrack.media = JSON.parse(track.media);\n\t\t\t\tif (track.media)\n\t\t\t\t\ttrack.media = track.media.map(cutObject.bind(this, ['provider', 'url']));\n\n\t\t\t\tlet promises = [\n\t\t\t\t\tthis.geniusSearch(track),\n\t\t\t\t\tthis.deezerSearch(track)\n\t\t\t\t];\n\t\t\t\tPromise.all(promises)\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tresponse(cutObject(['title', 'media', 'artist', 'lyrics', 'cover'], track));\n\t\t\t\t\t});\n\t\t\t} else\n\t\t\t\tresponse(null)\n\t\t});\n\t}\n\n\tputMediaToTrack(track, media) {\n\t\tif (!Array.isArray(track.media))\n\t\t\ttrack.media = [];\n\t\t\n\t\tif (track.media.map(m => m.provider).indexOf(media.provider) < 0)\n\t\t\ttrack.media.push(media);\n\t}\n\tputGeniusData(data, track) {\n\t\tif (data.path) {\n\t\t\tthis.putMediaToTrack(track, {provider: 'genius', url: \"https://genius.com\" + data.path});\n\t\t}\n\t\tif (data.media) {\n\t\t\tfor (let i = 0; i < data.media.length; ++i)\n\t\t\t\tthis.putMediaToTrack(track, data.media[i]);\n\t\t}\n\t\tif (data.song_art_image_url)\n\t\t\ttrack.cover = data.song_art_image_url;\n\t\tif (!track.song_id && data.id)\n\t\t\ttrack.song_id = data.id;\n\t}\n\tprobablyEqual(a, b) {\n\t\tlet len = Math.min(a.length, b.length);\n\t\treturn a.toLowerCase().trim().substring(0, len) === b.toLowerCase().trim().substring(0, len);\n\t}\n\tgeniusSearch(track) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tlet url = this.endpoint('genius');\n\t\t\tif (track.song_id)\n\t\t\t\turl += 'songs/' + track.song_id + '?access_token=' + this.options.genius_token;\n\t\t\telse \n\t\t\t\turl += 'search?' + queryToStr({q: track.artist + ' ' + track.title, access_token: this.options.genius_token});\n\n\t\t\thttp('GET', url,\n\t\t\t\t(status, data) => {\n\t\t\t\t\tif (status && data.response && data.response.hits) {\n\t\t\t\t\t\tlet appropriate = null;\n\t\t\t\t\t\tfor (let i = 0; i < data.response.hits.length; ++i) {\n\t\t\t\t\t\t\tlet hit = data.response.hits[i];\n\t\t\t\t\t\t\tif (hit.result && \n\t\t\t\t\t\t\t\thit.result.title &&\n\t\t\t\t\t\t\t\thit.result.primary_artist.name &&\n\t\t\t\t\t\t\t\tthis.probablyEqual(hit.result.title, track.title) &&\n\t\t\t\t\t\t\t\tthis.probablyEqual(hit.result.primary_artist.name, track.artist)) {\n\t\t\t\t\t\t\t\tappropriate = hit.result;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (appropriate !== null) {\n\t\t\t\t\t\t\tthis.putGeniusData(appropriate, track);\n\t\t\t\t\t\t\tif (track.song_id) {\n\t\t\t\t\t\t\t\tthis.geniusSearch(track)\n\t\t\t\t\t\t\t\t\t.then(resolve)\n\t\t\t\t\t\t\t\t\t.catch(reject);\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (status && data.response && data.response.song) {\n\t\t\t\t\t\tthis.putGeniusData(data.response.song, track);\n\t\t\t\t\t}\n\t\t\t\t\tresolve();\n\t\t\t\t}\n\t\t\t);\n\t\t});\n\t}\n\tdeezerSearch(track) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\thttp('GET', escapeCORS + this.endpoint('deezer') + 'search?' + queryToStr({\n\t\t\t\tq: \"track:\\\"\"+track.title+\"\\\" artist:\\\"\"+track.artist+\"\\\"\",\n\t\t\t\tstrict: \"on\"\n\t\t\t}), (x) => x.send(), (status, data) => {\n\t\t\t\tif (status && data.data && data.data.length > 0) {\n\t\t\t\t\tdata = data.data[0];\n\t\t\t\t\tif (data.link) {\n\t\t\t\t\t\tthis.putMediaToTrack(track, {provider: 'deezer', url: data.link});\n\t\t\t\t\t}\n\n\t\t\t\t\tif (data.album && data.album.cover_big)\n\t\t\t\t\t\ttrack.cover = data.album.cover_big;\n\t\t\t\t\telse if (data.artist && data.artist.picture_big)\n\t\t\t\t\t\ttrack.cover = data.artist.picture_big;\n\t\t\t\t}\n\t\t\t\tresolve();\n\t\t\t}, true);\n\t\t})\n\t}\n\n\n\tsendAnswer(bool) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tif (this.type === 'backend') {\n\t\t\t\thttp('POST', \n\t\t\t\t\t this.endpoint() +\n\t\t\t\t\t APIController.path[this.type][bool],\n\t\t\t\t\t (status, data) => {\n\t\t\t\t\t \t(status ? resolve : reject)(data);\n\t\t\t\t\t }\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tresolve(this.simulateAnswer(bool));\n\t\t\t}\n\t\t})\n\t}\n\n\tsend(requestObject) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tlet url = this.endpoint() + \n\t\t\t\t\t  APIController.path[this.type][requestObject.type] + \n\t\t\t\t\t  '?' + queryToStr(this.query(this.type, requestObject));\n\t\t\tlet xhr = new window.XMLHttpRequest();\n\t\t\txhr.open('POST', url, true);\n\t\t\tlet onResponse = (status, data) => {\n\t\t\t\tif (!status) {\n\t\t\t\t\treject(data);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (this.type === 'direct') {\n\t\t\t\t\tthis.simulateAPIServerResponse(data)\n\t\t\t\t\t\t.then(resolve)\n\t\t\t\t\t\t.catch(reject);\n\t\t\t\t} else\n\t\t\t\t\tresolve(data);\n\t\t\t};\n\t\t\tif (requestObject.type === 'text' && this.type === 'direct')\n\t\t\t\thttp('POST', url, onResponse);\n\t\t\telse {\n\t\t\t\thttp('POST', url, (xhr) => {\n\t\t\t\t\tif (requestObject.type === 'audio') {\n\t\t\t\t\t\tlet data = new window.FormData();\n\t\t\t\t\t\tdata.append(\"file\", requestObject.value);\n\t\t\t\t\t\twindow.data = data;\n\t\t\t\t\t\txhr.send(data);\n\t\t\t\t\t} else if (requestObject.type === 'text') {\n\t\t\t\t\t\txhr.send();\n\t\t\t\t\t}\n\t\t\t\t}, onResponse);\n\t\t\t}\n\t\t});\n\t}\n}\nAPIController.endpoint = {\n\t'direct': {\n\t\taudd: 'https://api.audd.io/', \n\t\tgenius: 'https://api.genius.com/', \n\t\tdeezer: 'https://api.deezer.com/'\n\t},\n\t'backend': process.env.REACT_APP_API_BACKEND_ENDPOINT\n\t// backend: \"http://localhost:9333/\"\n};\nAPIController.path = {\n\t'direct': {\n\t\t// audd.io\n\t\t'audio': 'recognizeWithOffset/',\n\t\t'text': 'findLyrics/',\n\t},\n\t'backend': {\n\t\t'audio': 'humming',\n\t\t'text': 'lyrics',\n\n\t\t'true': 'right',\n\t\t'false': 'wrong'\n\t}\n};\n\nlet api;\nif (window.location.hash === '#local')\n\tapi = new APIController('backend');\nelse\n\tapi = new APIController(process.env.REACT_APP_API_TYPE, {\n\t\taudd_token: process.env.REACT_APP_AUDD_TOKEN,\n\t\tgenius_token: process.env.REACT_APP_GENIUS_TOKEN\n\t});\nwindow.api = api;\nexport default api;","import React from 'react';\n\nimport { Redirect } from 'react-router-dom';\n\nimport Loading from '../../Components/Loading/Loading';\nimport Button from '../../Components/Button/Button';\nimport TrackBig from '../../Components/TrackBig/TrackBig';\nimport Score from './Score';\n\nimport API from '../../Controllers/APIController';\n\n\nclass GuessPage extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {voted: false};\n\n\t\tif (this.props.location.state) {\n\t\t\tlet state = this.props.location.state;\n\t\t\tif (state.type === 'text')\n\t\t\t\tthis.state.q = state.value;\n\t\t\tthis.state.loading = true;\n\n\t\t\tAPI.send(state)\n\t\t\t   .then((res) => {\n\t\t\t   \t\tthis.setState({\n\t\t\t   \t\t\tloading: false, \n\t\t\t   \t\t\ttrack: res.result,\n\t\t\t   \t\t\tvoted: res.result == null ? true : false,\n\t\t\t   \t\t\tscore: res.score\n\t\t\t   \t\t});\n\t\t\t   \t\tif (res.result == null)\n\t\t\t   \t\t\tthis.vote(false);\n\t\t\t   })\n\t\t\t   .catch((error) => {\n\t\t\t   \t\tthis.setState({loading: false, error: error});\n\t\t\t   })\n\t\t}\n\t}\n\n\tvote(bool) {\n\t\tthis.setState({voted: true});\n\t\tAPI.sendAnswer(bool)\n\t\t    .then((newScore) => {\n\t\t    \tthis.setState({score: newScore})\n\t\t    });\n\t}\n\n\trender() {\n\n\t\tif (this.props.location.state === null) {\n\t\t\treturn <Redirect to='/' />;\n\t\t}\n\n\t\tif (this.state.loading)\n\t\t\treturn <div>\n\t\t\t\t\t<p className=\"center\">Searching your track...</p>\n\t\t\t\t\t<Loading />\n\t\t\t\t   </div>;\n\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t{/*!this.state.voted ? \n\t\t\t\t\t<div className=\"voting\">\n\t\t\t\t\t\t<p>Have I guessed right?</p>\n\t\t\t\t\t\t<Button onClick={this.vote.bind(this, true)}>Right!</Button>\n\t\t\t\t\t\t<Button onClick={this.vote.bind(this, false)}>No...</Button>\n\t\t\t\t\t</div> : null\n\t\t\t\t*/}\n\t\t\t\t{this.state.track ? \n\t\t\t\t\t<TrackBig data={this.state.track} q={this.state.q} /> :\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<p className=\"center\">Unfortunately, we didn't find any track. You won this round.</p>\n\t\t\t\t\t\t<Score score={this.state.score} />\n\t\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default GuessPage;","import React from 'react';\n\nexport default function () {\n\treturn (\n\t\t<div>\n\t\t\t<p>404!</p>\n\t\t</div>\n\t);\n}","import React from 'react';\n\nimport { BrowserRouter as Router } from \"react-router-dom\";\nimport { Switch, Route, Link, withRouter } from \"react-router-dom\";\nimport { TransitionGroup, CSSTransition } from \"react-transition-group\";\n\nimport Button from './Components/Button/Button';\n\nimport { ReactComponent as BackPic } from \"./back.svg\";\n\nimport IndexPage from './Pages/IndexPage/IndexPage';\nimport GuessPage from './Pages/GuessPage/GuessPage';\nimport _404Page from './Pages/404Page/404Page';\n\nimport './App.css';\n\n// for header animation\nfunction updHeaderClassName() {\n\tdocument.querySelector(\"#header\").className = window.location.pathname == '/' ? 'index' : '';\n}\n\nclass Content extends React.Component {\n\tcomponentWillMount() {\n\t\tthis.unlisten = this.props.history.listen((location, action) => {\n\t\t\tupdHeaderClassName();\n\t\t});\n\t}\n\tcomponentWillUnmount() {\n\t\tthis.unlisten();\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<div id=\"content\">\n\t\t\t\t<TransitionGroup className=\"transition-group\">\n\t\t\t\t\t<CSSTransition\n\t\t\t          key={this.props.location.key}\n\t\t\t          timeout={{ enter: 150, exit: 150 }}\n\t\t\t          classNames=\"fade\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<section className=\"route-section\">\n\t\t\t\t\t\t\t<Switch location={this.props.location}>\n\t\t\t\t\t\t\t\t<Route path=\"/\" exact component={IndexPage} />\n\t\t\t\t\t\t\t\t<Route path=\"/guess/\" component={GuessPage} />\n\t\t\t\t\t\t\t\t<Route component={_404Page} />\n\t\t\t\t\t\t\t</Switch>\n\t\t\t\t\t\t</section>\n\t\t\t\t\t</CSSTransition>\n\t\t\t\t</TransitionGroup>\n\t\t\t</div>\n\t\t);\n\t}\n}\nconst ContentComponent = withRouter(Content);\n\nexport default function () {\n\treturn (\n\t\t<div id=\"container\">\n\t\t\t<Router>\n\t\t\t\t<Link \n\t\t\t\t\tid=\"header\" \n\t\t\t\t\tclassName={window.location.pathname == '/' ? 'index' : ''}\n\t\t\t\t\tto=\"/\">\n\t\t\t\t\t<Button round className=\"borderless\" to=\"/\">\n\t\t\t\t\t\t<BackPic />\n\t\t\t\t\t</Button>\n\t\t\t\t\t<h1>Musical Akinator</h1>\n\t\t\t\t</Link>\n\t\t\t\t<ContentComponent />\n\t\t\t</Router>\n\t\t</div>\n\t);\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n\t<App />,\n\tdocument.getElementById('root')\n);"],"sourceRoot":""}