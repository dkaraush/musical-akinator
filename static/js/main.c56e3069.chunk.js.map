{"version":3,"sources":["Components/Button/Button.jsx","back.svg","Components/TextOrRecordInput/mic.svg","Components/TextOrRecordInput/close.svg","Components/TextOrRecordInput/send.svg","Components/TextOrRecordInput/warn.svg","Components/TextOrRecordInput/TextOrRecordInput.jsx","Pages/IndexPage/IndexPage.jsx","Components/Loading/Loading.jsx","Components/TrackBig/music.svg","Components/MediaLink/MediaLink.jsx","Components/Widgets/Widgets.jsx","Components/TrackBig/TrackBig.jsx","Pages/GuessPage/Score.jsx","Controllers/Storage.js","Controllers/APIController.js","Pages/GuessPage/GuessPage.jsx","Pages/404Page/404Page.jsx","App.jsx","index.js"],"names":["Button","props","enterHandler","onEnter","bind","state","disabled","element","event","this","rect","getBoundingClientRect","x","clientX","left","y","clientY","top","R","Math","max","sqrt","pow","width","height","ripple","document","createElement","className","style","position","transition","borderRadius","opacity","id","Date","now","setTimeout","append","ripples","querySelectorAll","i","start","parseInt","substring","remove","length","ReactDOM","findDOMNode","overflow","down","_down","up","_up","addEventListener","body","enter","window","removeEventListener","nextProps","setState","keyCode","ctrlKey","metaKey","onClick","to","location","href","invert","redirect","children","React","Component","_extends","Object","assign","target","arguments","source","key","prototype","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_ref2","d","fill","_ref3","_ref","svgRef","title","viewBox","ref","ForwardRef","forwardRef","LinkedList","tail","val","next","classes","obj","filter","join","TextOrRecordInput","canvasRendering","audioSupported","MediaRecorder","navigator","getUserMedia","mediaDevices","context","stream","processor","analyser","recorder","chunks","recordingStart","volumes","volumeMax","inputDivRef","createRef","statusRef","canvasRef","inputRef","type","status","statusClass","onResize","resizeCanvas","onKeyPress","catchEnter","callback","onSelect","root","current","canvas","clientWidth","devicePixelRatio","clientHeight","renderCanvas","loop","ctx","getContext","requestAnimationFrame","W","H","clearRect","calculateCoordinates","node","w","h","timestamp","volume","beginPath","moveTo","lineTo","first","last","coordinates","closePath","lineWidth","lineCap","strokeStyle","fillStyle","stroke","audio","video","then","AudioContext","webkitAudioContext","ondataavailable","e","push","data","createAnalyser","createMediaStreamSource","createScriptProcessor","connect","destination","durationString","onaudioprocess","MAX_RECORD_LENGTH","stopStream","fftSize","bufferLength","frequencyBinCount","dataArray","Uint8Array","getByteFrequencyData","sum","innerHTML","startCanvasRendering","micError","catch","err","send","onstop","blob","Blob","mimeType","value","stop","stopCanvasRendering","getTracks","forEach","track","millis","sec","floor","min","addZeros","str","n","repeat","updClassName","trim","inputDone","input","inputDiv","cansend","mic","text","protocol","placeholder","onChange","onInputChange","onKeyUp","onMicClick","onCloseClick","IndexPage","pathname","res","loading","inline","img","social","size","link","backgroundImage","replace","slice","toUpperCase","widgets","media","url","match","src","frameBorder","console","log","scrolling","allowtransparency","allow","encodeURIComponent","multiple","result","provider","widget","highlightText","q","minIndex","lowercaseText","toLowerCase","words","split","highlights","wordId","index","a","b","splice","arr","j","medias","map","uri","cover","artist","lyrics","score","elements","players","temp","getters","name","JSON","parse","localStorage","getItem","matches","cookie","RegExp","decodeURIComponent","setters","setItem","stringify","Storage","get","def","set","queryToStr","cutObject","nobj","cache","updCache","t","http","method","before","isCORS","undefined","k","crc32","toString","xhr","XMLHttpRequest","open","onreadystatechange","readyState","responseText","r","warn","setRequestHeader","api","APIController","options","session_id","Array","from","round","random","randomString","endpoint","audd","req","return","api_token","audd_token","session","bool","computer","human","Promise","resolve","reject","response","simulateScore","list","promises","geniusSearch","deezerSearch","all","isArray","m","path","putMediaToTrack","song_art_image_url","song_id","len","genius_token","access_token","hits","appropriate","hit","primary_artist","probablyEqual","putGeniusData","song","strict","album","cover_big","picture_big","simulateAnswer","requestObject","query","onResponse","simulateAPIServerResponse","FormData","genius","deezer","process","hash","GuessPage","voted","init","mounted","newState","API","vote","error","sendAnswer","newScore","Content","unlisten","history","listen","action","querySelector","TransitionGroup","CSSTransition","timeout","exit","classNames","exact","component","_404Page","ContentComponent","withRouter","render","getElementById"],"mappings":"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","file":"static/js/main.c56e3069.chunk.js","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './Button.css';\n\nclass Button extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.enterHandler = this.onEnter.bind(this);\n\t\tthis.state = {\n\t\t\tdisabled: props.disabled\n\t\t};\n\t}\n\t\n\t_down(element, event) {\n\t\tif (this.state.disabled)\n\t\t\treturn;\n\t\tlet rect = element.getBoundingClientRect();\n\t\tlet x = (event.clientX - rect.left), y = (event.clientY - rect.top);\n\t\tlet R = Math.max(\n\t\t\t\t\tMath.sqrt(Math.pow(x, 2) + Math.pow(y, 2)),\n\t\t\t\t\tMath.sqrt(Math.pow(x-rect.width, 2) + Math.pow(y, 2)),\n\t\t\t\t\tMath.sqrt(Math.pow(x, 2) + Math.pow(y-rect.height, 2)),\n\t\t\t\t\tMath.sqrt(Math.pow(x-rect.width, 2) + Math.pow(y-rect.height, 2))\n\t\t\t\t);\n\n\t\tlet ripple = document.createElement('div');\n\t\tripple.className = 'ripple';\n\t\tripple.style.position = 'absolute';\n\t\tripple.style.transition = 'all 0.25s cubic-bezier(0.215, 0.61, 0.355, 1)';\n\t\tripple.style.borderRadius = '50%';\n\t\tripple.style.opacity = '1';\n\t\tripple.style.top = y + \"px\";\n\t\tripple.style.left = x + \"px\";\n\t\tripple.style.width = ripple.style.height = '0px';\n\t\tripple.id = 's' + Date.now();\n\t\tsetTimeout(function () {\n\t\t\tripple.style.opacity = '0.75';\n\t\t\tripple.style.top = (y-R) + \"px\";\n\t\t\tripple.style.left = (x-R) + \"px\";\n\t\t\tripple.style.width = ripple.style.height = R*2 + 'px';\n\t\t}, 10);\n\n\t\telement.append(ripple);\n\t}\n\t_up(element, event) {\n\t\tlet ripples = element.querySelectorAll('.ripple');\n\t\tif (ripples == null)\n\t\t\treturn;\n\n\t\tfor (let i = 0; i < ripples.length; ++i) {\n\t\t\tlet ripple = ripples[i];\n\t\t\tlet start = parseInt(ripple.id.substring(1));\n\t\t\tif (Date.now() - start > 250) {\n\t\t\t\tripple.style.opacity = '0';\n\t\t\t\tsetTimeout(ripple.remove.bind(ripple), 250);\n\t\t\t} else {\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\tripple.style.opacity = '0';\n\t\t\t\t\tsetTimeout(ripple.remove.bind(ripple), 250);\n\t\t\t\t}, 250 - (Date.now() - start))\n\t\t\t}\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\tlet element = ReactDOM.findDOMNode(this);\n\t\telement.style.position = 'relative';\n\t\telement.style.overflow = 'hidden';\n\n\t\tthis.down = this._down.bind(this, element);\n\t\tthis.up = this._up.bind(this, element);\n\t\telement.addEventListener('mousedown', this.down);\n\t\tdocument.body.addEventListener('mouseup', this.up);\n\t}\n\tcomponentWillMount() {\n\t\tif (this.props.enter)\n\t\t\twindow.addEventListener('keyup', this.enterHandler);\n\t}\n\tcomponentWillUnmount() {\n\t\tif (this.props.enter)\n\t\t\twindow.removeEventListener('keyup', this.enterHandler);\n\n\t\tdocument.body.removeEventListener('mouseup', this.up);\n\t}\n\tcomponentWillReceiveProps(nextProps) {\n\t\tif (nextProps.disabled !== this.state.disabled)\n\t\t\tthis.setState({ disabled: nextProps.disabled });\n\t}\n\tonEnter(event) {\n\t\tif (event.keyCode === 13 && !event.ctrlKey && !event.metaKey) {\n\t\t\tif (typeof this.props.onClick === 'function' && !this.props.disabled)\n\t\t\t\tthis.props.onClick();\n\t\t}\n\t}\n\n\tredirect(to) {\n\t\tif (this.props.disabled)\n\t\t\treturn;\n\t\twindow.location.href = to;\n\t}\n\n\trender() {\n\t\tlet className = this.props.className || '';\n\t\tif (this.props.invert)\n\t\t\tclassName += ' invert';\n\t\tif (this.state.disabled)\n\t\t\tclassName += ' disabled';\n\t\treturn ( \n\t\t\t<div className={className+' button'} \n\t\t\t\t id={this.props.id} \n\t\t\t\t onClick={(function () {\n\t\t\t\t \tif (this.props.disabled)\n\t\t\t\t \t\treturn;\n\t\t\t\t \t(this.props.to ? this.redirect.bind(this, this.props.to) : this.props.onClick)();\t\n\t\t\t\t }).bind(this)}\n\t\t\t\t style={this.props.style}>\n\t\t\t\t {this.props.children}\n\t\t\t</div> \n\t\t);\n\t}\n}\n\nexport default Button;\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M0 0h24v24H0z\",\n  fill: \"none\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z\"\n});\n\nvar SvgBack = function SvgBack(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgBack, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/back.ac944051.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M0 0h24v24H0z\",\n  fill: \"none\"\n});\n\nvar SvgMic = function SvgMic(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgMic, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/mic.c787772c.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M0 0h24v24H0z\",\n  fill: \"none\"\n});\n\nvar SvgClose = function SvgClose(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgClose, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/close.777b93c6.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"none\",\n  d: \"M0 0h24v24H0z\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z\"\n});\n\nvar SvgSend = function SvgSend(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgSend, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/send.e249914e.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z\"\n});\n\nvar SvgWarn = function SvgWarn(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgWarn, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/warn.e21c6b9d.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { ReactComponent as MicPic } from './mic.svg';\nimport { ReactComponent as ClosePic } from './close.svg';\nimport { ReactComponent as SendPic } from './send.svg';\nimport { ReactComponent as WarnPic } from './warn.svg';\n\nimport Button from '../Button/Button';\nimport './TextOrRecordInput.css';\n\nconst MAX_RECORD_LENGTH = 25; // 25 seconds (audd.io)\n\n\n// VERY simple linked list\nclass LinkedList {\n\tconstructor() {\n\t\tthis.tail = null;\n\t}\n\n\tpush(val) {\n\t\tlet tail = this.tail;\n\t\tthis.tail = Object.assign(val, {\n\t\t\tnext: tail\n\t\t});\n\t}\n}\n\nfunction classes(obj) {\n\treturn Object.keys(obj).filter(key => obj[key]).join(' ');\n}\n\nclass TextOrRecordInput extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.canvasRendering = false;\n\n\t\tthis.audioSupported = typeof MediaRecorder !== 'undefined' && \n\t\t\t(!!navigator.getUserMedia || \n\t\t\t\t(navigator.mediaDevices && !!navigator.mediaDevices.getUserMedia));\n\n\t\tthis.context = null;\n\t\tthis.stream = null;\n\t\tthis.source = null;\n\t\tthis.processor = null;\n\t\tthis.analyser = null;\n\t\tthis.recorder = null;\n\t\tthis.chunks = [];\n\t\tthis.recordingStart = null;\n\n\t\tthis.volumes = null;\n\t\tthis.volumeMax = 0;\n\n\t\tthis.inputDivRef = React.createRef();\n\t\tthis.statusRef = React.createRef();\n\t\tthis.canvasRef = React.createRef();\n\t\tthis.inputRef = React.createRef();\n\n\t\tthis.state = {\n\t\t\ttype: 'text',\n\t\t\tstatus: '',\n\t\t\tstatusClass: ''\n\t\t};\n\n\t\tthis.onResize = this.resizeCanvas.bind(this);\n\t\tthis.onKeyPress = this.catchEnter.bind(this);\n\n\t\tthis.callback = props.onSelect;\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.resizeCanvas();\n\t\twindow.addEventListener('resize', this.onResize);\n\t\twindow.addEventListener('keypress', this.onKeyPress);\n\t}\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener('resize', this.onResize);\n\t\twindow.removeEventListener('keypress', this.onKeyPress);\n\t}\n\n\tresizeCanvas() {\n\t\tlet root = this.inputDivRef.current;\n\t\tlet canvas = this.canvasRef.current;\n\t\tif (canvas == null || root == null)\n\t\t\treturn;\n\n\t\tcanvas.width = root.clientWidth * window.devicePixelRatio;\n\t\tcanvas.height = root.clientHeight * window.devicePixelRatio;\n\t\tthis.renderCanvas(false);\n\t}\n\trenderCanvas(loop) {\n\t\tlet canvas = this.canvasRef.current;\n\t\tif (canvas == null)\n\t\t\treturn;\n\t\tlet ctx = canvas.getContext('2d');\n\n\t\tif (loop) {\n\t\t\tif (!this.canvasRendering)\n\t\t\t\treturn;\n\t\t\trequestAnimationFrame(this.renderCanvas.bind(this, loop));\n\t\t}\n\n\t\tlet W = canvas.width,\n\t\t\tH = canvas.height;\n\n\t\tctx.clearRect(0, 0, W, H);\n\t\tif (this.recordingStart === null)\n\t\t\treturn;\n\n\t\tlet calculateCoordinates = (function (node, w, h) {\n\t\t\treturn {\n\t\t\t\tx: (node.timestamp - this.recordingStart) / (MAX_RECORD_LENGTH * 1000) * w,\n\t\t\t\ty: (1 - node.volume / this.volumeMax) * h\n\t\t\t};\n\t\t}).bind(this);\n\n\t\tctx.beginPath();\n\t\tif (this.volumes == null) {\n\t\t\tctx.moveTo(0, H + 10);\n\t\t\tctx.lineTo(0, H/2);\n\t\t\tctx.lineTo((Date.now() - this.recordingStart) / (MAX_RECORD_LENGTH * 1000) * W, H/2);\n\t\t\tctx.lineTo((Date.now() - this.recordingStart) / (MAX_RECORD_LENGTH * 1000) * W, H + 10);\n\t\t} else {\n\t\t\tlet node = this.volumes.tail, first = null, last = null;\n\t\t\twhile (node != null) {\n\t\t\t\tlet coordinates = calculateCoordinates(node, W, H);\n\t\t\t\tif (first == null)\n\t\t\t\t\tfirst = coordinates;\n\t\t\t\tctx.lineTo(coordinates.x, coordinates.y);\n\t\t\t\tlast = coordinates;\n\t\t\t\tnode = node.next;\n\t\t\t}\n\t\t\tif (first != null && last != null) {\n\t\t\t\tctx.lineTo(0, last.y);\n\t\t\t\tctx.lineTo(0, H + 10);\n\t\t\t\tctx.lineTo(first.x, H + 10);\n\t\t\t}\n\t\t}\n\t\tctx.closePath();\n\n\t\tctx.lineWidth = window.devicePixelRatio * 1.5;\n\t\tctx.lineCap = 'round';\n\t\tctx.strokeStyle = '#1976d2';\n\t\tctx.fillStyle = '#90caf9';\n\t\tctx.stroke();\n\t\tctx.fill();\n\t}\n\n\tonMicClick() {\n\t\tthis.setState({type: 'mic'});\n\t\tlet getUserMedia = (navigator.mediaDevices ? navigator.mediaDevices.getUserMedia : null) || navigator.getUserMedia;\n\t\tif (!getUserMedia) {\n\t\t\tthis.micError('getUserMedia() is not accessible');\n\t\t\treturn;\n\t\t}\n\n\t\tnavigator.mediaDevices.getUserMedia({ audio: true, video: false })\n      \t\t.then((stream) => {\n      \t\t\tthis.stream = stream;\n\n      \t\t\tlet AudioContext = window.AudioContext\n\t\t\t\t\t\t\t\t\t|| window.webkitAudioContext\n\t\t\t\t\t\t\t\t\t|| false;\n\n\t\t\t\tif (!this.audioSupported) {\n\t\t\t\t\tthis.micError('Your browser doesn\\'t support audio recording');\n\t      \t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.chunks = [];\n\t\t\t\tthis.recorder = new MediaRecorder(this.stream);\n\t\t\t    this.recorder.ondataavailable = (function (e) {\n\t\t\t    \tthis.chunks.push(e.data);\n\t\t\t    }).bind(this);\n\t\t\t\tthis.recorder.start();\n\t\t\t\tthis.recordingStart = Date.now();\n\n\t\t\t\tif (AudioContext) {\n\n\t      \t\t\tthis.context = new AudioContext();\n\t\t\t\t\tthis.analyser = this.context.createAnalyser();\n\t\t\t\t    this.source = this.context.createMediaStreamSource(this.stream);\n\t\t\t\t    this.processor = this.context.createScriptProcessor(1024, 1, 1);\n\n\t\t\t\t\tthis.volumes = new LinkedList();\n\t\t\t\t\tthis.volumeMax = 0;\n\n\t\t\t\t\tthis.source.connect(this.analyser);\n\t\t\t\t\tthis.analyser.connect(this.processor);\n\t\t\t\t\tthis.processor.connect(this.context.destination);\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tstatusClass: 'info', \n\t\t\t\t\t\tstatus: this.durationString(Date.now() - this.recordingStart)\n\t\t\t\t\t});\n\t\t\t\t\tthis.processor.onaudioprocess = (e) => {\n\t\t\t\t\t\tif (this.stream === null || this.state.type !== 'mic' || this.volumes === null)\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\tif (Date.now() - this.recordingStart > MAX_RECORD_LENGTH * 1000) {\n\t\t\t\t\t\t\tthis.stopStream(true);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.analyser.fftSize = 2048;\n\t\t\t\t\t\tlet bufferLength = this.analyser.frequencyBinCount;\n\t\t\t\t\t\tlet dataArray = new Uint8Array(bufferLength);\n\n\t\t\t\t\t\tthis.analyser.getByteFrequencyData(dataArray);\n\n\t\t\t\t\t\tlet sum = 0;\n\t\t\t\t\t\tfor (let i = 0; i < bufferLength; ++i)\n\t\t\t\t\t\t\tsum += dataArray[i];\n\n\t\t\t\t\t\tlet volume = (sum / bufferLength);\n\t\t\t\t\t\tif (volume > this.volumeMax)\n\t\t\t\t\t\t\tthis.volumeMax = volume;\n\t\t\t\t\t\tthis.volumes.push({timestamp: Date.now(), volume: volume});\n\n\t\t\t\t\t\tthis.statusRef.current.innerHTML = this.durationString(Date.now() - this.recordingStart);\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tthis.volumes = null;\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tif (Date.now() - this.recordingStart >= MAX_RECORD_LENGTH * 1000)\n\t\t\t\t\t\t\tthis.stopStream(true);\n\t\t\t\t\t}, MAX_RECORD_LENGTH * 1000);\n\t\t\t\t}\n\n\t\t\t\tthis.startCanvasRendering();\n      \t\t})\n      \t\t.catch((err) => {\n      \t\t\tthis.micError(err);\n      \t\t})\n\t}\n\tmicError(err) {\n\t\tthis.setState({\n\t\t\tstatusClass: 'error',\n\t\t\tstatus: 'Failed to access microphone: ' + (err+'')\n\t\t});\n\t\tthis.recordingStart = null;\n\t\tthis.renderCanvas(false);\n\t\tthis.stream = null;\n\t}\n\tstartCanvasRendering() {\n\t\tthis.canvasRendering = true;\n\t\tthis.renderCanvas(true);\n\t}\n\tstopCanvasRendering() {\n\t\tif (!this.canvasRendering)\n\t\t\tthis.renderCanvas(false); // render last time\n\t\tthis.canvasRendering = false;\n\t}\n\n\tstopStream(send) {\n\t\tif (this.stream === null)\n\t\t\treturn;\n\t\tif (send) {\n\t\t\tthis.recorder.onstop = () => {\n\t\t\t\tlet blob = new Blob(this.chunks, { 'type' : this.recorder.mimeType });\n\t\t\t\tthis.callback({type: 'audio', value: blob});\n\t\t\t}\n\t\t}\n\t\tthis.recorder.stop();\n\t\tthis.stopCanvasRendering();\n\t\tthis.stream.getTracks().forEach(function (track) {\n\t\t\ttrack.stop();\n\t\t});\n\t\tthis.stream = null;\n\t}\n\tdurationString(millis) {\n\t\tlet sec = Math.floor(millis / 1000);\n\t\tlet min = Math.floor(sec / 60);\n\t\tsec = sec % 60;\n\n\t\treturn this.addZeros(min) + ':' + this.addZeros(sec);\n\t}\n\taddZeros(str, n) {\n\t\tif (typeof n === 'undefined')\n\t\t\tn = 2;\n\t\tif (typeof str !== 'string')\n\t\t\tstr = str + '';\n\t\tif (str.length >= n)\n\t\t\treturn str;\n\t\treturn '0'.repeat(n-str.length) + str;\n\t}\n\n\tonCloseClick() {\n\t\tthis.setState({type: 'text'});\n\t\tthis.stopStream(false);\n\n\t\tthis.volumes = null;\n\t\tthis.volumeMax = 0;\n\n\t}\n\n\tonInputChange() {\n\t\tthis.updClassName();\n\t}\n\n\tsend() {\n\t\tif (this.state.type === 'text') {\n\t\t\tlet value = this.inputRef.current.value.trim();\n\t\t\tif (value.length > 0) \n\t\t\t\tthis.callback({type: 'text', value: value});\n\t\t} else {\n\t\t\tif (this.stream !== null)\n\t\t\t\tthis.stopStream(true);\n\t\t}\n\t}\n\n\tcatchEnter(e) {\n\t\tif (e.keyCode == 13 && this.inputDone())\n\t\t\tthis.send();\n\t}\n\n\tinputDone() {\n\t\tlet input = this.inputRef.current, value;\n\t\tif (input != null)\n\t\t\tvalue = input.value;\n\t\telse value = '';\n\n\t\treturn (\n\t\t\t(this.state.type == 'text' && value.length > 0) ||\n\t\t\t(this.state.type == 'mic' && this.audioSupported && this.state.statusClass != 'error')\n\t\t);\n\t}\n\n\tupdClassName() {\n\t\tlet root = ReactDOM.findDOMNode(this);\n\t\tlet inputDiv = root.children[root.children.length - 1];\n\n\t\tlet value = this.inputRef.current.value.trim();\n\t\tinputDiv.className = classes({\n\t\t\tTextOrRecordInput: true,\n\t\t\tcansend: value.length > 0,\n\t\t\tmic: this.state.type === 'mic',\n\t\t\ttext: this.state.type === 'text'\n\t\t});\n\t}\n\n\twarnText() {\n\t\tif (!navigator.getUserMedia && \n\t\t\t\t !navigator.mediaDevices && \n\t\t\t\t !navigator.mediaDevices.getUserMedia &&\n\t\t\t\t window.location.protocol === 'http:')\n\t\t\treturn \"Can't access microphone through http:// protocol (use https)\";\n\t\treturn \"Your browser doesn't support microphone recording.\";\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"TextOrRecordInputWrapper\">\n\t\t\t\t{\n\t\t\t\t\t!this.audioSupported ?\n\t\t\t\t\t<div className=\"warning\">\n\t\t\t\t\t\t<WarnPic />\n\t\t\t\t\t\t<p>this.warnText()</p>\n\t\t\t\t\t</div> : null\n\t\t\t\t}\n\t\t\t\t<div className={classes({\n\t\t\t\t\t\tTextOrRecordInput: true,\n\t\t\t\t\t\tcansend: this.inputDone(),\n\t\t\t\t\t\tmic: this.state.type === 'mic',\n\t\t\t\t\t\ttext: this.state.type === 'text'\n\t\t\t\t\t})}\n\t\t\t\t\tref={this.inputDivRef}>\n\t\t\t\t\t<div className=\"input-wrapper\">\n\t\t\t\t\t\t<input \n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tplaceholder=\"Write lyrics here or press mic...\"\n\t\t\t\t\t\t\tref={this.inputRef}\n\t\t\t\t\t\t\tonChange={this.onInputChange.bind(this)}\n\t\t\t\t\t\t\tonKeyPress={this.onInputChange.bind(this)}\n\t\t\t\t\t\t\tonKeyUp={this.onInputChange.bind(this)} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={\"status \"+this.state.statusClass} ref={this.statusRef}>{this.state.status}</div>\n\t\t\t\t\t<canvas ref={this.canvasRef}></canvas>\n\t\t\t\t\t<Button \n\t\t\t\t\t\tclassName={\"mic borderless round\" + (!this.audioSupported ? ' hidden' : '')}\n\t\t\t\t\t\tonClick={this.onMicClick.bind(this)}>\n\t\t\t\t\t\t<MicPic />\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tclassName=\"close borderless round\"\n\t\t\t\t\t\tonClick={this.onCloseClick.bind(this)}>\n\t\t\t\t\t\t<ClosePic />\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tclassName=\"send borderless round\"\n\t\t\t\t\t\tonClick={this.send.bind(this)}>\n\t\t\t\t\t\t<SendPic />\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default TextOrRecordInput;","import React from 'react';\n\nimport TextOrRecordInput from '../../Components/TextOrRecordInput/TextOrRecordInput';\nimport { Redirect } from 'react-router-dom';\n\nclass IndexPage extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {};\n\t}\n\n\trender() {\n\t\tif (this.state.redirect)\n\t\t\treturn <Redirect to={{\n\t\t\t\tpathname: '/guess',\n\t\t\t\tstate: this.state.redirect\n\t\t\t}} />;\n\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<p>Akinator tries to recognize and guess what song you are trying to find. You are welcome to type lyrics or hum song's rythm in microphone.</p>\n\t\t\t\t<TextOrRecordInput onSelect={(input) => {\n\t\t\t\t\tthis.setState({redirect: input});\n\t\t\t\t}} />\n\t\t\t</div>\n\t\t);\t\n\t}\n}\nexport default IndexPage;","import React from 'react';\nimport './Loading.css';\n\nfunction classes(obj) {\n\tlet res = [];\n\tfor (let key in obj)\n\t\tif (obj[key])\n\t\t\tres.push(key)\n\treturn res.join(' ');\n}\n\nexport default function (props) {\n\treturn <div className={classes({\n\t\tloading: true,\n\t\tinline: props.inline\n\t})}></div>\n}","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z\"\n});\n\nvar SvgMusic = function SvgMusic(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgMusic, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/music.03ec63b4.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react';\nimport './MediaLink.css';\n\nfunction capitilize(str) {\n\tstr = str.replace(/_/g, ' ');\n\tstr = str.trim();\n\treturn str.slice(0, 1).toUpperCase() + str.slice(1);\n}\n\nexport default function (props) {\n\tlet img = false;\n\tif ((['apple_music', 'spotify', 'genius', 'soundcloud', 'youtube', 'deezer']).indexOf(props.social) >= 0)\n\t\timg = true;\n\tlet size = props.size || 'small';\n\treturn (\n\t\t<a className={\"media-link \" + size} href={props.link || props.href}>\n\t\t\t{img ? \n\t\t\t\t<div style={{backgroundImage: 'url(/social/'+size+\"/\"+props.social+\".svg)\"}} /> : \n\t\t\t\tcapitilize(props.social)\n\t\t\t}\n\t\t</a>\n\t);\n}","import React from 'react';\n\nimport './Widgets.css';\n\nconst widgets = {\n\t'youtube': (media) => {\n\t\tlet id = media.url.match(/^(?:https?\\:)?(?:\\/\\/)?(?:www\\.)?youtu\\.?be(?:\\.com)?\\/(?:watch\\?v=)?([A-Za-z0-9_-]{11})/);\n\t\tif (id === null || id.length < 1)\n\t\t\treturn null;\n\t\tid = id[1];\n\t\treturn <iframe\n\t\t\t\t\tkey=\"youtube\"\n\t\t\t\t\ttype=\"text/html\"\n\t\t\t\t\tclassName=\"youtube-widget\"\n  \t\t\t\t\tsrc={\"http://www.youtube.com/embed/\"+id+\"?enablejsapi=1\"}\n  \t\t\t\t\tframeBorder=\"0\"></iframe>;\n\t},\n\t'deezer': (media) => {\n\t\tlet id = media.url.match(/^(?:https?\\:)?(?:\\/\\/)?(?:www\\.)?deezer\\.com\\/track\\/(\\d+)(?:\\?.+)?(?:\\#.+)?$/);\n\t\tconsole.log(id);\n\t\tif (id === null || id.length < 1)\n\t\t\treturn null;\n\t\tid = id[1];\n\n\t\treturn <iframe\n\t\t\t\t\tkey=\"deezer\"\n\t\t\t\t\tclassName=\"deezer-widget\"\n\t\t\t\t\tscrolling=\"no\"\n\t\t\t\t\tframeBorder=\"0\"\n\t\t\t\t\tallowtransparency=\"true\"\n\t\t\t\t\tsrc={\"https://www.deezer.com/plugins/player?format=classic&autoplay=false&playlist=true&width=700&height=350&color=E08000&layout=&size=medium&type=tracks&app_id=1&id=\"+id} \n\t\t\t\t\twidth=\"100%\" \n\t\t\t\t\theight=\"95\"></iframe>;\n\t},\n\t'soundcloud': (media) => {\n\t\treturn <iframe\n\t\t\t\t\tkey=\"soundcloud\"\n\t\t\t\t\twidth=\"100%\"\n\t\t\t\t\theight=\"166\"\n\t\t\t\t\tscrolling=\"no\"\n\t\t\t\t\tframeBorder=\"no\" \n\t\t\t\t\tallow=\"autoplay\"\n\t\t\t\t  \tsrc={\"https://w.soundcloud.com/player/?url=\" + encodeURIComponent(media.url)}>\n\t\t\t\t</iframe>;\n\t},\n\t'spotify': (media) => {\n\t\treturn <iframe\n\t\t\t\t\tkey=\"spotify\"\n\t\t\t\t\twidth=\"100%\"\n\t\t\t\t\theight=\"300\"\n\t\t\t\t\tscrolling=\"no\"\n\t\t\t\t\tframeBorder=\"0\"\n\t\t\t\t\tallowtransparency=\"true\"\n\t\t\t\t\tsrc={\"https://open.spotify.com/embed?uri=\" + encodeURIComponent(media.url)}>\n\t\t\t\t</iframe>;\n\t}\n};\n\nexport default function (props) {\n\tlet track = props.track || props.data;\n\tlet multiple = props.multiple || false;\n\n\tif (track.media === null || track.media.length === 0)\n\t\treturn null;\n\n\tlet result = [];\n\tfor (let social in widgets) {\n\t\tfor (let i = 0; i < track.media.length; ++i) {\n\t\t\tif (social === track.media[i].provider) {\n\t\t\t\tlet widget = widgets[social](track.media[i]);\n\t\t\t\tif (widget !== null) {\n\t\t\t\t\tif (!multiple)\n\t\t\t\t\t\treturn widget;\n\t\t\t\t\tresult.push(widget);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\treturn result;\n}","import React from 'react';\n\nimport { ReactComponent as MusicPic } from './music.svg';\nimport MediaLink from '../MediaLink/MediaLink';\nimport Widgets from \"../Widgets/Widgets\";\n\nimport './TrackBig.css';\n\nfunction highlightText(text, q) {\n\tif (q == null)\n\t\treturn text;\n\n\tlet lowercaseText = text.toLowerCase();\n\tq = q.toLowerCase().trim();\n\tlet words = q.split(/ /g);\n\n\tlet highlights = [];\n\n\tlet x = 0;\n\tlet minIndex, wordId = -1;\n\tdo {\n\t\tminIndex = -1;\n\t\twordId = -1;\n\t\tfor (let i = 0; i < words.length; ++i) {\n\t\t\tlet index = lowercaseText.indexOf(words[i], x);\n\t\t\tif (index == -1)\n\t\t\t\tcontinue;\n\t\t\tif (minIndex > index || minIndex == -1) {\n\t\t\t\tminIndex = index;\n\t\t\t\twordId = i;\n\t\t\t}\n\t\t}\n\t\tif (wordId == -1 || minIndex == -1) \n\t\t\tbreak;\n\n\t\thighlights.push([minIndex, minIndex + words[wordId].length]);\n\t\tx = minIndex + words[wordId].length + 1;\n\t} while (minIndex != -1);\n\n\tif (highlights.length == 0)\n\t\treturn text;\n\n\t// merge nearby highlights\n\tfor (let i = 0; i < highlights.length - 1; ++i) {\n\t\tlet a = highlights[i],\n\t\t\tb = highlights[i+1];\n\t\tif (a[1] == b[0]) {\n\t\t\thighlights[i][1] = b[1];\n\t\t\thighlights.splice(i+1, 1);\n\t\t\ti--;\n\t\t}\n\t}\n\n\tlet arr = [];\n\tx = 0;\n\tfor (let i = 0, j = 0; i < highlights.length; ++i) {\n\t\tlet h = highlights[i];\n\t\tif (h[0] > x) {\n\t\t\tarr.push(text.substring(x, h[0]));\n\t\t\tx = h[0];\n\t\t}\n\t\tarr.push(<span className=\"highlight\" key={++j}>{text.substring(h[0], h[1])}</span>);\n\t\tx = h[1];\n\t}\n\tif (x < text.length)\n\t\tarr.push(text.substring(x));\n\treturn arr;\n}\n\nexport default function (props) {\n\tlet track = props.data || props.track;\n\tlet q = props.q || null;\n\n\tlet medias = (track.media || []).map(social => {\n\t\treturn <MediaLink \n\t\t\t\t\thref={social.url||social.uri}\n\t\t\t\t\tsocial={social.provider}\n\t\t\t\t\tkey={social.provider}\n\t\t\t\t\tsize=\"big\" />\n\t});\n\n\treturn (\n\t\t<div className=\"track-wrapper\">\n\t\t\t<div className=\"track-big\">\n\t\t\t\t<div className=\"cover-wrapper\">\n\t\t\t\t\t<div className=\"cover\">\n\t\t\t\t\t\t<div className=\"bg\">\n\t\t\t\t\t\t\t<MusicPic />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{track.cover ? <img src={track.cover} /> : null}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"info\">\n\t\t\t\t\t<div className=\"meta\">\n\t\t\t\t\t\t<h1>{highlightText(track.title, q)}</h1>\n\t\t\t\t\t\t<h2>{highlightText(track.artist, q)}</h2>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"media\">\n\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t{ medias }\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<Widgets track={track} />\n\t\t\t{ track.lyrics !== null ?\n\t\t\t\t<div className=\"lyrics\">\n\t\t\t\t\t<span className=\"header\">Lyrics</span>\n\t\t\t\t\t<span>{highlightText(track.lyrics, q)}</span>\n\t\t\t\t</div>\n\t\t\t\t: null \n\t\t\t}\n\t\t</div>\n\t);\n}","import React from 'react';\nimport './Score.css';\n\nfunction capitilize(str) {\n\tstr = str.replace(/_/g, ' ');\n\tstr = str.trim();\n\treturn str.slice(0, 1).toUpperCase() + str.slice(1);\n}\n\nexport default function (props) {\n\tlet score = props.score || {};\n\n\tlet elements = [];\n\tlet players = Object.keys(score);\n\tfor (let i = 0, x = 0; i < players.length; ++i) {\n\t\telements.push(\n\t\t\t<span key={++x} className=\"player\">\n\t\t\t\t<span className=\"name\">\n\t\t\t\t\t{capitilize(players[i])}\n\t\t\t\t</span>\n\t\t\t\t<span className=\"value\">\n\t\t\t\t\t{score[players[i]]}\n\t\t\t\t</span>\n\t\t\t</span>\n\t\t);\n\n\t\tif (players.length - 1 !== i) {\n\t\t\telements.push(<span key={++x} className=\"separator\">:</span>);\n\t\t}\n\t}\n\treturn <div className=\"score\"><div>{elements}</div></div>;\n}","let temp = {};\nconst getters = [\n\t(name) => JSON.parse(localStorage.getItem(name)),\n\t(name) => {\n\t\tlet matches = document.cookie.match(new RegExp(\n\t\t\t\"(?:^|; )\" + name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, '\\\\$1') + \"=([^;]*)\"\n\t\t));\n\t\treturn matches ? JSON.parse(decodeURIComponent(matches[1])) : null;\n\t},\n\t(name) => temp[name]\n];\nconst setters = [\n\t(name, value) => localStorage.setItem(name, JSON.stringify(value)),\n\t(name, value) => document.cookie = encodeURIComponent(name) + '=' + encodeURIComponent(JSON.stringify(value)),\n\t(name, value) => temp[name] = value\n];\n\nconst Storage = {\n\tget: (name, def) => {\n\t\tlet value = null;\n\t\tfor (let i = 0; i < getters.length; ++i) {\n\t\t\tvalue = getters[i](name);\n\t\t\tif (value != null || typeof value !== 'undefined')\n\t\t\t\tbreak;\n\t\t\telse value = null;\n\t\t}\n\t\tif ((value == null || typeof value === 'undefined') && typeof def !== 'undefined') {\n\t\t\tStorage.set(name, def);\n\t\t\treturn def;\n\t\t} else\n\t\t\treturn value;\n\t},\n\tset: (name, value) => {\n\t\tfor (let i = 0; i < setters.length; ++i)\n\t\t\tsetters[i](name, value);\n\t}\n};\nwindow.Storage = Storage;\nexport default Storage;","import Storage from './Storage';\nimport crc32 from 'crc/crc32';\n\nfunction randomString(n) {\n\tif (typeof n !== 'number')\n\t\tn = 16;\n\tconst q = \"1234567890qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM\";\n\treturn Array.from({length: n}, () => q[Math.round(Math.random() * (q.length-1))]).join('');\n}\nfunction queryToStr(obj) {\n\treturn Object.keys(obj).map(key => encodeURIComponent(key) + '=' + encodeURIComponent(obj[key])).join('&');\n}\nfunction cutObject(keys, obj) {\n\tlet nobj = {};\n\tfor (let i = 0, key; i < keys.length; ++i) {\n\t\tkey = keys[i];\n\t\tif (typeof obj[key] === 'undefined')\n\t\t\tnobj[key] = null;\n\t\telse nobj[key] = obj[key];\n\t}\n\treturn nobj;\n}\n\nlet cache = Storage.get('cache', {});\nfunction updCache() {\n\tfor (let key in cache)\n\t\tif (Date.now() - cache[key].t > 1000 * 60 * 60)\n\t\t\tdelete cache[key];\n}\nconst escapeCORS = 'https://cors-anywhere.herokuapp.com/';\nfunction http(method, url, before, callback, isCORS) {\n\tif (arguments.length === 3) {\n\t\tcallback = before;\n\t\tbefore = undefined;\n\t}\n\n\tlet k = crc32(method + ' ' + url).toString(16);\n\tconsole.log(method, url, '=', k);\n\tif (cache[k] && !before) {\n\t\tcallback(true, cache[k].r);\n\t\treturn;\n\t}\n\n\tlet xhr = new XMLHttpRequest();\n\txhr.open(method, url, true);\n\n\txhr.onreadystatechange = () => {\n\t\tif (xhr.readyState !== 4) return;\n\n\t\tif (xhr.status === 200) {\n\t\t\tlet res = xhr.responseText;\n\t\t\ttry {\n\t\t\t\tres = JSON.parse(res);\n\t\t\t} catch (e) {}\n\n\t\t\tif (!before) {\n\t\t\t\tcache[crc32(method + ' ' + url).toString(16)] = {t: Date.now(), r: res};\n\t\t\t\tupdCache();\n\t\t\t\tStorage.set('cache', cache);\n\t\t\t}\n\n\t\t\tcallback(true, res);\n\t\t} else {\n\t\t\tconsole.warn(\"Failed to send HTTP request: bad status code (\" + xhr.status + \")\");\n\t\t\tcallback(false, \"Bad status code: \" + xhr.status);\n\t\t}\n\t}\n\t// xhr.onerror = (err) => {\n\t// \tif (!isCORS)\n\t// \t\thttp(method, escapeCORS + (url), before, callback, true);\n\t// \telse\n\t// \t\tconsole.log(err);\n\t// }\n\n\tif (isCORS) {\n\t\t// xhr.setRequestHeader(\"Origin\", window.location.href);\n\t\txhr.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\n\t}\n\n\tif (typeof before !== 'function')\n\t\txhr.send();\t\n\telse before(xhr);\n}\n\nclass APIController {\n\tconstructor(type, options) {\n\t\tthis.type = type;\n\t\tthis.options = options;\n\t\tthis.session_id = Storage.get('session', randomString(16));\n\t}\n\tendpoint(name) {\n\t\tlet a = APIController.endpoint[this.type];\n\t\tif (typeof a === 'string')\n\t\t\treturn a;\n\t\tif (typeof a === 'object' && typeof name === 'undefined')\n\t\t\treturn a.audd;\n\t\treturn a[name];\n\t}\n\tquery(type, req) {\n\t\tlet obj = {};\n\t\tif (req.type === 'text')\n\t\t\tobj.q = req.value;\n\n\t\tif (type === 'direct') {\n\t\t\tobj.return = 'timecode,lyrics,apple_music,deezer,spotify';\n\t\t\tobj.api_token = this.options.audd_token;\n\t\t} else\n\t\t\tobj.session = this.session_id;\n\t\treturn obj;\n\t}\n\n\tsimulateAnswer(bool) {\n\t\tlet score = Storage.get('score', {computer: 0, human: 0});\n\t\tscore[bool ? 'computer' : 'human']++;\n\t\tStorage.set('score', score);\n\t\treturn score;\n\t}\n\tsimulateScore() {\n\t\treturn Storage.get('score', {computer: 0, human: 0});\n\t}\n\tsimulateAPIServerResponse(obj) {\n\t\treturn new Promise((resolve, reject) => {\n\n\t\t\tlet response = (result) => {\n\t\t\t\tresolve({\n\t\t\t\t\tresult: result,\n\t\t\t\t\tscore: this.simulateScore\n\t\t\t\t})\n\t\t\t};\n\n\t\t\tif (obj.status !== 'error' && obj.result !== null) {\n\t\t\t\tlet track = obj.result.list ? obj.result.list[0] : obj.result[0];\n\t\t\t\tif (typeof track === 'undefined' || track === null) {\n\t\t\t\t\tresponse(null);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (typeof track.media === 'string')\n\t\t\t\t\ttrack.media = JSON.parse(track.media);\n\t\t\t\tif (track.media)\n\t\t\t\t\ttrack.media = track.media.map(cutObject.bind(this, ['provider', 'url']));\n\n\t\t\t\tlet promises = [\n\t\t\t\t\tthis.geniusSearch(track),\n\t\t\t\t\tthis.deezerSearch(track)\n\t\t\t\t];\n\t\t\t\tPromise.all(promises)\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tresponse(cutObject(['title', 'media', 'artist', 'lyrics', 'cover'], track));\n\t\t\t\t\t});\n\t\t\t} else\n\t\t\t\tresponse(null)\n\t\t});\n\t}\n\n\tputMediaToTrack(track, media) {\n\t\tif (!Array.isArray(track.media))\n\t\t\ttrack.media = [];\n\t\t\n\t\tif (track.media.map(m => m.provider).indexOf(media.provider) < 0)\n\t\t\ttrack.media.push(media);\n\t}\n\tputGeniusData(data, track) {\n\t\tif (data.path) {\n\t\t\tthis.putMediaToTrack(track, {provider: 'genius', url: \"https://genius.com\" + data.path});\n\t\t}\n\t\tif (data.media) {\n\t\t\tfor (let i = 0; i < data.media.length; ++i)\n\t\t\t\tthis.putMediaToTrack(track, data.media[i]);\n\t\t}\n\t\tif (data.song_art_image_url)\n\t\t\ttrack.cover = data.song_art_image_url;\n\t\tif (!track.song_id && data.id)\n\t\t\ttrack.song_id = data.id;\n\t}\n\tprobablyEqual(a, b) {\n\t\tlet len = Math.min(a.length, b.length);\n\t\treturn a.toLowerCase().trim().substring(0, len) === b.toLowerCase().trim().substring(0, len);\n\t}\n\tgeniusSearch(track) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tlet url = this.endpoint('genius');\n\t\t\tif (track.song_id)\n\t\t\t\turl += 'songs/' + track.song_id + '?access_token=' + this.options.genius_token;\n\t\t\telse \n\t\t\t\turl += 'search?' + queryToStr({q: track.artist + ' ' + track.title, access_token: this.options.genius_token});\n\n\t\t\thttp('GET', url,\n\t\t\t\t(status, data) => {\n\t\t\t\t\tif (status && data.response && data.response.hits) {\n\t\t\t\t\t\tlet appropriate = null;\n\t\t\t\t\t\tfor (let i = 0; i < data.response.hits.length; ++i) {\n\t\t\t\t\t\t\tlet hit = data.response.hits[i];\n\t\t\t\t\t\t\tif (hit.result && \n\t\t\t\t\t\t\t\thit.result.title &&\n\t\t\t\t\t\t\t\thit.result.primary_artist.name &&\n\t\t\t\t\t\t\t\tthis.probablyEqual(hit.result.title, track.title) &&\n\t\t\t\t\t\t\t\tthis.probablyEqual(hit.result.primary_artist.name, track.artist)) {\n\t\t\t\t\t\t\t\tappropriate = hit.result;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (appropriate !== null) {\n\t\t\t\t\t\t\tthis.putGeniusData(appropriate, track);\n\t\t\t\t\t\t\tif (track.song_id) {\n\t\t\t\t\t\t\t\tthis.geniusSearch(track)\n\t\t\t\t\t\t\t\t\t.then(resolve)\n\t\t\t\t\t\t\t\t\t.catch(reject);\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (status && data.response && data.response.song) {\n\t\t\t\t\t\tthis.putGeniusData(data.response.song, track);\n\t\t\t\t\t}\n\t\t\t\t\tresolve();\n\t\t\t\t}\n\t\t\t);\n\t\t});\n\t}\n\tdeezerSearch(track) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\thttp('GET', escapeCORS + this.endpoint('deezer') + 'search?' + queryToStr({\n\t\t\t\tq: \"track:\\\"\"+track.title+\"\\\" artist:\\\"\"+track.artist+\"\\\"\",\n\t\t\t\tstrict: \"on\"\n\t\t\t}), (x) => x.send(), (status, data) => {\n\t\t\t\tif (status && data.data && data.data.length > 0) {\n\t\t\t\t\tdata = data.data[0];\n\t\t\t\t\tif (data.link) {\n\t\t\t\t\t\tthis.putMediaToTrack(track, {provider: 'deezer', url: data.link});\n\t\t\t\t\t}\n\n\t\t\t\t\tif (data.album && data.album.cover_big)\n\t\t\t\t\t\ttrack.cover = data.album.cover_big;\n\t\t\t\t\telse if (data.artist && data.artist.picture_big)\n\t\t\t\t\t\ttrack.cover = data.artist.picture_big;\n\t\t\t\t}\n\t\t\t\tresolve();\n\t\t\t}, true);\n\t\t})\n\t}\n\n\n\tsendAnswer(bool) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tif (this.type === 'backend') {\n\t\t\t\thttp('POST', \n\t\t\t\t\t this.endpoint() +\n\t\t\t\t\t APIController.path[this.type][bool],\n\t\t\t\t\t (status, data) => {\n\t\t\t\t\t \t(status ? resolve : reject)(data);\n\t\t\t\t\t }\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tresolve(this.simulateAnswer(bool));\n\t\t\t}\n\t\t})\n\t}\n\n\tsend(requestObject) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tlet url = this.endpoint() + \n\t\t\t\t\t  APIController.path[this.type][requestObject.type] + \n\t\t\t\t\t  '?' + queryToStr(this.query(this.type, requestObject));\n\t\t\tlet xhr = new window.XMLHttpRequest();\n\t\t\txhr.open('POST', url, true);\n\t\t\tlet onResponse = (status, data) => {\n\t\t\t\tif (!status) {\n\t\t\t\t\treject(data);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (this.type === 'direct') {\n\t\t\t\t\tthis.simulateAPIServerResponse(data)\n\t\t\t\t\t\t.then(resolve)\n\t\t\t\t\t\t.catch(reject);\n\t\t\t\t} else\n\t\t\t\t\tresolve(data);\n\t\t\t};\n\t\t\tif (requestObject.type === 'text' && this.type === 'direct')\n\t\t\t\thttp('POST', url, onResponse);\n\t\t\telse {\n\t\t\t\thttp('POST', url, (xhr) => {\n\t\t\t\t\tif (requestObject.type === 'audio') {\n\t\t\t\t\t\tlet data = new window.FormData();\n\t\t\t\t\t\tdata.append(\"file\", requestObject.value);\n\t\t\t\t\t\twindow.data = data;\n\t\t\t\t\t\txhr.send(data);\n\t\t\t\t\t} else if (requestObject.type === 'text') {\n\t\t\t\t\t\txhr.send();\n\t\t\t\t\t}\n\t\t\t\t}, onResponse);\n\t\t\t}\n\t\t});\n\t}\n}\nAPIController.endpoint = {\n\t'direct': {\n\t\taudd: 'https://api.audd.io/', \n\t\tgenius: 'https://api.genius.com/', \n\t\tdeezer: 'https://api.deezer.com/'\n\t},\n\t'backend': process.env.REACT_APP_API_BACKEND_ENDPOINT\n\t// backend: \"http://localhost:9333/\"\n};\nAPIController.path = {\n\t'direct': {\n\t\t// audd.io\n\t\t'audio': 'recognizeWithOffset/',\n\t\t'text': 'findLyrics/',\n\t},\n\t'backend': {\n\t\t'audio': 'humming',\n\t\t'text': 'lyrics',\n\n\t\t'true': 'right',\n\t\t'false': 'wrong'\n\t}\n};\n\nlet api;\nif (window.location.hash === '#local')\n\tapi = new APIController('backend');\nelse\n\tapi = new APIController(process.env.REACT_APP_API_TYPE, {\n\t\taudd_token: process.env.REACT_APP_AUDD_TOKEN,\n\t\tgenius_token: process.env.REACT_APP_GENIUS_TOKEN\n\t});\nwindow.api = api;\nexport default api;","import React from 'react';\n\nimport { Redirect } from 'react-router-dom';\n\nimport TextOrRecordInput from '../../Components/TextOrRecordInput/TextOrRecordInput';\nimport Loading from '../../Components/Loading/Loading';\nimport Button from '../../Components/Button/Button';\nimport TrackBig from '../../Components/TrackBig/TrackBig';\nimport Score from './Score';\n\nimport API from '../../Controllers/APIController';\n\nimport './GuessPage.css';\n\nclass GuessPage extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {voted: false};\n\n\t\tif (this.props.location.state) {\n\t\t\tthis.init(false, this.props.location.state);\n\t\t}\n\t}\n\n\tinit(mounted, input) {\n\t\tthis.props.location.state = input;\n\n\t\tlet newState = {};\n\t\tif (input.type === 'text') \n\t\t\tnewState.q = input.value;\n\t\tnewState.loading = true;\n\t\tif (mounted)\n\t\t\tthis.setState(newState);\n\t\telse this.state = Object.assign(this.state, newState);\n\n\t\tAPI.send(input)\n\t\t   .then((res) => {\n\t\t   \t\tthis.setState({\n\t\t   \t\t\tloading: false, \n\t\t   \t\t\ttrack: res.result,\n\t\t   \t\t\tvoted: res.result == null ? true : false,\n\t\t   \t\t\tscore: res.score\n\t\t   \t\t});\n\t\t   \t\tif (res.result == null)\n\t\t   \t\t\tthis.vote(false);\n\t\t   })\n\t\t   .catch((error) => {\n\t\t   \t\tthis.setState({loading: false, error: error});\n\t\t   })\n\t}\n\n\tvote(bool) {\n\t\tif (this.state.voted)\n\t\t\treturn;\n\n\t\tthis.setState({voted: true});\n\t\tAPI.sendAnswer(bool)\n\t\t    .then((newScore) => {\n\t\t    \tthis.setState({score: newScore})\n\t\t    });\n\t}\n\n\trender() {\n\t\tif (this.props.location.state === null ||\n\t\t\ttypeof this.props.location.state === 'undefined') {\n\t\t\treturn <Redirect to='/' />;\n\t\t}\n\n\t\tif (this.state.loading)\n\t\t\treturn <div>\n\t\t\t\t\t<p className=\"center\">Searching your track...</p>\n\t\t\t\t\t<Loading />\n\t\t\t\t   </div>;\n\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<div className={\"voting\" + (this.state.voted ? ' voted' : '')}>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<p>Is it <b>{this.state.track.artist} — {this.state.track.title}</b>?</p>\n\t\t\t\t\t\t<div className=\"buttons\">\n\t\t\t\t\t\t\t<Button invert onClick={this.vote.bind(this, true)}>Right!</Button>\n\t\t\t\t\t\t\t<Button onClick={this.vote.bind(this, false)}>No...</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<Score score={this.state.score} />\n\t\t\t\t\t\t<p>What about next song?</p>\n\t\t\t\t\t\t<TextOrRecordInput onSelect={this.init.bind(this, true)} />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t{this.state.track ? \n\t\t\t\t\t<TrackBig data={this.state.track} q={this.state.q} /> :\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<p className=\"center\">Unfortunately, we didn't find any track. You won this round.</p>\n\t\t\t\t\t</div>\n\t\t\t\t}\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default GuessPage;","import React from 'react';\n\nexport default function () {\n\treturn (\n\t\t<div>\n\t\t\t<p>404!</p>\n\t\t</div>\n\t);\n}","import React from 'react';\n\nimport { BrowserRouter as Router } from \"react-router-dom\";\nimport { Switch, Route, Link, withRouter } from \"react-router-dom\";\nimport { TransitionGroup, CSSTransition } from \"react-transition-group\";\n\nimport Button from './Components/Button/Button';\n\nimport { ReactComponent as BackPic } from \"./back.svg\";\n\nimport IndexPage from './Pages/IndexPage/IndexPage';\nimport GuessPage from './Pages/GuessPage/GuessPage';\nimport _404Page from './Pages/404Page/404Page';\n\nimport './App.css';\n\n// for header animation\nfunction updHeaderClassName() {\n\tdocument.querySelector(\"#header\").className = window.location.pathname == '/' ? 'index' : '';\n}\n\nclass Content extends React.Component {\n\tcomponentWillMount() {\n\t\tthis.unlisten = this.props.history.listen((location, action) => {\n\t\t\tupdHeaderClassName();\n\t\t});\n\t}\n\tcomponentWillUnmount() {\n\t\tthis.unlisten();\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<div id=\"content\">\n\t\t\t\t<TransitionGroup className=\"transition-group\">\n\t\t\t\t\t<CSSTransition\n\t\t\t          key={this.props.location.key}\n\t\t\t          timeout={{ enter: 150, exit: 150 }}\n\t\t\t          classNames=\"fade\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<section className=\"route-section\">\n\t\t\t\t\t\t\t<Switch location={this.props.location}>\n\t\t\t\t\t\t\t\t<Route path=\"/\" exact component={IndexPage} />\n\t\t\t\t\t\t\t\t<Route path=\"/guess/\" component={GuessPage} />\n\t\t\t\t\t\t\t\t<Route component={_404Page} />\n\t\t\t\t\t\t\t</Switch>\n\t\t\t\t\t\t</section>\n\t\t\t\t\t</CSSTransition>\n\t\t\t\t</TransitionGroup>\n\t\t\t</div>\n\t\t);\n\t}\n}\nconst ContentComponent = withRouter(Content);\n\nexport default function () {\n\treturn (\n\t\t<div id=\"container\">\n\t\t\t<Router>\n\t\t\t\t<Link \n\t\t\t\t\tid=\"header\" \n\t\t\t\t\tclassName={window.location.pathname == '/' ? 'index' : ''}\n\t\t\t\t\tto=\"/\">\n\t\t\t\t\t<Button round className=\"borderless\" to=\"/\">\n\t\t\t\t\t\t<BackPic />\n\t\t\t\t\t</Button>\n\t\t\t\t\t<h1>Musical Akinator</h1>\n\t\t\t\t</Link>\n\t\t\t\t<ContentComponent />\n\t\t\t</Router>\n\t\t</div>\n\t);\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n\t<App />,\n\tdocument.getElementById('root')\n);"],"sourceRoot":""}