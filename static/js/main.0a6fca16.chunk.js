(this["webpackJsonpmusical-akinator"]=this["webpackJsonpmusical-akinator"]||[]).push([[0],{25:function(e,t,n){e.exports=n(39)},30:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(8),o=n.n(i),s=(n(30),n(17)),l=n(9),c=n(42),u=n(41),d=n(10),p=n(11),h=n(14),f=n(13),v=n(15),m=n(6);function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function b(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var g=a.a.createElement("path",{d:"M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z"}),w=a.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),E=function(e){var t=e.svgRef,n=e.title,r=b(e,["svgRef","title"]);return a.a.createElement("svg",y({width:24,height:24,viewBox:"0 0 24 24",ref:t},r),n?a.a.createElement("title",null,n):null,g,w)},O=a.a.forwardRef((function(e,t){return a.a.createElement(E,y({svgRef:t},e))}));n.p;function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function R(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var x=a.a.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),S=a.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),j=function(e){var t=e.svgRef,n=e.title,r=R(e,["svgRef","title"]);return a.a.createElement("svg",k({width:24,height:24,viewBox:"0 0 24 24",ref:t},r),n?a.a.createElement("title",null,n):null,x,S)},C=a.a.forwardRef((function(e,t){return a.a.createElement(j,k({svgRef:t},e))}));n.p;function M(){return(M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function D(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var P=a.a.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),z=a.a.createElement("path",{d:"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"}),T=function(e){var t=e.svgRef,n=e.title,r=D(e,["svgRef","title"]);return a.a.createElement("svg",M({width:24,height:24,viewBox:"0 0 24 24",ref:t},r),n?a.a.createElement("title",null,n):null,P,z)},L=a.a.forwardRef((function(e,t){return a.a.createElement(T,M({svgRef:t},e))}));n.p;function N(){return(N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function I(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var H=a.a.createElement("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}),q=function(e){var t=e.svgRef,n=e.title,r=I(e,["svgRef","title"]);return a.a.createElement("svg",N({width:24,height:24,viewBox:"0 0 24 24",ref:t},r),n?a.a.createElement("title",null,n):null,H)},B=a.a.forwardRef((function(e,t){return a.a.createElement(q,N({svgRef:t},e))})),W=(n.p,n(31),function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(h.a)(this,Object(f.a)(t).call(this,e))).enterHandler=n.onEnter.bind(Object(m.a)(n)),n.state={disabled:e.disabled},n}return Object(v.a)(t,e),Object(p.a)(t,[{key:"_down",value:function(e,t){if(!this.state.disabled){var n=e.getBoundingClientRect(),r=t.clientX-n.left,a=t.clientY-n.top,i=Math.max(Math.sqrt(Math.pow(r,2)+Math.pow(a,2)),Math.sqrt(Math.pow(r-n.width,2)+Math.pow(a,2)),Math.sqrt(Math.pow(r,2)+Math.pow(a-n.height,2)),Math.sqrt(Math.pow(r-n.width,2)+Math.pow(a-n.height,2))),o=document.createElement("div");o.className="ripple",o.style.position="absolute",o.style.transition="all 0.25s cubic-bezier(0.215, 0.61, 0.355, 1)",o.style.borderRadius="50%",o.style.opacity="1",o.style.top=a+"px",o.style.left=r+"px",o.style.width=o.style.height="0px",o.id="s"+Date.now(),setTimeout((function(){o.style.opacity="0.75",o.style.top=a-i+"px",o.style.left=r-i+"px",o.style.width=o.style.height=2*i+"px"}),10),e.append(o)}}},{key:"_up",value:function(e,t){var n=e.querySelectorAll(".ripple");if(null!=n)for(var r=function(e){var t=n[e],r=parseInt(t.id.substring(1));Date.now()-r>250?(t.style.opacity="0",setTimeout(t.remove.bind(t),250)):setTimeout((function(){t.style.opacity="0",setTimeout(t.remove.bind(t),250)}),250-(Date.now()-r))},a=0;a<n.length;++a)r(a)}},{key:"componentDidMount",value:function(){var e=o.a.findDOMNode(this);e.style.position="relative",e.style.overflow="hidden",this.down=this._down.bind(this,e),this.up=this._up.bind(this,e),e.addEventListener("mousedown",this.down),document.body.addEventListener("mouseup",this.up)}},{key:"componentWillMount",value:function(){this.props.enter&&window.addEventListener("keyup",this.enterHandler)}},{key:"componentWillUnmount",value:function(){this.props.enter&&window.removeEventListener("keyup",this.enterHandler),document.body.removeEventListener("mouseup",this.up)}},{key:"componentWillReceiveProps",value:function(e){e.disabled!==this.state.disabled&&this.setState({disabled:e.disabled})}},{key:"onEnter",value:function(e){13!==e.keyCode||e.ctrlKey||e.metaKey||"function"!==typeof this.props.onClick||this.props.disabled||this.props.onClick()}},{key:"redirect",value:function(e){this.props.disabled||(window.location.href=e)}},{key:"render",value:function(){var e=this.props.className||"";return this.props.invert&&(e+=" invert"),this.state.disabled&&(e+=" disabled"),a.a.createElement("div",{className:e+" button",id:this.props.id,onClick:function(){this.props.disabled||(this.props.to?this.redirect.bind(this,this.props.to):this.props.onClick)()}.bind(this),style:this.props.style},this.props.children)}}]),t}(a.a.Component)),A=(n(32),function(){function e(){Object(d.a)(this,e),this.tail=null}return Object(p.a)(e,[{key:"push",value:function(e){var t=this.tail;this.tail=Object.assign(e,{next:t})}}]),e}());function K(e){return Object.keys(e).filter((function(t){return e[t]})).join(" ")}var U=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(h.a)(this,Object(f.a)(t).call(this,e))).canvasRendering=!1,n.audioSupported="undefined"!==typeof MediaRecorder,n.context=null,n.stream=null,n.source=null,n.processor=null,n.analyser=null,n.recorder=null,n.chunks=[],n.recordingStart=null,n.volumes=null,n.volumeMax=0,n.inputDivRef=a.a.createRef(),n.statusRef=a.a.createRef(),n.canvasRef=a.a.createRef(),n.inputRef=a.a.createRef(),n.state={type:"text",status:"",statusClass:""},n.onResize=n.resizeCanvas.bind(Object(m.a)(n)),n.onKeyPress=n.catchEnter.bind(Object(m.a)(n)),n.callback=e.onSelect,n}return Object(v.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.resizeCanvas(),window.addEventListener("resize",this.onResize),window.addEventListener("keypress",this.onKeyPress)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResize),window.removeEventListener("keypress",this.onKeyPress)}},{key:"resizeCanvas",value:function(){var e=this.inputDivRef.current,t=this.canvasRef.current;null!=t&&null!=e&&(t.width=e.clientWidth*window.devicePixelRatio,t.height=e.clientHeight*window.devicePixelRatio)}},{key:"onMicClick",value:function(){var e=this;this.setState({type:"mic"}),navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then((function(t){e.stream=t;var n=window.AudioContext||window.webkitAudioContext||!1;if(!e.audioSupported)return e.setState({statusClass:"error",status:"Your browser doesn't support audio recording"}),void(e.stream=null);e.chunks=[],e.recorder=new MediaRecorder(e.stream),e.recorder.ondataavailable=function(e){this.chunks.push(e.data)}.bind(e),e.recorder.start(),e.recordingStart=Date.now(),n?(e.context=new n,e.analyser=e.context.createAnalyser(),e.source=e.context.createMediaStreamSource(e.stream),e.processor=e.context.createScriptProcessor(1024,1,1),e.volumes=new A,e.volumeMax=0,e.source.connect(e.analyser),e.analyser.connect(e.processor),e.processor.connect(e.context.destination),e.setState({statusClass:"info",status:e.durationString(Date.now()-e.recordingStart)}),e.processor.onaudioprocess=function(t){if(null!==e.stream&&"mic"===e.state.type&&null!==e.volumes)if(Date.now()-e.recordingStart>3e4)e.stopStream(!0);else{e.analyser.fftSize=2048;var n=e.analyser.frequencyBinCount,r=new Uint8Array(n);e.analyser.getByteFrequencyData(r);for(var a=0,i=0;i<n;++i)a+=r[i];var o=a/n;o>e.volumeMax&&(e.volumeMax=o),e.volumes.push({timestamp:Date.now(),volume:o}),e.statusRef.current.innerHTML=e.durationString(Date.now()-e.recordingStart)}}):(e.volumes=null,setTimeout((function(){Date.now()-e.recordingStart>=3e4&&e.stopStream(!0)}),3e4)),e.startCanvasRendering()})).catch((function(t){console.error(t),e.setState({statusClass:"error",status:"Failed to access microphone: "+t})}))}},{key:"startCanvasRendering",value:function(){var e=this;this.canvasRendering=!0;var t=this.canvasRef.current,n=t.getContext("2d");!function r(){if(e.canvasRendering){requestAnimationFrame(r.bind(e));var a=t.width,i=t.height;n.clearRect(0,0,a,i);var o=function(e,t,n){return{x:(e.timestamp-this.recordingStart)/3e4*t,y:(1-e.volume/this.volumeMax)*n}}.bind(e);if(n.beginPath(),null==e.volumes)n.moveTo(0,i+10),n.lineTo(0,i/2),n.lineTo((Date.now()-e.recordingStart)/3e4*a,i/2),n.lineTo((Date.now()-e.recordingStart)/3e4*a,i+10);else{for(var s=e.volumes.tail,l=null,c=null;null!=s;){var u=o(s,a,i);null==l&&(l=u),n.lineTo(u.x,u.y),c=u,s=s.next}null!=l&&null!=c&&(n.lineTo(0,c.y),n.lineTo(0,i+10),n.lineTo(l.x,i+10))}n.closePath(),n.lineWidth=1.5*window.devicePixelRatio,n.lineCap="round",n.strokeStyle="#1976d2",n.fillStyle="#90caf9",n.stroke(),n.fill()}}()}},{key:"stopCanvasRendering",value:function(){this.canvasRendering=!1}},{key:"stopStream",value:function(e){var t=this;null!==this.stream&&(e&&(this.recorder.onstop=function(){var e=new Blob(t.chunks,{type:t.recorder.mimeType});t.callback({type:"audio",value:e})}),this.recorder.stop(),this.stopCanvasRendering(),this.stream.getTracks().forEach((function(e){e.stop()})),this.stream=null)}},{key:"durationString",value:function(e){var t=Math.floor(e/1e3),n=Math.floor(t/60);return t%=60,this.addZeros(n)+":"+this.addZeros(t)}},{key:"addZeros",value:function(e,t){return"undefined"===typeof t&&(t=2),"string"!==typeof e&&(e+=""),e.length>=t?e:"0".repeat(t-e.length)+e}},{key:"onCloseClick",value:function(){this.setState({type:"text"}),this.stopStream(!1),this.volumes=null,this.volumeMax=0}},{key:"onInputChange",value:function(){this.updClassName()}},{key:"send",value:function(){if("text"===this.state.type){var e=this.inputRef.current.value.trim();e.length>0&&this.callback({type:"text",value:e})}else null!==this.stream&&this.stopStream(!0)}},{key:"catchEnter",value:function(e){13==e.keyCode&&this.inputDone()&&this.send()}},{key:"inputDone",value:function(){var e,t=this.inputRef.current;return e=null!=t?t.value:"","text"==this.state.type&&e.length>0||"mic"==this.state.type&&this.audioSupported&&"error"!=this.state.statusClass}},{key:"updClassName",value:function(){var e=o.a.findDOMNode(this),t=e.children[e.children.length-1],n=this.inputRef.current.value.trim();t.className=K({TextOrRecordInput:!0,cansend:n.length>0,mic:"mic"===this.state.type,text:"text"===this.state.type})}},{key:"render",value:function(){return a.a.createElement("div",{className:"TextOrRecordInputWrapper"},this.audioSupported?null:a.a.createElement("div",{className:"warning"},a.a.createElement(B,null),a.a.createElement("p",null,"Your browser doesn't support microphone recording.")),a.a.createElement("div",{className:K({TextOrRecordInput:!0,cansend:this.inputDone(),mic:"mic"===this.state.type,text:"text"===this.state.type}),ref:this.inputDivRef},a.a.createElement("div",{className:"input-wrapper"},a.a.createElement("input",{type:"text",placeholder:"Write lyrics here or press mic...",ref:this.inputRef,onChange:this.onInputChange.bind(this),onKeyPress:this.onInputChange.bind(this),onKeyUp:this.onInputChange.bind(this)})),a.a.createElement("div",{className:"status "+this.state.statusClass,ref:this.statusRef},this.state.status),a.a.createElement("canvas",{ref:this.canvasRef}),a.a.createElement(W,{className:"mic borderless round"+(this.audioSupported?"":" hidden"),onClick:this.onMicClick.bind(this)},a.a.createElement(O,null)),a.a.createElement(W,{className:"close borderless round",onClick:this.onCloseClick.bind(this)},a.a.createElement(C,null)),a.a.createElement(W,{className:"send borderless round",onClick:this.send.bind(this)},a.a.createElement(L,null))))}}]),t}(a.a.Component),_={text:"https://api.audd.io/findLyrics/",audio:"https://api.audd.io/recognizeWithOffset/"},F=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(h.a)(this,Object(f.a)(t).call(this,e))).preRef=a.a.createRef(),n}return Object(v.a)(t,e),Object(p.a)(t,[{key:"send",value:function(e){var t,n=this,r=_[e.type]+"?api_token=47ad9870695533cb638d9fc29c179a21";"audio"===e.type?(t=new FormData).append("file",e.value):"text"===e.type&&(r+="&q="+encodeURIComponent(e.value));var a=new XMLHttpRequest;a.open("POST",r,!0),a.onreadystatechange=function(){4===a.readyState&&(n.preRef.current.innerHTML=a.responseText)},a.send(t)}},{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement("p",null,"Akinator tries to recognize and guess what song you are trying to find. You are welcome to type lyrics or hum song's rythm in microphone."),a.a.createElement(U,{onSelect:this.send.bind(this)}),a.a.createElement("br",null),a.a.createElement("pre",{ref:this.preRef}))}}]),t}(a.a.Component),Y=function(){return a.a.createElement("div",null,a.a.createElement("p",null,"404!"))},Z=(n(33),Object(l.f)((function(e){var t=e.location;return a.a.createElement("div",{id:"content"},a.a.createElement(c.a,{className:"transition-group"},a.a.createElement(u.a,{key:t.key,timeout:{enter:150,exit:150},classNames:"fade"},a.a.createElement("section",{className:"route-section"},a.a.createElement(l.c,{location:t},a.a.createElement(l.a,{path:"/",exact:!0,component:F}),a.a.createElement(l.a,{component:Y}))))))})));o.a.render(a.a.createElement((function(){return a.a.createElement("div",{id:"container"},a.a.createElement(s.a,null,a.a.createElement("div",{id:"header"},a.a.createElement("h1",null,"Musical Akinator")),a.a.createElement(Z,null)))}),null),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.0a6fca16.chunk.js.map