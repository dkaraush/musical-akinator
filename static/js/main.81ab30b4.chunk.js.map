{"version":3,"sources":["Components/Page/Page.jsx","Components/TextOrRecordInput/mic.svg","Components/TextOrRecordInput/close.svg","Components/TextOrRecordInput/send.svg","Components/Button/Button.jsx","Components/TextOrRecordInput/TextOrRecordInput.jsx","Pages/IndexPage/IndexPage.jsx","Pages/404Page/404Page.jsx","index.js","App.jsx"],"names":["routes","pages","props","id","React","createRef","isActive","route","window","location","pathname","page","className","ref","children","document","body","url","x","indexOf","substring","RedirectID","toId","pageId","current","R","toRoute","history","pushState","addEventListener","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_ref2","createElement","d","_ref3","fill","_ref","svgRef","title","width","height","viewBox","ForwardRef","forwardRef","Button","enterHandler","onEnter","bind","state","disabled","element","event","rect","getBoundingClientRect","clientX","left","y","clientY","top","Math","max","sqrt","pow","ripple","style","position","transition","borderRadius","opacity","Date","now","setTimeout","append","ripples","querySelectorAll","start","parseInt","remove","ReactDOM","findDOMNode","overflow","down","_down","up","_up","enter","removeEventListener","nextProps","setState","keyCode","ctrlKey","metaKey","onClick","to","href","invert","redirect","Component","LinkedList","tail","val","next","classes","obj","filter","join","TextOrRecordInput","context","stream","processor","analyser","recorder","chunks","recordingStart","volumes","volumeMax","statusRef","canvasRef","inputRef","type","status","statusClass","onResize","resizeCanvas","callback","onSelect","root","canvas","querySelector","clientWidth","devicePixelRatio","clientHeight","ctx","getContext","W","H","clearRect","calculateCoordinates","node","w","h","timestamp","volume","beginPath","last","first","coordinates","lineTo","closePath","lineWidth","lineCap","strokeStyle","fillStyle","stroke","navigator","mediaDevices","getUserMedia","audio","video","then","AudioContext","createAnalyser","createMediaStreamSource","createScriptProcessor","MediaRecorder","ondataavailable","e","push","data","connect","destination","onaudioprocess","MAX_RECORD_LENGTH","stopStream","fftSize","bufferLength","frequencyBinCount","dataArray","Uint8Array","getByteFrequencyData","sum","renderCanvas","innerHTML","durationString","catch","send","onstop","blob","Blob","mimeType","value","stop","getTracks","forEach","track","millis","sec","floor","min","addZeros","str","n","repeat","updClassName","trim","cansend","mic","text","input","placeholder","onChange","onInputChange","onKeyPress","onKeyUp","onMicClick","onCloseClick","onSendClick","API_ENDPOINT","IndexPage","preRef","res","FormData","encodeURIComponent","xhr","XMLHttpRequest","open","onreadystatechange","readyState","responseText","render","_404Page","getElementById"],"mappings":"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","file":"static/js/main.81ab30b4.chunk.js","sourcesContent":["import React from 'react';\nimport './Page.css';\n\nlet routes = {};\nlet pages = {};\nexport default function (props) {\n\tpages[props.id] = React.createRef();\n\tlet isActive = props.route && window.location.pathname === props.route;\n\tlet page = (\n\t\t<div\n\t\t\tid={props.id} \n\t\t\tclassName={\"page\" + (isActive ? ' active' : '')}\n\t\t\tref={pages[props.id]}\n\t\t\t>\n\t\t\t{props.children}\n\t\t</div>\n\t);\n\tif (isActive)\n\t\tdocument.body.className = props.id;\n\tif (props.route)\n\t\troutes[props.route] = props.id;\n\treturn page;\n}\n\nfunction url(x) {\n\tif (x.indexOf('?') >= 0)\n\t\tx = x.substring(0, x.indexOf('?'));\n\tif (x.indexOf('#') >= 0)\n\t\tx = x.substring(0, x.indexOf('#'));\n\treturn x;\n}\n\nexport let RedirectID = function (toId) {\n\tdocument.body.className = toId;\n\tfor (let pageId in pages) {\n\t\tlet page = pages[pageId].current;\n\t\tpage.className = 'page ' + (pageId === toId ? 'active' : '');\n\t}\n}\nexport let Redirect = function (toRoute) {\n\twindow.history.pushState(\"\", \"\", toRoute);\n\tRedirectID(routes[url(toRoute)] || '404');\n}\n\nwindow.R = Redirect;\n\nwindow.addEventListener('load', function () {\n\tlet route = url(window.location.pathname);\n\tif (typeof routes[route] === 'undefined')\n\t\tRedirectID('404');\n});","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M0 0h24v24H0z\",\n  fill: \"none\"\n});\n\nvar SvgMic = function SvgMic(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgMic, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/mic.c787772c.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M0 0h24v24H0z\",\n  fill: \"none\"\n});\n\nvar SvgClose = function SvgClose(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgClose, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/close.777b93c6.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  fill: \"none\",\n  d: \"M0 0h24v24H0z\"\n});\n\nvar _ref3 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z\"\n});\n\nvar SvgSend = function SvgSend(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgSend, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/send.e249914e.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './Button.css';\n\nclass Button extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.enterHandler = this.onEnter.bind(this);\n\t\tthis.state = {\n\t\t\tdisabled: props.disabled\n\t\t};\n\t}\n\t\n\t_down(element, event) {\n\t\tif (this.state.disabled)\n\t\t\treturn;\n\t\tlet rect = element.getBoundingClientRect();\n\t\tlet x = (event.clientX - rect.left), y = (event.clientY - rect.top);\n\t\tlet R = Math.max(\n\t\t\t\t\tMath.sqrt(Math.pow(x, 2) + Math.pow(y, 2)),\n\t\t\t\t\tMath.sqrt(Math.pow(x-rect.width, 2) + Math.pow(y, 2)),\n\t\t\t\t\tMath.sqrt(Math.pow(x, 2) + Math.pow(y-rect.height, 2)),\n\t\t\t\t\tMath.sqrt(Math.pow(x-rect.width, 2) + Math.pow(y-rect.height, 2))\n\t\t\t\t);\n\n\t\tlet ripple = document.createElement('div');\n\t\tripple.className = 'ripple';\n\t\tripple.style.position = 'absolute';\n\t\tripple.style.transition = 'all 0.25s cubic-bezier(0.215, 0.61, 0.355, 1)';\n\t\tripple.style.borderRadius = '50%';\n\t\tripple.style.opacity = '1';\n\t\tripple.style.top = y + \"px\";\n\t\tripple.style.left = x + \"px\";\n\t\tripple.style.width = ripple.style.height = '0px';\n\t\tripple.id = 's' + Date.now();\n\t\tsetTimeout(function () {\n\t\t\tripple.style.opacity = '0.75';\n\t\t\tripple.style.top = (y-R) + \"px\";\n\t\t\tripple.style.left = (x-R) + \"px\";\n\t\t\tripple.style.width = ripple.style.height = R*2 + 'px';\n\t\t}, 10);\n\n\t\telement.append(ripple);\n\t}\n\t_up(element, event) {\n\t\tlet ripples = element.querySelectorAll('.ripple');\n\t\tif (ripples == null)\n\t\t\treturn;\n\n\t\tfor (let i = 0; i < ripples.length; ++i) {\n\t\t\tlet ripple = ripples[i];\n\t\t\tlet start = parseInt(ripple.id.substring(1));\n\t\t\tif (Date.now() - start > 250) {\n\t\t\t\tripple.style.opacity = '0';\n\t\t\t\tsetTimeout(ripple.remove.bind(ripple), 250);\n\t\t\t} else {\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\tripple.style.opacity = '0';\n\t\t\t\t\tsetTimeout(ripple.remove.bind(ripple), 250);\n\t\t\t\t}, 250 - (Date.now() - start))\n\t\t\t}\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\tlet element = ReactDOM.findDOMNode(this);\n\t\telement.style.position = 'relative';\n\t\telement.style.overflow = 'hidden';\n\n\t\tthis.down = this._down.bind(this, element);\n\t\tthis.up = this._up.bind(this, element);\n\t\telement.addEventListener('mousedown', this.down);\n\t\tdocument.body.addEventListener('mouseup', this.up);\n\t}\n\tcomponentWillMount() {\n\t\tif (this.props.enter)\n\t\t\twindow.addEventListener('keyup', this.enterHandler);\n\t}\n\tcomponentWillUnmount() {\n\t\tif (this.props.enter)\n\t\t\twindow.removeEventListener('keyup', this.enterHandler);\n\n\t\tdocument.body.removeEventListener('mouseup', this.up);\n\t}\n\tcomponentWillReceiveProps(nextProps) {\n\t\tif (nextProps.disabled !== this.state.disabled)\n\t\t\tthis.setState({ disabled: nextProps.disabled });\n\t}\n\tonEnter(event) {\n\t\tif (event.keyCode === 13 && !event.ctrlKey && !event.metaKey) {\n\t\t\tif (typeof this.props.onClick === 'function' && !this.props.disabled)\n\t\t\t\tthis.props.onClick();\n\t\t}\n\t}\n\n\tredirect(to) {\n\t\tif (this.props.disabled)\n\t\t\treturn;\n\t\twindow.location.href = to;\n\t}\n\n\trender() {\n\t\tlet className = this.props.className || '';\n\t\tif (this.props.invert)\n\t\t\tclassName += ' invert';\n\t\tif (this.state.disabled)\n\t\t\tclassName += ' disabled';\n\t\treturn ( \n\t\t\t<div className={className+' button'} \n\t\t\t\t id={this.props.id} \n\t\t\t\t onClick={(function () {\n\t\t\t\t \tif (this.props.disabled)\n\t\t\t\t \t\treturn;\n\t\t\t\t \t(this.props.to ? this.redirect.bind(this, this.props.to) : this.props.onClick)();\t\n\t\t\t\t }).bind(this)}\n\t\t\t\t style={this.props.style}>\n\t\t\t\t {this.props.children}\n\t\t\t</div> \n\t\t);\n\t}\n}\n\nexport default Button;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { ReactComponent as MicPic } from './mic.svg';\nimport { ReactComponent as ClosePic } from './close.svg';\nimport { ReactComponent as SendPic } from './send.svg';\n\nimport Button from '../Button/Button';\nimport './TextOrRecordInput.css';\n\nconst MAX_RECORD_LENGTH = 60; // 1 minute\n\n\n// VERY simple linked list\nclass LinkedList {\n\tconstructor() {\n\t\tthis.tail = null;\n\t}\n\n\tpush(val) {\n\t\tlet tail = this.tail;\n\t\tthis.tail = Object.assign(val, {\n\t\t\tnext: tail\n\t\t});\n\t}\n}\n\nfunction classes(obj) {\n\treturn Object.keys(obj).filter(key => obj[key]).join(' ');\n}\n\nclass TextOrRecordInput extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.context = null;\n\t\tthis.stream = null;\n\t\tthis.source = null;\n\t\tthis.processor = null;\n\t\tthis.analyser = null;\n\t\tthis.recorder = null;\n\t\tthis.chunks = [];\n\t\tthis.recordingStart = null;\n\n\t\tthis.volumes = null;\n\t\tthis.volumeMax = 0;\n\n\t\tthis.statusRef = React.createRef();\n\t\tthis.canvasRef = React.createRef();\n\t\tthis.inputRef = React.createRef();\n\n\t\tthis.state = {\n\t\t\ttype: 'text',\n\t\t\tstatus: '',\n\t\t\tstatusClass: ''\n\t\t};\n\n\t\tthis.onResize = this.resizeCanvas.bind(this);\n\n\t\tthis.callback = props.onSelect;\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.resizeCanvas();\n\t\twindow.addEventListener('resize', this.onResize);\n\t}\n\tcomponentWillUnmount() {\n\t\twindow.removeEventListener('resize', this.onResize);\n\t}\n\n\tresizeCanvas() {\n\t\tlet root = ReactDOM.findDOMNode(this);\n\t\tlet canvas = root.querySelector('canvas');\n\n\t\tcanvas.width = root.clientWidth * window.devicePixelRatio;\n\t\tcanvas.height = root.clientHeight * window.devicePixelRatio;\n\t}\n\trenderCanvas() {\n\t\tlet canvas = this.canvasRef.current;\n\t\tlet ctx = canvas.getContext('2d');\n\n\t\tlet W = canvas.width,\n\t\t\tH = canvas.height;\n\n\t\tctx.clearRect(0, 0, W, H);\n\n\t\tlet calculateCoordinates = (function (node, w, h) {\n\t\t\treturn {\n\t\t\t\tx: (node.timestamp - this.recordingStart) / (MAX_RECORD_LENGTH * 1000) * w,\n\t\t\t\ty: (1 - node.volume / this.volumeMax) * h\n\t\t\t};\n\t\t}).bind(this);\n\n\t\tctx.beginPath();\n\t\tlet node = this.volumes.tail, first = null, last;\n\t\twhile (node != null) {\n\t\t\tlet coordinates = calculateCoordinates(node, W, H);\n\t\t\tif (first == null)\n\t\t\t\tfirst = coordinates;\n\t\t\tctx.lineTo(coordinates.x, coordinates.y);\n\t\t\tlast = coordinates;\n\t\t\tnode = node.next;\n\t\t}\n\t\tctx.lineTo(0, last.y);\n\t\tctx.lineTo(0, H + 10);\n\t\tctx.lineTo(first.x, H + 10);\n\t\tctx.closePath();\n\n\t\tctx.lineWidth = window.devicePixelRatio * 1.5;\n\t\tctx.lineCap = 'round';\n\t\tctx.strokeStyle = '#1976d2';\n\t\tctx.fillStyle = '#90caf9';\n\t\tctx.stroke();\n\t\tctx.fill();\n\t}\n\t\n\n\tonMicClick() {\n\t\tthis.setState({type: 'mic'});\n\t\tnavigator.mediaDevices.getUserMedia({ audio: true, video: false })\n      \t\t.then((stream) => {\n      \t\t\tthis.stream = stream;\n\n      \t\t\tthis.context = new AudioContext();\n\t\t\t\tthis.analyser = this.context.createAnalyser();\n\t\t\t    this.source = this.context.createMediaStreamSource(this.stream);\n\t\t\t    this.processor = this.context.createScriptProcessor(1024, 1, 1);\n\n\t\t\t    this.recorder = new MediaRecorder(this.stream);\n\t\t\t    this.recorder.ondataavailable = (function (e) {\n\t\t\t    \tthis.chunks.push(e.data);\n\t\t\t    }).bind(this);\n\n\t\t\t\tthis.recordingStart = Date.now();\n\t\t\t\tthis.volumes = new LinkedList();\n\t\t\t\tthis.volumeMax = 0;\n\t\t\t\tthis.chunks = [];\n\t\t\t\tthis.recorder.start();\n\n\t\t\t\tthis.source.connect(this.analyser);\n\t\t\t\tthis.analyser.connect(this.processor);\n\t\t\t\tthis.processor.connect(this.context.destination);\n\t\t\t\tthis.processor.onaudioprocess = (e) => {\n\t\t\t\t\tif (this.stream === null || this.state.type !== 'mic' || this.volumes === null)\n\t\t\t\t\t\treturn;\n\t\t\t\t\tif (Date.now() - this.recordingStart > MAX_RECORD_LENGTH * 1000) {\n\t\t\t\t\t\tthis.stopStream(true);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.analyser.fftSize = 2048;\n\t\t\t\t\tlet bufferLength = this.analyser.frequencyBinCount;\n\t\t\t\t\tlet dataArray = new Uint8Array(bufferLength);\n\n\t\t\t\t\tthis.analyser.getByteFrequencyData(dataArray);\n\n\t\t\t\t\tlet sum = 0;\n\t\t\t\t\tfor (let i = 0; i < bufferLength; ++i)\n\t\t\t\t\t\tsum += dataArray[i];\n\n\t\t\t\t\tlet volume = (sum / bufferLength);\n\t\t\t\t\tif (volume > this.volumeMax)\n\t\t\t\t\t\tthis.volumeMax = volume;\n\t\t\t\t\tthis.volumes.push({timestamp: Date.now(), volume: volume});\n\t\t\t\t\tthis.renderCanvas();\n\n\t\t\t\t\tthis.statusRef.current.innerHTML = this.durationString(Date.now() - this.recordingStart);\n\t\t\t\t};\n      \t\t})\n      \t\t.catch(() => {\n      \t\t\tthis.setState({\n      \t\t\t\tstatusClass: 'error',\n      \t\t\t\tstatus: 'Failed to access microphone'\n      \t\t\t})\n      \t\t})\n\t}\n\tstopStream(send) {\n\t\tif (this.stream === null)\n\t\t\treturn;\n\t\tif (send) {\n\t\t\tthis.recorder.onstop = () => {\n\t\t\t\tlet blob = new Blob(this.chunks, { 'type' : this.recorder.mimeType });\n\t\t\t\tthis.callback({type: 'audio', value: blob});\n\t\t\t}\n\t\t}\n\t\tthis.recorder.stop();\n\t\tthis.stream.getTracks().forEach(function (track) {\n\t\t\ttrack.stop();\n\t\t});\n\t\tthis.stream = null;\n\t}\n\tdurationString(millis) {\n\t\tlet sec = Math.floor(millis / 1000);\n\t\tlet min = Math.floor(sec / 60);\n\t\tsec = sec % 60;\n\n\t\treturn this.addZeros(min) + ':' + this.addZeros(sec);\n\t}\n\taddZeros(str, n) {\n\t\tif (typeof n === 'undefined')\n\t\t\tn = 2;\n\t\tif (typeof str !== 'string')\n\t\t\tstr = str + '';\n\t\tif (str.length >= n)\n\t\t\treturn str;\n\t\treturn '0'.repeat(n-str.length) + str;\n\t}\n\n\tonCloseClick() {\n\t\tthis.setState({type: 'text'});\n\t\tthis.stopStream(false);\n\n\t\tthis.volumes = null;\n\t\tthis.volumeMax = 0;\n\n\t}\n\n\tonInputChange() {\n\t\tthis.updClassName();\n\t}\n\n\tonSendClick() {\n\t\tif (this.state.type === 'text') {\n\t\t\tlet value = this.inputRef.current.value.trim();\n\t\t\tif (value.length > 0) \n\t\t\t\tthis.callback({type: 'text', value: value});\n\t\t} else {\n\t\t\tif (this.stream !== null)\n\t\t\t\tthis.stopStream(true);\n\t\t}\n\t}\n\n\tupdClassName() {\n\t\tlet root = ReactDOM.findDOMNode(this);\n\t\tlet value = this.inputRef.current.value.trim();\n\t\troot.className = classes({\n\t\t\tTextOrRecordInput: true,\n\t\t\tcansend: value.length > 0,\n\t\t\tmic: this.state.type === 'mic',\n\t\t\ttext: this.state.type === 'text'\n\t\t});\n\t}\n\n\trender() {\n\t\tlet input = this.inputRef.current, value;\n\t\tif (input != null)\n\t\t\tvalue = input.value;\n\t\telse value = '';\n\n\t\treturn (\n\t\t\t<div className={classes({\n\t\t\t\t\tTextOrRecordInput: true,\n\t\t\t\t\tcansend: value.length > 0,\n\t\t\t\t\tmic: this.state.type === 'mic',\n\t\t\t\t\ttext: this.state.type === 'text'\n\t\t\t\t})}>\n\t\t\t\t<div className=\"input-wrapper\">\n\t\t\t\t\t<input \n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tplaceholder=\"Write lyrics here or press mic...\"\n\t\t\t\t\t\tref={this.inputRef}\n\t\t\t\t\t\tonChange={this.onInputChange.bind(this)}\n\t\t\t\t\t\tonKeyPress={this.onInputChange.bind(this)}\n\t\t\t\t\t\tonKeyUp={this.onInputChange.bind(this)} />\n\t\t\t\t</div>\n\t\t\t\t<div className={\"status \"+this.state.statusClass} ref={this.statusRef}>{this.state.status}</div>\n\t\t\t\t<canvas ref={this.canvasRef}></canvas>\n\t\t\t\t<Button \n\t\t\t\t\tclassName=\"mic borderless round\"\n\t\t\t\t\tonClick={this.onMicClick.bind(this)}>\n\t\t\t\t\t<MicPic />\n\t\t\t\t</Button>\n\t\t\t\t<Button\n\t\t\t\t\tclassName=\"close borderless round\"\n\t\t\t\t\tonClick={this.onCloseClick.bind(this)}>\n\t\t\t\t\t<ClosePic />\n\t\t\t\t</Button>\n\t\t\t\t<Button\n\t\t\t\t\tclassName=\"send borderless round\"\n\t\t\t\t\tonClick={this.onSendClick.bind(this)}>\n\t\t\t\t\t<SendPic />\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default TextOrRecordInput;","import React from 'react';\n\nimport Page from '../../Components/Page/Page';\nimport TextOrRecordInput from '../../Components/TextOrRecordInput/TextOrRecordInput';\n\nconst API_TOKEN = '47ad9870695533cb638d9fc29c179a21';\nconst API_ENDPOINT = {\n\ttext: 'https://api.audd.io/findLyrics/',\n\taudio: 'https://api.audd.io/recognizeWithOffset/'\n}\n\nclass IndexPage extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.preRef = React.createRef();\n\t}\n\n\tsend(res) {\n\t\tlet url = API_ENDPOINT[res.type] + '?api_token=' + API_TOKEN;\n\t\tlet data;\n\t\tif (res.type === 'audio') {\n\t\t\tdata = new FormData();\n\t\t\tdata.append(\"file\", res.value);\n\t\t} else if (res.type === 'text')\n\t\t\turl += '&q='+encodeURIComponent(res.value);\n\n\n\t\tlet xhr = new XMLHttpRequest();\n\t\txhr.open('POST', url, true);\n\n\t\txhr.onreadystatechange = () => {\n\t\t\tif (xhr.readyState !== 4) return;\n\n\t\t\tthis.preRef.current.innerHTML = xhr.responseText;\n\t\t}\n\n\t\txhr.send(data);\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Page id=\"index\" route=\"/\">\n\t\t\t\t<p>Akinator tries to recognize and guess what song you are trying to find. You are welcome to type lyrics or hum song's rythm in microphone.</p>\n\t\t\t\t<TextOrRecordInput onSelect={this.send.bind(this)} />\n\t\t\t\t<br />\n\t\t\t\t<pre ref={this.preRef} />\n\t\t\t</Page>\n\t\t);\t\n\t}\n}\n\nexport default IndexPage;","import React from 'react';\n\nimport Page from '../../Components/Page/Page';\n\nexport default function () {\n\treturn (\n\t\t<Page id=\"404\">\n\t\t\t<p>404!</p>\n\t\t</Page>\n\t);\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n\t<App />,\n\tdocument.getElementById('root')\n);\n\n/*\n\t/ - index page\n\t/track - track guessed\n*/\n","import React from 'react';\n\nimport IndexPage from './Pages/IndexPage/IndexPage';\nimport _404Page from './Pages/404Page/404Page';\n\nimport './App.css';\n\nexport default function () {\n\treturn (\n\t\t<div id=\"content\">\n\t\t\t<div id=\"header\">\n\t\t\t\t<h1>Musical Akinator</h1>\n\t\t\t</div>\n\t\t\t<section id=\"pages-wrapper\">\n\t\t\t\t<IndexPage />\n\t\t\t\t<_404Page />\n\t\t\t</section>\n\t\t</div>\n\t);\n}"],"sourceRoot":""}